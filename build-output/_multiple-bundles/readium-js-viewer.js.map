{
  "version": 3,
  "file": "readium-js-viewer.js",
  "sources": [
    "StorageManager.js",
    "../../src/js/storage/Settings.js",
    "../../src/js/workers/Messages.js",
    "../../src/js/workers/WorkerProxy.js",
    "../../src/i18n/_locales/de/messages.json!text",
    "../../src/i18n/_locales/es/messages.json!text",
    "../../src/i18n/_locales/en_US/messages.json!text",
    "../../src/i18n/_locales/fr/messages.json!text",
    "../../src/i18n/_locales/it/messages.json!text",
    "../../src/i18n/_locales/id/messages.json!text",
    "../../src/i18n/_locales/ja/messages.json!text",
    "../../src/i18n/_locales/ko/messages.json!text",
    "../../src/i18n/_locales/pt_BR/messages.json!text",
    "../../src/i18n/_locales/zh_CN/messages.json!text",
    "../../src/i18n/_locales/zh_TW/messages.json!text",
    "../../src/i18n/Strings.js",
    "../../src/js/EpubLibraryManager.js",
    "hgn.js",
    "hgn!readium_js_viewer_html_templates/library-navbar.html",
    "hgn!readium_js_viewer_html_templates/library-body.html",
    "hgn!readium_js_viewer_html_templates/empty-library.html",
    "hgn!readium_js_viewer_html_templates/library-item.html",
    "hgn!readium_js_viewer_html_templates/details-dialog.html",
    "hgn!readium_js_viewer_html_templates/about-dialog.html",
    "hgn!readium_js_viewer_html_templates/details-body.html",
    "hgn!readium_js_viewer_html_templates/add-epub-dialog.html",
    "hgn!readium_js_viewer_html_templates/settings-dialog.html",
    "hgn!readium_js_viewer_html_templates/settings-keyboard-item.html",
    "hgn!readium_js_viewer_html_templates/managed-dialog.html",
    "hgn!readium_js_viewer_html_templates/progress-dialog.html",
    "hgn!readium_js_viewer_html_templates/managed-buttons.html",
    "../../src/js/Dialogs.js",
    "../../src/js/Keyboard.js",
    "../../src/js/ReaderSettingsDialog_Keyboard.js",
    "../../src/js/ReaderSettingsDialog.js",
    "../../src/js/analytics/Analytics.js",
    "../../src/js/versioning/ReadiumVersioning.js",
    "../../src/js/EpubLibrary.js",
    "../../src/js/Spinner.js",
    "hgn!readium_js_viewer_html_templates/reader-navbar.html",
    "hgn!readium_js_viewer_html_templates/reader-body.html",
    "hgn!readium_js_viewer_html_templates/reader-body-page-btns.html",
    "../../src/js/EpubReaderMediaOverlays.js",
    "../../src/js/EpubReaderBackgroundAudioTrack.js",
    "../../src/js/gestures.js",
    "../../src/js/EpubReader.js",
    "../../src/js/ReadiumViewer.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA,AD0BA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9GA,AD+GA;AC9GA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA,ADqFA;ACpFA;AACA;ACFA,ADGA;ACFA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;ACFA,ADGA;ACFA;AACA;ACFA,ADGA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACngBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjVA,ADkVA;ACjVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxSA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA,ADeA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;ACFA,ADGA;ACFA;AACA;ACFA,ADGA;ACFA;AACA;ACFA,ADGA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACr+BA,ADs+BA;ACr+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA,ADyFA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC38BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "define('StorageManager',[], function(){\r\n\tvar StaticStorageManager = {\r\n\t\t\r\n\t\tsaveFile : function(path, blob, success, error){\r\n\t\t\tsuccess()\r\n\t\t},\r\n\t\t\r\n\t\tdeleteFile : function(path, success, error){\r\n\t\t\tsuccess();\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tgetPathUrl : function(path){\r\n\t\t\tif (path == '/epub_library.json')\r\n\t\t\t{\r\n\t\t\t\treturn 'epub_content/epub_library.json';\r\n\t\t\t}\r\n\t\t\treturn path;\r\n\t\t},\r\n\t\tinitStorage: function(success, error){\r\n\t\t\tsuccess();\r\n\t\t}\r\n\t}\r\n\treturn StaticStorageManager;\r\n});\r\n\n",
    "define('readium_js_viewer/storage/Settings',[],function(){\r\n    \r\n    // localStorage may be disabled due to zero-quota issues (e.g. iPad in private browsing mode)\r\n    var _isLocalStorageEnabled = undefined;\r\n    var isLocalStorageEnabled = function() {\r\n        if (_isLocalStorageEnabled) return true;\r\n        if (typeof _isLocalStorageEnabled === \"undefined\") {\r\n            _isLocalStorageEnabled = false;\r\n            if (localStorage) {\r\n                try {\r\n                    localStorage.setItem(\"_isLocalStorageEnabled\", \"?\");\r\n                    localStorage.removeItem(\"_isLocalStorageEnabled\");\r\n                    _isLocalStorageEnabled = true;\r\n                } catch(e) {\r\n                }\r\n            }\r\n            return _isLocalStorageEnabled;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n    \r\n\tSettings = {\r\n\t\tput : function(key, val, callback){\r\n            if (!isLocalStorageEnabled()) {\r\n                if (callback) callback();\r\n                return;\r\n            }\r\n            \r\n            var val = JSON.stringify(val);\r\n\t\t\tlocalStorage[key] = val;\r\n            \r\n\t\t\tif (callback){\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget : function(key, callback){\r\n            if (!isLocalStorageEnabled()) {\r\n                if (callback) callback(null);\r\n                return;\r\n            }\r\n            \r\n\t\t\tvar val = localStorage[key];\r\n\t\t\tif (val){\r\n\t\t\t\tcallback(JSON.parse(val));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tcallback(null);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tgetMultiple : function(keys, callback){\r\n            if (!isLocalStorageEnabled()) {\r\n                if (callback) callback({});\r\n                return;\r\n            }\r\n            \r\n\t\t\tvar retVal = {};\r\n\t\t\tfor (var i = 0; i < keys.length; i++){\r\n\t\t\t\tif (localStorage[keys[i]]){\r\n\t\t\t\t\tretVal[keys[i]] = localStorage[keys[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(retVal);\r\n\t\t}\r\n\t}\r\n\treturn Settings;\r\n});\n",
    "define('readium_js_viewer/workers/Messages',[],function(){\r\n\treturn {\r\n\t\t// window -> worker messages\r\n\t\tIMPORT_ZIP : 0,\r\n\t\tOVERWRITE_CONTINUE : 1,\r\n\t\tFIND_PACKAGE_RESPONSE: 2,\r\n\t\tPARSE_PACKAGE_RESPONSE: 3,\r\n\t\tDELETE_EPUB : 4,\r\n\t\tIMPORT_DIR : 5,\r\n\t\tIMPORT_URL: 6,\r\n\t\tMIGRATE: 7,\r\n\t\tOVERWRITE_SIDE_BY_SIDE: 8,\r\n\t\tCONTINUE_IMPORT_ZIP: 9,\r\n\r\n\t\t// worker -> window messages\r\n\t\tSUCCESS : 100,\r\n\t\tPROGRESS : 101,\r\n\t\tERROR : 102,\r\n\t\tOVERWRITE : 103,\r\n\t\tFIND_PACKAGE : 104,\r\n\t\tPARSE_PACKAGE: 105,\r\n\r\n\r\n\t\tPROGRESS_EXTRACTING : 200,\r\n\t\tPROGRESS_WRITING: 201,\r\n\t\tPROGRESS_DELETING: 202,\r\n\t\tPROGRESS_MIGRATING: 203,\r\n\r\n\t\tERROR_STORAGE : 300,\r\n\t\tERROR_EPUB : 301,\r\n\t\tERROR_AJAX : 302,\r\n\r\n\t}\r\n});\n",
    "define('readium_js_viewer/workers/WorkerProxy',['module', './Messages', 'jquery', 'readium_js/epub-model/package_document_parser', 'readium_js/epub-fetch/encryption_handler'], function(module, Messages, $, PackageParser, EncryptionHandler){\r\n\r\n\tvar worker;\r\n\tvar cleanupWorker = function(){\r\n\t\tworker.terminate();\r\n\t\tworker = null;\r\n\t}\r\n\tvar doWork = function(data, callbacks){\r\n\t\tif (worker){\r\n\t\t\tconsole.log('dangling worker');\r\n\t\t}\r\n\r\n\t\tvar workerUrl = module.config().workerUrl;\r\n\t\tworker = new Worker(workerUrl);\r\n\r\n\t\tvar continueOverwrite = function(){\r\n\t\t\tworker.postMessage({msg: Messages.OVERWRITE_CONTINUE});\r\n\t\t}\r\n\t\tvar keepBoth = function(){\r\n\t\t\tworker.postMessage({msg: Messages.OVERWRITE_SIDE_BY_SIDE})\r\n\t\t}\r\n\t\tvar cancelOverwrite = function(){\r\n\t\t\tcleanupWorker();\r\n\t\t}\r\n\r\n\t\tvar innerError = callbacks.error || $.noop;\r\n\t\tvar error = function(error){\r\n\t\t\tcleanupWorker();\r\n\t\t\tinnerError(error);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tworker.onmessage = function(evt){\r\n\t\t\tvar data = evt.data;\r\n\t\t\tswitch (data.msg){\r\n\t\t\t\tcase Messages.SUCCESS:\r\n\t\t\t\t\tif (callbacks.success){\r\n\t\t\t\t\t\tcallbacks.success(data.libraryItems);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcleanupWorker();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.CONTINUE_IMPORT_ZIP:\r\n\t\t\t\t\tcleanupWorker();\r\n\t\t\t\t\tdoWork({msg: Messages.CONTINUE_IMPORT_ZIP, buf: data.buf, index: data.index, rootDirName: data.rootDirName, libraryItems: data.libraryItems}, callbacks);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.PROGRESS:\r\n\t\t\t\t\tif (callbacks.progress){\r\n\t\t\t\t\t\tcallbacks.progress(data.percent, data.progressType, data.progressData);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.OVERWRITE:\r\n\t\t\t\t\tif (callbacks.overwrite){\r\n\t\t\t\t\t\tcallbacks.overwrite(data.item, continueOverwrite, keepBoth, cancelOverwrite);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.FIND_PACKAGE:\r\n\t\t\t\t\tvar containerDom = (new DOMParser()).parseFromString(data.containerStr, \"text/xml\");\r\n\t\t\t\t\tvar $rootfile = $('rootfile', containerDom);\r\n\t\t\t\t\tif (!$rootfile.length){\r\n\t                    error(Messages.ERROR_EPUB);\r\n\t                    console.error('Epub container.xml missing rootfile element');\r\n\t                }\r\n\t                else{\r\n\t                \tworker.postMessage({msg: Messages.FIND_PACKAGE_RESPONSE, path: $rootfile.attr('full-path')});\r\n\t                }\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.PARSE_PACKAGE:\r\n\t\t\t\t\tvar packageDom = (new DOMParser()).parseFromString(data.packageStr, \"text/xml\");\r\n\t\t\t\t\tvar packageObj = PackageParser.parsePackageDom(packageDom);\r\n\r\n                    var encryptionData;\r\n                    if(data.encryptionStr) {\r\n                        var encryptionDom = (new DOMParser()).parseFromString(data.encryptionStr, \"text/xml\");\r\n\r\n                        encryptionData = EncryptionHandler.CreateEncryptionData(packageObj.id, encryptionDom);\r\n                    }\r\n\r\n\t\t\t\t\tworker.postMessage({msg: Messages.PARSE_PACKAGE_RESPONSE, packageObj: packageObj, encryptionData: encryptionData});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\terror(data.errorMsg || \"Unknown error\");\r\n\t\t\t\t\tcleanupWorker();\r\n\t\t\t}\r\n\t\t}\r\n\t\tworker.onerror = function(){\r\n\t\t\tconsole.error(arguments)\r\n\t\t}\r\n\t\tcurrentWorker = worker;\r\n\t\tworker.postMessage(data);\r\n\t}\r\n\r\n\treturn {\r\n\t\timportZip: function(blob, libraryItems, callbacks){\r\n\t\t\tdoWork({msg: Messages.IMPORT_ZIP, buf: blob, libraryItems: libraryItems}, callbacks);\r\n\t\t},\r\n\t\timportDirectory : function(files, libraryItems, callbacks){\r\n\t\t\tdoWork({msg: Messages.IMPORT_DIR, files: files, libraryItems: libraryItems}, callbacks);\r\n\t\t},\r\n\t\timportUrl : function(url, libraryItems, callbacks){\r\n\t\t\tdoWork({msg: Messages.IMPORT_URL, url: url, libraryItems: libraryItems}, callbacks);\r\n\t\t},\r\n\t\tdeleteEpub : function(id, libraryItems, callbacks){\r\n\t\t\tdoWork({msg: Messages.DELETE_EPUB, id: id, libraryItems:libraryItems}, callbacks);\r\n\t\t},\r\n\t\tmigrateOldBooks : function(callbacks){\r\n\t\t\tdoWork({msg: Messages.MIGRATE}, callbacks);\r\n\t\t}\r\n\t}\r\n});\r\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/de/messages.json',[],function () { return '{ \"about\": {\\r\\n    \"message\": \"Über Readium\"\\r\\n    },\\r\\n    \"preview\": {\\r\\n        \"message\": \"Vorschau\"\\r\\n    },\\r\\n    \"list_view\": {\\r\\n        \"message\": \"Listenansicht\"\\r\\n    },\\r\\n    \"thumbnail_view\": {\\r\\n        \"message\": \"Kachelansicht\"\\r\\n    },\\r\\n    \"view_library\": {\\r\\n        \"message\": \"Bibliothek\"\\r\\n    },\\r\\n    \"highlight_selection\": {\\r\\n        \"message\": \"Ausgewählten Text hervorheben\"\\r\\n    },\\r\\n    \"toc\": {\\r\\n        \"message\": \"Inhaltsverzeichnis\"\\r\\n    },\\r\\n    \"settings\": {\\r\\n        \"message\": \"Einstellungen\"\\r\\n    },\\r\\n    \"enter_fullscreen\": {\\r\\n        \"message\": \"Vollbildmodus\"\\r\\n    },\\r\\n    \"exit_fullscreen\": {\\r\\n        \"message\": \"Vollbildmodus verlassen\"\\r\\n    },\\r\\n    \"chrome_extension_name\": {\\r\\n        \"message\": \"Readium\"\\r\\n    },\\r\\n    \"chrome_extension_description\": {\\r\\n        \"message\": \"Ein Leseprogramm für EPUB3 Bücher.\"\\r\\n    },\\r\\n    \"ok\" : {\\r\\n        \"message\" : \"Ok\"\\r\\n    },\\r\\n    \"i18n_readium_library\": {\\r\\n        \"message\": \"Readium Bibliothek\"\\r\\n    },\\r\\n    \"i18n_loading\": {\\r\\n        \"message\": \"Bibliothek wird geladen\"\\r\\n    },\\r\\n    \"i18n_readium_options\": {\\r\\n        \"message\": \"Readium Einstellungen:\"\\r\\n    },\\r\\n    \"i18n_save_changes\": {\\r\\n        \"message\": \"Änderungen speichern\"\\r\\n    },\\r\\n    \"i18n_close\": {\\r\\n        \"message\": \"Schließen\"\\r\\n    },\\r\\n    \"i18n_keyboard_shortcuts\": {\\r\\n        \"message\": \"Funktionstasten\"\\r\\n    },\\r\\n    \"i18n_keyboard_reload\": {\\r\\n        \"message\": \"Bitte laden Sie die Seite im Browser neu, damit die Änderungen der Tastaturkürzel wirksam werden.\"\\r\\n    },\\r\\n    \"i18n_reset_key\": {\\r\\n        \"message\": \"Taste zurücksetzen\"\\r\\n    },\\r\\n    \"i18n_reset_key_all\": {\\r\\n        \"message\": \"Alle Funktionstasten auf Standard zurücksetzen\"\\r\\n    },\\r\\n    \"i18n_duplicate_keyboard_shortcut\": {\\r\\n        \"message\": \"Doppelbelegung\"\\r\\n    },\\r\\n    \"i18n_invalid_keyboard_shortcut\": {\\r\\n        \"message\": \"Nicht zulässig\"\\r\\n    },\\r\\n    \"i18n_paginate_all\": {\\r\\n        \"message\": \"Fließtext des EPUB Inhalts paginieren\"\\r\\n    },\\r\\n    \"i18n_automatically\": {\\r\\n        \"message\": \"*.epub URLs automatisch in Readium öffnen\"\\r\\n    },\\r\\n    \"i18n_show_warning\": {\\r\\n        \"message\": \"Warnhinweise beim Entpacken von EPUB Dateien anzeigen\"\\r\\n    },\\r\\n    \"i18n_details\": {\\r\\n        \"message\": \"Details\"\\r\\n    },\\r\\n    \"i18n_read\": {\\r\\n        \"message\": \"Lesen\"\\r\\n    },\\r\\n    \"i18n_delete\": {\\r\\n        \"message\": \"Löschen\"\\r\\n    },\\r\\n    \"i18n_are_you_sure\": {\\r\\n        \"message\": \"Möchten Sie diese Datei wirklich unwiderruflich löschen?\"\\r\\n    },\\r\\n    \"delete_dlg_title\": {\\r\\n        \"message\": \"Löschen bestätigen\"\\r\\n    },\\r\\n\\r\\n    \"i18n_auto_page_turn_enable\": {\\r\\n        \"message\": \"Automatisches Umblättern einschalten\"\\r\\n    },\\r\\n    \"i18n_auto_page_turn_disable\": {\\r\\n        \"message\": \"Automatisches Umblättern ausschalten\"\\r\\n    },\\r\\n\\r\\n    \"i18n_playback_scroll_enable\": {\\r\\n        \"message\": \"Scrollen während der Wiedergabe\"\\r\\n    },\\r\\n    \"i18n_playback_scroll_disable\": {\\r\\n        \"message\": \"Kein Scrollen während der Wiedergabe\"\\r\\n    },\\r\\n    \"i18n_audio_touch_enable\": {\\r\\n        \"message\": \"Touch-to-play einschalten\"\\r\\n    },\\r\\n    \"i18n_audio_touch_disable\": {\\r\\n        \"message\": \"Touch-to-play ausschalten\"\\r\\n    },\\r\\n    \"i18n_audio_highlight_default\": {\\r\\n        \"message\": \"Standard\"\\r\\n    },\\r\\n    \"i18n_audio_highlight\": {\\r\\n        \"message\": \"Hervorhebungsfarbe\"\\r\\n    },\\r\\n\\r\\n    \"delete_progress_title\": {\\r\\n        \"message\": \"Löschen wird ausgeführt\"\\r\\n    },\\r\\n    \"delete_progress_message\": {\\r\\n        \"message\": \"Löschen\"\\r\\n    },\\r\\n    \"migrate_dlg_title\": {\\r\\n        \"message\": \"Bücher migrieren\"\\r\\n    },\\r\\n    \"migrate_dlg_message\": {\\r\\n        \"message\": \"Daten werden geladen...\"\\r\\n    },\\r\\n    \"migrating\": {\\r\\n        \"message\": \"Migrieren...\"\\r\\n    },\\r\\n    \"replace_dlg_title\": {\\r\\n        \"message\": \"Konflikt festgestellt\"\\r\\n    },\\r\\n    \"replace_dlg_message\": {\\r\\n        \"message\": \"Soll das bestehende EPUB wirklich ersetzt werden?\"\\r\\n    },\\r\\n    \"import_dlg_title\": {\\r\\n        \"message\": \"EPUB importieren\"\\r\\n    },\\r\\n    \"import_dlg_message\": {\\r\\n        \"message\": \"EPUB Inhalt überprüfen...\"\\r\\n    },\\r\\n    \"storing_file\": {\\r\\n        \"message\": \"Datei speichern\"\\r\\n    },\\r\\n    \"err_unknown\": {\\r\\n        \"message\": \"Unbekannter Fehler. Für Details öffnen Sie die Konsole.\"\\r\\n    },\\r\\n    \"err_storage\": {\\r\\n        \"message\": \"Zugriff auf Dateispeicher nicht möglich.\"\\r\\n    },\\r\\n    \"err_epub_corrupt\": {\\r\\n        \"message\": \"Ungültiges oder beschädigtes EPUB Paket\"\\r\\n    },\\r\\n    \"err_dlg_title\": {\\r\\n        \"message\": \"Unerwarteter Fehler\"\\r\\n    },\\r\\n    \"replace\" : {\\r\\n        \"message\": \"Ersetzen\"\\r\\n    },\\r\\n    \"i18n_author\": {\\r\\n        \"message\": \"Autor: \"\\r\\n    },\\r\\n    \"i18n_publisher\": {\\r\\n        \"message\": \"Verlag: \"\\r\\n    },\\r\\n    \"i18n_source\": {\\r\\n        \"message\": \"Quelle: \"\\r\\n    },\\r\\n    \"i18n_pub_date\": {\\r\\n        \"message\": \"Veröffentlicht am: \"\\r\\n    },\\r\\n    \"i18n_modified_date\": {\\r\\n        \"message\": \"Zuletzt geändert am: \"\\r\\n    },\\r\\n    \"i18n_id\": {\\r\\n        \"message\": \"ID: \"\\r\\n    },\\r\\n    \"i18n_epub_version\": {\\r\\n        \"message\": \"EPUB Version: \"\\r\\n    },\\r\\n    \"i18n_created_at\": {\\r\\n        \"message\": \"Erstellt am: \"\\r\\n    },\\r\\n    \"i18n_format\": {\\r\\n        \"message\": \"Format: \"\\r\\n    },\\r\\n    \"i18n_added\": {\\r\\n        \"message\": \"Hinzugefügt am: \"\\r\\n    },\\r\\n    \"i18n_unknown\": {\\r\\n        \"message\": \"Unbekannt\"\\r\\n    },\\r\\n    \"i18n_sorry\": {\\r\\n        \"message\": \"Das aktuelle EPUB enthält für diesen Inhalt keine Media Overlays.\"\\r\\n    },\\r\\n    \"i18n_add_items\": {\\r\\n        \"message\": \"Füge Werke zur Bibliothek hinzu.\"\\r\\n    },\\r\\n    \"i18n_extracting\": {\\r\\n        \"message\": \"Entpacke: \"\\r\\n    },\\r\\n    \"i18n_add_book_to_readium_library\": {\\r\\n        \"message\": \"Buch zur Readium Bibliothek hinzufügen:\"\\r\\n    },\\r\\n    \"i18n_add_book\": {\\r\\n        \"message\": \"Buch hinzufügen\"\\r\\n    },\\r\\n    \"i18n_cancel\": {\\r\\n        \"message\": \"Abbrechen\"\\r\\n    },\\r\\n    \"i18n_from_the_web\": {\\r\\n        \"message\": \"Internet:\"\\r\\n    },\\r\\n    \"i18n_from_local_file\": {\\r\\n        \"message\": \"Lokale Datei:\"\\r\\n    },\\r\\n    \"i18n_enter_a_url\": {\\r\\n        \"message\": \"URL einer .epub Datei eingeben\"\\r\\n    },\\r\\n    \"i18n_unpacked_directory\": {\\r\\n        \"message\": \"Entpacktes Verzeichnis:\"\\r\\n    },\\r\\n    \"i18n_validate\": {\\r\\n        \"message\": \"Prüfe:\"\\r\\n    },\\r\\n    \"i18n_confirm_that_this_book\": {\\r\\n        \"message\": \"Bestätigung, dass dieses Buch mit EPUB Standards übereinstimmt\"\\r\\n    },\\r\\n    \"i18n_single_pages\": {\\r\\n        \"message\": \"Einzelseiten\"\\r\\n    },\\r\\n    \"i18n_double_pages\": {\\r\\n        \"message\": \"Doppelseiten\"\\r\\n    },\\r\\n    \"i18n_save_settings\": {\\r\\n        \"message\": \"Einstellungen speichern\"\\r\\n    },\\r\\n    \"i18n_font_size\": {\\r\\n        \"message\": \"Schriftgröße\"\\r\\n    },\\r\\n    \"i18n_margins\": {\\r\\n        \"message\": \"Rand\"\\r\\n    },\\r\\n    \"i18n_text_and_background_color\": {\\r\\n        \"message\": \"Text- und Hintergrundfarbe\"\\r\\n    },\\r\\n    \"i18n_author_theme\": {\\r\\n        \"message\": \"Vorgabe des Autors\"\\r\\n    },\\r\\n    \"i18n_black_and_white\": {\\r\\n        \"message\": \"Schwarzweiss\"\\r\\n    },\\r\\n    \"i18n_arabian_nights\": {\\r\\n        \"message\": \"Arabian Nights\"\\r\\n    },\\r\\n    \"i18n_sands_of_dune\": {\\r\\n        \"message\": \"Sands of Dune\"\\r\\n    },\\r\\n    \"i18n_ballard_blues\": {\\r\\n        \"message\": \"Ballard Blues\"\\r\\n    },\\r\\n    \"i18n_vancouver_mist\": {\\r\\n        \"message\": \"Vancouver Mist\"\\r\\n    },\\r\\n    \"i18n_display_format\": {\\r\\n        \"message\": \"Anzeigeformat\"\\r\\n    },\\r\\n    \"i18n_spread_auto\": {\\r\\n        \"message\": \"Automatisch\"\\r\\n    },\\r\\n    \"i18n_scroll_mode\": {\\r\\n        \"message\": \"Scroll Modus\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_auto\": {\\r\\n        \"message\": \"Automatisch\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_doc\": {\\r\\n        \"message\": \"Dokument\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_continuous\": {\\r\\n        \"message\": \"Kontinuierlich\"\\r\\n    },\\r\\n\\r\\n    \"i18n_page_transition\": {\\r\\n        \"message\": \"Umblätter-Effekt\"\\r\\n    },\\r\\n    \"i18n_page_transition_none\": {\\r\\n        \"message\": \"Keiner\"\\r\\n    },\\r\\n    \"i18n_page_transition_fade\": {\\r\\n        \"message\": \"Fade\"\\r\\n    },\\r\\n    \"i18n_page_transition_slide\": {\\r\\n        \"message\": \"Slide\"\\r\\n    },\\r\\n    \"i18n_page_transition_swoosh\": {\\r\\n        \"message\": \"Swoosh\"\\r\\n    },\\r\\n    \"i18n_page_transition_butterfly\": {\\r\\n        \"message\": \"Butterfly\"\\r\\n    },\\r\\n    \"i18n_html_readium_tm_a_project\": {\\r\\n        \"message\": \"Readium für Chrome ist die Chrome Browser Erweiterung basierend auf ReadiumJS, einem Open-Source Lesesystem und einer JavaScript Bibliothek zur Darstellung von EPUB® Veröffentlichungen in Web-Browsern. ReadiumJS ist ein Projekt der Readium Foundation (Readium.org). Wenn Sie mehr darüber erfahren möchten oder das Projekt unterstützen wollen, besuchen Sie bitte die <a href=\\\\\"http://readium.org/\\\\\">Projekt Homepage</a>.\"\\r\\n\\r\\n    },\\r\\n    \"gethelp\": {\\r\\n        \"message\": \"Falls Sie auf Probleme stoßen, Fragen haben oder \\\\\"Hallo\\\\\" sagen möchten, besuchen Sie <a href=\\\\\"http://idpf.org/forums/readium\\\\\">unser Forum</a>.\"\\r\\n    },\\r\\n    \"i18n_toolbar\": {\\r\\n        \"message\": \"Werkzeugleiste\"\\r\\n    },\\r\\n    \"i18n_toolbar_show\": {\\r\\n        \"message\": \"Werkzeugleiste anzeigen\"\\r\\n    },\\r\\n    \"i18n_toolbar_hide\": {\\r\\n        \"message\": \"Werkzeugleiste ausblenden\"\\r\\n    },\\r\\n    \"i18n_audio_play\": {\\r\\n        \"message\": \"Audio - Abspielen\"\\r\\n    },\\r\\n    \"i18n_audio_pause\": {\\r\\n        \"message\": \"Audio - Pause\"\\r\\n    },\\r\\n    \"i18n_audio_play_background\": {\\r\\n        \"message\": \"Hintergrundaudio ein\"\\r\\n    },\\r\\n    \"i18n_audio_pause_background\": {\\r\\n        \"message\": \"Hintergrundaudio aus\"\\r\\n    },\\r\\n    \"i18n_audio_previous\": {\\r\\n        \"message\": \"Vorige Audiophrase\"\\r\\n    },\\r\\n    \"i18n_audio_next\": {\\r\\n        \"message\": \"Nächste Audiophrase\"\\r\\n    },\\r\\n    \"i18n_audio_volume\": {\\r\\n        \"message\": \"Lautstärke\"\\r\\n    },\\r\\n    \"i18n_audio_volume_increase\": {\\r\\n        \"message\": \"Lautstärke erhöhen\"\\r\\n    },\\r\\n    \"i18n_audio_volume_decrease\": {\\r\\n        \"message\": \"Lautstärke verringern\"\\r\\n    },\\r\\n    \"i18n_audio_time\": {\\r\\n        \"message\": \"Audio - Zeitmarke\"\\r\\n    },\\r\\n    \"i18n_audio_mute\": {\\r\\n        \"message\": \"Audio ausschalten\"\\r\\n    },\\r\\n    \"i18n_audio_unmute\": {\\r\\n        \"message\": \"Audio einschalten\"\\r\\n    },\\r\\n    \"i18n_audio_expand\": {\\r\\n        \"message\": \"Erweiterte Audio-Steuerung anzeigen\"\\r\\n    },\\r\\n    \"i18n_audio_collapse\": {\\r\\n        \"message\": \"Erweiterte Audio-Steuerung ausblenden\"\\r\\n    },\\r\\n    \"i18n_audio_esc\": {\\r\\n        \"message\": \"Aktuellen Audio-Bereich verlassen\"\\r\\n    },\\r\\n    \"i18n_audio_rate\": {\\r\\n        \"message\": \"Audio - Wiedergabegeschwindigkeit\"\\r\\n    },\\r\\n    \"i18n_audio_rate_increase\": {\\r\\n        \"message\": \"Audio - Wiedergabegeschwindigkeit erhöhen\"\\r\\n    },\\r\\n    \"i18n_audio_rate_decrease\": {\\r\\n        \"message\": \"Audio - Wiedergabegeschwindigkeit verringern\"\\r\\n    },\\r\\n    \"i18n_audio_rate_reset\": {\\r\\n        \"message\": \"Audio - Wiedergabegeschwindigkeit zurücksetzen\"\\r\\n    },\\r\\n    \"i18n_audio_skip_disable\": {\\r\\n        \"message\": \"Audio - Überspringen unterbinden \"\\r\\n    },\\r\\n    \"i18n_audio_skip_enable\": {\\r\\n        \"message\": \"Audio - Überspringen ermöglichen\"\\r\\n    },\\r\\n    \"i18n_audio_sync\": {\\r\\n        \"message\": \"Text-Audio-Synchronisation\"\\r\\n    },\\r\\n    \"i18n_audio_sync_default\": {\\r\\n        \"message\": \"Nach Vorgabe\"\\r\\n    },\\r\\n    \"i18n_audio_sync_word\": {\\r\\n        \"message\": \"Wort\"\\r\\n    },\\r\\n    \"i18n_audio_sync_sentence\": {\\r\\n        \"message\": \"Satz\"\\r\\n    },\\r\\n    \"i18n_audio_sync_paragraph\": {\\r\\n        \"message\": \"Absatz\"\\r\\n    },\\r\\n    \"i18n_page_previous\": {\\r\\n        \"message\": \"Vorige Seite\"\\r\\n    },\\r\\n    \"i18n_page_next\": {\\r\\n        \"message\": \"Nächste Seite\"\\r\\n    },\\r\\n    \"chrome_accept_languages\": {\\r\\n        \"message\": \"$CHROME$ akzeptiert $languages$ Sprachen\",\\r\\n        \"placeholders\": {\\r\\n            \"chrome\": {\\r\\n                \"content\": \"Chrome\",\\r\\n                \"example\": \"Chrome\"\\r\\n            },\\r\\n            \"languages\": {\\r\\n                \"content\": \"$1\",\\r\\n                \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/es/messages.json',[],function () { return '{\\r\\n\\r\\n    \"chrome_extension_name\": {\\r\\n        \"message\": \"Readium\"\\r\\n    },\\r\\n    \"about\" : {\\r\\n        \"message\" : \"Acerca de\"\\r\\n    },\\r\\n    \"preview\" : {\\r\\n        \"message\" : \"Vista previa\"\\r\\n    },\\r\\n    \"list_view\" : {\\r\\n        \"message\" : \"Vista en lista\"\\r\\n    },\\r\\n    \"thumbnail_view\" : {\\r\\n        \"message\" : \"Vista en miniaturas\"\\r\\n    },\\r\\n    \"view_library\": {\\r\\n        \"message\" : \"Biblioteca\"\\r\\n    },\\r\\n    \"highlight_selection\" : {\\r\\n        \"message\" : \"Subrayar texto seleccionado\"\\r\\n    },\\r\\n    \"toc\" : {\\r\\n        \"message\" : \"Tabla de contenidos\"\\r\\n    },\\r\\n    \"settings\" : {\\r\\n        \"message\" : \"Preferencias\"\\r\\n    },\\r\\n    \"enter_fullscreen\" : {\\r\\n        \"message\" : \"Abrir modo de pantalla completa\"\\r\\n    },\\r\\n    \"exit_fullscreen\" : {\\r\\n        \"message\" : \"Cerrar modo de pantalla completa\"\\r\\n    },\\r\\n    \"chrome_extension_description\": {\\r\\n        \"message\": \"Lector de libros EPUB3.\"\\r\\n    },\\r\\n    \"ok\" : {\\r\\n        \"message\" : \"Ok\"\\r\\n    },\\r\\n    \"delete_dlg_title\" : {\\r\\n        \"message\" : \"Confirmar eliminación\"\\r\\n    },\\r\\n    \"delete_progress_title\" : {\\r\\n        \"message\" : \"Eliminación en progreso\"\\r\\n    },\\r\\n    \"delete_progress_message\" : {\\r\\n        \"message\" : \"Eliminando\"\\r\\n    },\\r\\n    \"migrate_dlg_title\" : {\\r\\n        \"message\" : \"Migrando libros\"\\r\\n    },\\r\\n    \"migrate_dlg_message\" : {\\r\\n        \"message\" : \"Cargando datos...\"\\r\\n    },\\r\\n    \"migrating\" : {\\r\\n        \"message\" : \"Migrando\"\\r\\n    },\\r\\n    \"replace_dlg_title\" : {\\r\\n        \"message\": \"Se ha detectado un conflicto\"\\r\\n    },\\r\\n    \"replace_dlg_message\": {\\r\\n        \"message\": \"Si decide continuar, el siguiente epub será reemplazado por el que está siendo importado\"\\r\\n    },\\r\\n    \"import_dlg_title\" : {\\r\\n        \"message\": \"Importando EPUB\"\\r\\n    },\\r\\n    \"import_dlg_message\" : {\\r\\n        \"message\": \"Examinando contenido del EPUB...\"\\r\\n    },\\r\\n    \"storing_file\" : {\\r\\n        \"message\": \"Guardando archivo\"\\r\\n    },\\r\\n    \"err_unknown\" : {\\r\\n        \"message\": \"Error desconocido. Chequear la consola para conocer más detalles.\"\\r\\n    },\\r\\n    \"err_storage\" : {\\r\\n        \"message\": \"No es posible acceder al dispositvo\"\\r\\n    },\\r\\n    \"err_epub_corrupt\" : {\\r\\n        \"message\": \"Paquete EPUB inválido o corrupto\"\\r\\n    },\\r\\n    \"err_dlg_title\" : {\\r\\n        \"message\": \"Error inesperado\"\\r\\n    },\\r\\n    \"replace\" : {\\r\\n        \"message\": \"Reemplazar\"\\r\\n    },\\r\\n    \"gethelp\" : {\\r\\n        \"message\" : \"Si encuentra algún problema, tiene preguntas, o le gustaría decir hola, visite <a href=\\\\\"http://idpf.org/forums/readium\\\\\">nuestro foro</a>\"\\r\\n    },\\r\\n    \"i18n_readium_library\" : {\\r\\n        \"message\" : \"Biblioteca Readium\"\\r\\n    },\\r\\n    \"i18n_loading\" : {\\r\\n        \"message\" : \"Cargando biblioteca\"\\r\\n    },\\r\\n    \"i18n_readium_options\" : {\\r\\n        \"message\" : \"Readium Opciones:\"\\r\\n    },\\r\\n    \"i18n_save_changes\" : {\\r\\n        \"message\" : \"Guardar cambios\"\\r\\n    },\\r\\n    \"i18n_close\" : {\\r\\n        \"message\" : \"Cerrar\"\\r\\n    },\\r\\n    \"i18n_keyboard_shortcuts\" : {\\r\\n        \"message\" : \"Teclas de acceso rápido\"\\r\\n    },\\r\\n    \"i18n_keyboard_reload\" : {\\r\\n        \"message\" : \"Por favor, actualiza la página para que las teclas de acceso rápido tengan efecto.\"\\r\\n    },\\r\\n    \"i18n_reset_key\" : {\\r\\n        \"message\" : \"Reestablecer tecla\"\\r\\n    },\\r\\n    \"i18n_reset_key_all\" : {\\r\\n        \"message\" : \"Reestablecer todos las teclas de acceso rápido\"\\r\\n    },\\r\\n    \"i18n_duplicate_keyboard_shortcut\" : {\\r\\n        \"message\" : \"DUPLICADO\"\\r\\n    },\\r\\n    \"i18n_invalid_keyboard_shortcut\" : {\\r\\n        \"message\" : \"INVALIDO\"\\r\\n    },\\r\\n    \"i18n_paginate_all\" : {\\r\\n        \"message\" : \"Paginar todo el contenido ePUB repaginable\"\\r\\n    },\\r\\n    \"i18n_automatically\" : {\\r\\n        \"message\" : \"Abrir automáticamente urls *.epub en readium\"\\r\\n    },\\r\\n    \"i18n_show_warning\" : {\\r\\n        \"message\" : \"Mostrar advertencias al desempaquetar archivos EPUB\"\\r\\n    },\\r\\n    \"i18n_details\" : {\\r\\n        \"message\" : \"Detalles\"\\r\\n    },\\r\\n    \"i18n_read\" : {\\r\\n        \"message\" : \"Leer\"\\r\\n    },\\r\\n    \"i18n_delete\" : {\\r\\n        \"message\" : \"Eliminar\"\\r\\n    },\\r\\n    \"i18n_author\" : {\\r\\n        \"message\" : \"Autor: \"\\r\\n    },\\r\\n    \"i18n_publisher\" : {\\r\\n        \"message\" : \"Editor: \"\\r\\n    },\\r\\n    \"i18n_source\" : {\\r\\n        \"message\" : \"Fuente: \"\\r\\n    },\\r\\n    \"i18n_pub_date\" : {\\r\\n        \"message\" : \"Fecha de publicación: \"\\r\\n    },\\r\\n    \"i18n_modified_date\" : {\\r\\n        \"message\" : \"Fecha de modificación: \"\\r\\n    },\\r\\n    \"i18n_id\" : {\\r\\n        \"message\" : \"ID: \"\\r\\n    },\\r\\n    \"i18n_epub_version\" : {\\r\\n        \"message\" : \"Versión EPUB: \"\\r\\n    },\\r\\n    \"i18n_created_at\" : {\\r\\n        \"message\" : \"Creado en: \"\\r\\n    },\\r\\n    \"i18n_format\" : {\\r\\n        \"message\" : \"Formato: \"\\r\\n    },\\r\\n    \"i18n_added\" : {\\r\\n        \"message\" : \"Añadido: \"\\r\\n    },\\r\\n    \"i18n_unknown\" : {\\r\\n        \"message\" : \"Desconocido\"\\r\\n    },\\r\\n    \"i18n_sorry\" : {\\r\\n        \"message\" : \"Disculpa, el EPUB actual no contiene superposición multimedia para este contenido\"\\r\\n    },\\r\\n    \"i18n_add_items\" : {\\r\\n        \"message\" : \"¡Añade aquí elementos a tu biblioteca!\"\\r\\n    },\\r\\n    \"i18n_extracting\" : {\\r\\n        \"message\" : \"extrayendo: \"\\r\\n    },\\r\\n    \"i18n_are_you_sure\" : {\\r\\n        \"message\" : \"¿Está seguro que desea eliminar de forma permanente\"\\r\\n    },\\r\\n    \"i18n_add_book_to_readium_library\" : {\\r\\n        \"message\" : \"Añadir libro a biblioteca Readium:\"\\r\\n    },\\r\\n    \"i18n_add_book\" : {\\r\\n        \"message\" : \"Añadir a la biblioteca\"\\r\\n    },\\r\\n    \"i18n_cancel\" : {\\r\\n        \"message\" : \"Cancelar\"\\r\\n    },\\r\\n    \"i18n_from_the_web\" : {\\r\\n        \"message\" : \"Desde la web:\"\\r\\n    },\\r\\n    \"i18n_from_local_file\" : {\\r\\n        \"message\" : \"Desde un archivo local:\"\\r\\n    },\\r\\n    \"i18n_enter_a_url\" : {\\r\\n        \"message\" : \"Ingresa una URL a un archivo .epub\"\\r\\n    },\\r\\n    \"i18n_unpacked_directory\" : {\\r\\n        \"message\" : \"Carpeta descomprimida:\"\\r\\n    },\\r\\n    \"i18n_validate\" : {\\r\\n        \"message\" : \"Validar:\"\\r\\n    },\\r\\n    \"i18n_confirm_that_this_book\" : {\\r\\n        \"message\" : \"Confirmar que este libro cumple con los estándares ePUB\"\\r\\n    },\\r\\n    \"i18n_single_pages\" : {\\r\\n        \"message\" : \"Páginas simple\"\\r\\n    },\\r\\n    \"i18n_double_pages\" : {\\r\\n        \"message\" : \"Páginas doble\"\\r\\n    },\\r\\n    \"i18n_save_settings\" : {\\r\\n        \"message\" : \"Guardar preferencias\"\\r\\n    },\\r\\n    \"i18n_font_size\" : {\\r\\n        \"message\" : \"TAMAÑO DE FUENTE\"\\r\\n    },\\r\\n    \"i18n_margins\" : {\\r\\n        \"message\" : \"MARGENES\"\\r\\n    },\\r\\n    \"i18n_text_and_background_color\" : {\\r\\n        \"message\" : \"COLOR DE FUENTE Y FONDO\"\\r\\n    },\\r\\n    \"i18n_black_and_white\" : {\\r\\n        \"message\" : \"Blanco y negro\"\\r\\n    },\\r\\n    \"i18n_arabian_nights\" : {\\r\\n        \"message\" : \"Las mil y una noches\"\\r\\n    },\\r\\n    \"i18n_sands_of_dune\" : {\\r\\n        \"message\" : \"Arenas de duna\"\\r\\n    },\\r\\n    \"i18n_ballard_blues\" : {\\r\\n        \"message\" : \"Ballard Blues\"\\r\\n    },\\r\\n    \"i18n_vancouver_mist\" : {\\r\\n        \"message\" : \"Bruma de Vancouver\"\\r\\n    },\\r\\n    \"i18n_display_format\" : {\\r\\n        \"message\" : \"MOSTRAR FORMATO\"\\r\\n    },\\r\\n    \"i18n_scroll_mode\" : {\\r\\n        \"message\" : \"MODO DE DESPLAZAMIENTO\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_default\" : {\\r\\n        \"message\" : \"Por defecto\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_doc\" : {\\r\\n        \"message\" : \"Documento\"\\r\\n    },\\r\\n    \"i18n_scroll_mode_continuous\" : {\\r\\n        \"message\" : \"Continuo\"\\r\\n    },\\r\\n    \"i18n_html_readium_tm_a_project\" : {\\r\\n        \"message\" : \"Readium para Chrome es la extensión para Chrome de ReadiumJS, un sistema de lectura de código abierto y librería JavaScript para renderizar publicaciones EPUB® en navegadores web. ReadiumJS es un proyecto de Readium Foundation (Readium.org). Para saber más o contribuir, visita el <a href=\\\\\"http://readium.org/projects/readiumjs\\\\\">sitio del proyecto</a>\"\\r\\n    },\\r\\n    \"i18n_toolbar_show\" : {\\r\\n        \"message\" : \"Mostrar barra de herramientas\"\\r\\n    },\\r\\n    \"i18n_toolbar_hide\" : {\\r\\n        \"message\" : \"Ocultar barra de herramientas\"\\r\\n    },\\r\\n    \"i18n_audio_play\" : {\\r\\n        \"message\" : \"Reproducir\"\\r\\n    },\\r\\n    \"i18n_audio_pause\" : {\\r\\n        \"message\" : \"Pausa\"\\r\\n    },\\r\\n    \"i18n_audio_previous\" : {\\r\\n        \"message\" : \"Frase de audio anterior\"\\r\\n    },\\r\\n    \"i18n_audio_next\" : {\\r\\n        \"message\" : \"Frase de audio siguiente\"\\r\\n    },\\r\\n    \"i18n_audio_volume\" : {\\r\\n        \"message\" : \"Volumen de audio\"\\r\\n    },\\r\\n    \"i18n_audio_volume_increase\" : {\\r\\n        \"message\" : \"Incrementar volumen de audio\"\\r\\n    },\\r\\n    \"i18n_audio_volume_decrease\" : {\\r\\n        \"message\" : \"Reducir volumen de audio\"\\r\\n    },\\r\\n    \"i18n_audio_time\" : {\\r\\n        \"message\" : \"Cursor de tiempo de audio\"\\r\\n    },\\r\\n    \"i18n_audio_mute\" : {\\r\\n        \"message\" : \"Desactivar audio\"\\r\\n    },\\r\\n    \"i18n_audio_unmute\" : {\\r\\n        \"message\" : \"Activar audio\"\\r\\n    },\\r\\n    \"i18n_audio_expand\" : {\\r\\n        \"message\" : \"Mostrar controles avanzados de audio\"\\r\\n    },\\r\\n    \"i18n_audio_collapse\" : {\\r\\n        \"message\" : \"Cerrar controles avanzados de audio\"\\r\\n    },\\r\\n    \"i18n_audio_esc\" : {\\r\\n        \"message\" : \"Salir de contexto actual de audio\"\\r\\n    },\\r\\n    \"i18n_audio_rate\" : {\\r\\n        \"message\" : \"Velocidad de reproducción de audio\"\\r\\n    },\\r\\n    \"i18n_audio_rate_increase\" : {\\r\\n        \"message\" : \"Incrementar velocidad de reproducción de audio\"\\r\\n    },\\r\\n    \"i18n_audio_rate_decrease\" : {\\r\\n        \"message\" : \"Reducir velocidad de reproducción de audio\"\\r\\n    },\\r\\n    \"i18n_audio_rate_reset\" : {\\r\\n        \"message\" : \"Reestablecer reproducción de audio a velocidad normal\"\\r\\n    },\\r\\n    \"i18n_audio_skip_disable\" : {\\r\\n        \"message\" : \"Desactivar capacidad de omisión\"\\r\\n    },\\r\\n    \"i18n_audio_skip_enable\" : {\\r\\n        \"message\" : \"Activar capacidad de omisión\"\\r\\n    },\\r\\n    \"i18n_audio_touch_enable\" : {\\r\\n        \"message\" : \"Activar touch-to-play\"\\r\\n    },\\r\\n    \"i18n_audio_touch_disable\" : {\\r\\n        \"message\" : \"Desactivar touch-to-play\"\\r\\n    },\\r\\n    \"i18n_audio_highlight_default\" : {\\r\\n        \"message\" : \"por defecto\"\\r\\n    },\\r\\n    \"i18n_audio_highlight\" : {\\r\\n        \"message\" : \"Color de audio\"\\r\\n    },\\r\\n    \"i18n_audio_sync\" : {\\r\\n        \"message\" : \"Granularidad de sincronización texto/audio\"\\r\\n    },\\r\\n    \"i18n_audio_sync_default\" : {\\r\\n        \"message\" : \"Por defecto\"\\r\\n    },\\r\\n    \"i18n_audio_sync_word\" : {\\r\\n        \"message\" : \"Palabra\"\\r\\n    },\\r\\n    \"i18n_audio_sync_sentence\" : {\\r\\n        \"message\" : \"Oración\"\\r\\n    },\\r\\n    \"i18n_audio_sync_paragraph\" : {\\r\\n        \"message\" : \"Párrafo\"\\r\\n    },\\r\\n    \"i18n_page_previous\" : {\\r\\n        \"message\" : \"Página previa\"\\r\\n    },\\r\\n    \"i18n_page_next\" : {\\r\\n        \"message\" : \"Página siguiente\"\\r\\n    },\\r\\n    \"i18n_author_theme\" : {\\r\\n      \"message\" : \"Por defecto (estilos de autor)\"\\r\\n    },\\r\\n\\r\\n  \"i18n_spread_auto\" : {\\r\\n       \"message\" : \"Automático\"\\r\\n    },\\r\\n\\r\\n  \"i18n_scroll_mode_auto\" : {\\r\\n      \"message\" : \"Automático\"\\r\\n    },\\r\\n\\r\\n   \"i18n_page_transition\" : {\\r\\n      \"message\" : \"EFECTOS DE PÁGINA\"\\r\\n    },\\r\\n    \"i18n_page_transition_none\" : {\\r\\n      \"message\" : \"Desactivado\"\\r\\n    },\\r\\n    \"i18n_page_transition_fade\" : {\\r\\n      \"message\" : \"Apagarse\"\\r\\n    },\\r\\n    \"i18n_page_transition_slide\" : {\\r\\n      \"message\" : \"Deslizar\"\\r\\n    },\\r\\n    \"i18n_page_transition_swoosh\" : {\\r\\n      \"message\" : \"Swoosh\"\\r\\n    },\\r\\n    \"i18n_page_transition_butterfly\" : {\\r\\n      \"message\" : \"Mariposa\"\\r\\n    },\\r\\n\\r\\n  \"i18n_toolbar\" : {\\r\\n      \"message\" : \"Barra de herramientas\"\\r\\n    },\\r\\n\\r\\n   \"i18n_audio_play_background\" : {\\r\\n      \"message\" : \"Reproducir pista en segundo plano\"\\r\\n    },\\r\\n    \"i18n_audio_pause_background\" : {\\r\\n      \"message\" : \"Pausar pista en segundo plano\"\\r\\n},\\r\\n\\r\\n   \"i18n_auto_page_turn_enable\" : {\\r\\n      \"message\" : \"Activar vuelta de página automática\"\\r\\n    },\\r\\n    \"i18n_auto_page_turn_disable\" : {\\r\\n      \"message\" : \"Desactivar vuelta de página automática\"\\r\\n    },\\r\\n\\r\\n   \"i18n_playback_scroll_enable\" : {\\r\\n      \"message\" : \"Activar desplazamiento durante la reproducción\"\\r\\n    },\\r\\n\\r\\n    \"i18n_playback_scroll_disable\" : {\\r\\n      \"message\" : \"Desactivar desplazamiento durante la reproducción\"\\r\\n    },\\r\\n\\r\\n    \"chrome_accept_languages\": {\\r\\n        \"message\": \"$CHROME$ acepta idiomas $languages$\",\\r\\n        \"placeholders\": {\\r\\n            \"chrome\": {\\r\\n                \"content\": \"Chrome\",\\r\\n                \"example\": \"Chrome\"\\r\\n            },\\r\\n            \"languages\": {\\r\\n                \"content\": \"$1\",\\r\\n                \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/en_US/messages.json',[],function () { return '{\\r\\n\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"about\" : {\\r\\n    \"message\" : \"About\"\\r\\n  },\\r\\n  \"preview\" : {\\r\\n    \"message\" : \"PREVIEW\"\\r\\n  },\\r\\n  \"list_view\" : {\\r\\n    \"message\" : \"List View\"\\r\\n  },\\r\\n  \"thumbnail_view\" : {\\r\\n    \"message\" : \"Thumbnail View\"\\r\\n  },\\r\\n  \"view_library\": {\\r\\n    \"message\" : \"Library\"\\r\\n  },\\r\\n  \"highlight_selection\" : {\\r\\n    \"message\" : \"Highlight Selected Text\"\\r\\n  },\\r\\n  \"toc\" : {\\r\\n    \"message\" : \"Table of Contents\"\\r\\n  },\\r\\n  \"settings\" : {\\r\\n    \"message\" : \"Settings\"\\r\\n  },\\r\\n  \"layout\" : {\\r\\n    \"message\" : \"Layout\"\\r\\n  },\\r\\n  \"style\" : {\\r\\n    \"message\" : \"Style\"\\r\\n  },\\r\\n  \"enter_fullscreen\" : {\\r\\n    \"message\" : \"Enter Fullscreen\"\\r\\n  },\\r\\n  \"exit_fullscreen\" : {\\r\\n    \"message\" : \"Exit Fullscreen\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"A reader for EPUB3 books.\"\\r\\n  },\\r\\n  \"ok\" : {\\r\\n    \"message\" : \"Ok\"\\r\\n  },\\r\\n  \"delete_dlg_title\" : {\\r\\n    \"message\" : \"Confirm Delete\"\\r\\n  },\\r\\n  \"delete_progress_title\" : {\\r\\n    \"message\" : \"Delete in Progress\"\\r\\n  },\\r\\n  \"delete_progress_message\" : {\\r\\n    \"message\" : \"Deleting\"\\r\\n  },\\r\\n  \"migrate_dlg_title\" : {\\r\\n    \"message\" : \"Migrating Books\"\\r\\n  },\\r\\n  \"migrate_dlg_message\" : {\\r\\n    \"message\" : \"Loading data...\"\\r\\n  },\\r\\n  \"migrating\" : {\\r\\n    \"message\" : \"Migrating\"\\r\\n  },\\r\\n  \"replace_dlg_title\" : {\\r\\n    \"message\": \"Conflict Detected\"\\r\\n  },\\r\\n  \"replace_dlg_message\": {\\r\\n    \"message\": \"If you continue, the following epub will be replaced with the one you are importing\"\\r\\n  },\\r\\n  \"import_dlg_title\" : {\\r\\n    \"message\": \"Importing EPUB\"\\r\\n  },\\r\\n  \"import_dlg_message\" : {\\r\\n    \"message\": \"Examining EPUB content...\"\\r\\n  },\\r\\n  \"storing_file\" : {\\r\\n    \"message\": \"Storing file\"\\r\\n  },\\r\\n  \"err_unknown\" : {\\r\\n    \"message\": \"Unknown error. Check console for more details.\"\\r\\n  },\\r\\n  \"err_storage\" : {\\r\\n    \"message\": \"Unable to access storage\"\\r\\n  },\\r\\n  \"err_epub_corrupt\" : {\\r\\n    \"message\": \"Invalid or corrupted EPUB package\"\\r\\n  },\\r\\n  \"err_ajax\": {\\r\\n    \"message\": \"Error in ajax request\"\\r\\n  },\\r\\n  \"err_dlg_title\" : {\\r\\n    \"message\": \"Unexpected Error\"\\r\\n  },\\r\\n  \"replace\" : {\\r\\n    \"message\": \"Replace\"\\r\\n  },\\r\\n  \"gethelp\" : {\\r\\n    \"message\" : \"If you encounter any problems, have questions, or would like to say hello, visit <a href=\\\\\"http://idpf.org/forums/readium\\\\\">our forum</a>\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Readium Library\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Readium Options:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"Save changes\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"Close\"\\r\\n  },\\r\\n  \"i18n_keyboard_shortcuts\" : {\\r\\n    \"message\" : \"Keyboard shortcuts\"\\r\\n  },\\r\\n  \"i18n_keyboard_reload\" : {\\r\\n    \"message\" : \"Please reload the page for keyboard shortcuts to take effect.\"\\r\\n  },\\r\\n  \"i18n_reset_key\" : {\\r\\n    \"message\" : \"Reset key\"\\r\\n  },\\r\\n  \"i18n_reset_key_all\" : {\\r\\n    \"message\" : \"Reset all keyboard shortcuts\"\\r\\n  },\\r\\n  \"i18n_duplicate_keyboard_shortcut\" : {\\r\\n    \"message\" : \"DUPLICATE\"\\r\\n  },\\r\\n  \"i18n_invalid_keyboard_shortcut\" : {\\r\\n    \"message\" : \"INVALID\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"Paginate all reflowable ePUB content\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"Automatically open *.epub urls in readium\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"Show warning messages when unpacking EPUB files\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"Details\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"Read\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"Delete\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"Author: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"Publisher: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"Source: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"Pub Date: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"Modified Date: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"EPUB version: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"Created at: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"Format: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"Added: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"Unknown\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"Sorry, the current EPUB does not contain a media overlay for this content\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"Add items to your library here!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"extracting: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"Are you sure you want to permanently delete \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Add Book To Readium Library:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"Add to Library\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"Cancel\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"From the web:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"From Local File:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"Enter a URL to a .epub file\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"Unpacked Directory:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"Validate:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"Confirm that this book complies with ePUB standards\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"Single Pages\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"Double Pages\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"Save Settings\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"FONT SIZE\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"MARGINS\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"TEXT AND BACKGROUND COLOR\"\\r\\n  },\\r\\n  \"i18n_author_theme\" : {\\r\\n    \"message\" : \"Default (author styles)\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Black and White\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Arabian Nights\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Sands of Dune\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Ballard Blues\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Vancouver Mist\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"DISPLAY FORMAT\"\\r\\n  },\\r\\n  \"i18n_spread_auto\" : {\\r\\n     \"message\" : \"Auto\"\\r\\n  },\\r\\n  \"i18n_scroll_mode\" : {\\r\\n    \"message\" : \"SCROLL MODE\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_auto\" : {\\r\\n    \"message\" : \"Auto\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_doc\" : {\\r\\n    \"message\" : \"Document\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_continuous\" : {\\r\\n    \"message\" : \"Continuous\"\\r\\n  },\\r\\n  \\r\\n  \"i18n_page_transition\" : {\\r\\n    \"message\" : \"PAGE EFFECTS\"\\r\\n  },\\r\\n  \"i18n_page_transition_none\" : {\\r\\n    \"message\" : \"Disabled\"\\r\\n  },\\r\\n  \"i18n_page_transition_fade\" : {\\r\\n    \"message\" : \"Fade\"\\r\\n  },\\r\\n  \"i18n_page_transition_slide\" : {\\r\\n    \"message\" : \"Slide\"\\r\\n  },\\r\\n  \"i18n_page_transition_swoosh\" : {\\r\\n    \"message\" : \"Swoosh\"\\r\\n  },\\r\\n  \"i18n_page_transition_butterfly\" : {\\r\\n    \"message\" : \"Butterfly\"\\r\\n  },\\r\\n  \\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium for Chrome is the Chrome browser extension configuration of ReadiumJS, an open source reading system and JavaScript library for displaying EPUB® publications in web browsers. ReadiumJS is a project of the Readium Foundation (Readium.org). To learn more or to contribute, visit the <a href=\\\\\"http://readium.org/projects/readiumjs\\\\\">project homepage</a>\"\\r\\n  },\\r\\n  \"i18n_toolbar\" : {\\r\\n    \"message\" : \"Toolbar\"\\r\\n  },\\r\\n  \"i18n_toolbar_show\" : {\\r\\n    \"message\" : \"Show toolbar\"\\r\\n  },\\r\\n  \"i18n_toolbar_hide\" : {\\r\\n    \"message\" : \"Hide toolbar\"\\r\\n  },\\r\\n  \"i18n_audio_play\" : {\\r\\n    \"message\" : \"Play\"\\r\\n  },\\r\\n  \"i18n_audio_pause\" : {\\r\\n    \"message\" : \"Pause\"\\r\\n  },\\r\\n  \"i18n_audio_play_background\" : {\\r\\n    \"message\" : \"Play background track\"\\r\\n  },\\r\\n  \"i18n_audio_pause_background\" : {\\r\\n    \"message\" : \"Pause background track\"\\r\\n  },\\r\\n  \"i18n_audio_previous\" : {\\r\\n    \"message\" : \"Previous audio phrase\"\\r\\n  },\\r\\n  \"i18n_audio_next\" : {\\r\\n    \"message\" : \"Next audio phrase\"\\r\\n  },\\r\\n  \"i18n_audio_volume\" : {\\r\\n    \"message\" : \"Audio volume\"\\r\\n  },\\r\\n  \"i18n_audio_volume_increase\" : {\\r\\n    \"message\" : \"Increase audio volume\"\\r\\n  },\\r\\n  \"i18n_audio_volume_decrease\" : {\\r\\n    \"message\" : \"Decrease audio volume\"\\r\\n  },\\r\\n  \"i18n_audio_time\" : {\\r\\n    \"message\" : \"Audio time cursor\"\\r\\n  },\\r\\n  \"i18n_audio_mute\" : {\\r\\n    \"message\" : \"Mute audio\"\\r\\n  },\\r\\n  \"i18n_audio_unmute\" : {\\r\\n    \"message\" : \"Unmute audio\"\\r\\n  },\\r\\n  \"i18n_audio_expand\" : {\\r\\n    \"message\" : \"Show advanced audio controls\"\\r\\n  },\\r\\n  \"i18n_audio_collapse\" : {\\r\\n    \"message\" : \"Close advanced audio controls\"\\r\\n  },\\r\\n  \"i18n_audio_esc\" : {\\r\\n    \"message\" : \"Escape current audio context\"\\r\\n  },\\r\\n  \"i18n_audio_rate\" : {\\r\\n    \"message\" : \"Audio playback rate\"\\r\\n  },\\r\\n  \"i18n_audio_rate_increase\" : {\\r\\n    \"message\" : \"Increase audio playback rate\"\\r\\n  },\\r\\n  \"i18n_audio_rate_decrease\" : {\\r\\n    \"message\" : \"Decrease audio playback rate\"\\r\\n  },\\r\\n  \"i18n_audio_rate_reset\" : {\\r\\n    \"message\" : \"Reset audio playback to normal speed\"\\r\\n  },\\r\\n  \"i18n_audio_skip_disable\" : {\\r\\n    \"message\" : \"Disable skippability\"\\r\\n  },\\r\\n  \"i18n_audio_skip_enable\" : {\\r\\n    \"message\" : \"Enable skippability\"\\r\\n  },\\r\\n\\r\\n  \"i18n_auto_page_turn_enable\" : {\\r\\n    \"message\" : \"Enable automatic page turn\"\\r\\n  },\\r\\n  \"i18n_auto_page_turn_disable\" : {\\r\\n    \"message\" : \"Disable automatic page turn\"\\r\\n  },\\r\\n\\r\\n  \"i18n_playback_scroll_enable\" : {\\r\\n    \"message\" : \"Enable scroll during playback\"\\r\\n  },\\r\\n  \"i18n_playback_scroll_disable\" : {\\r\\n    \"message\" : \"Disable scroll during playback\"\\r\\n  },\\r\\n  \\r\\n  \"i18n_audio_touch_enable\" : {\\r\\n    \"message\" : \"Enable touch-to-play\"\\r\\n  },\\r\\n  \"i18n_audio_touch_disable\" : {\\r\\n    \"message\" : \"Disable touch-to-play\"\\r\\n  },\\r\\n  \"i18n_audio_highlight_default\" : {\\r\\n    \"message\" : \"default\"\\r\\n  },\\r\\n  \"i18n_audio_highlight\" : {\\r\\n    \"message\" : \"Audio color\"\\r\\n  },\\r\\n  \"i18n_audio_sync\" : {\\r\\n    \"message\" : \"Text/audio synchronization granularity\"\\r\\n  },\\r\\n  \"i18n_audio_sync_default\" : {\\r\\n    \"message\" : \"Default\"\\r\\n  },\\r\\n  \"i18n_audio_sync_word\" : {\\r\\n    \"message\" : \"Word\"\\r\\n  },\\r\\n  \"i18n_audio_sync_sentence\" : {\\r\\n    \"message\" : \"Sentence\"\\r\\n  },\\r\\n  \"i18n_audio_sync_paragraph\" : {\\r\\n    \"message\" : \"Paragraph\"\\r\\n  },\\r\\n  \"i18n_page_previous\" : {\\r\\n    \"message\" : \"Previous Page\"\\r\\n  },\\r\\n  \"i18n_page_next\" : {\\r\\n    \"message\" : \"Next Page\"\\r\\n  },\\r\\n  \"i18n_page_navigation\" : {\\r\\n    \"message\" : \"Page Navigation\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/fr/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"Un lecteur de livres numériques EPUB3.\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Bibliothèque Readium\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Chargement de la bibliothèque\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Options de Readium :\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"Enregistrer les changements\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"Fermer\"\\r\\n  },\\r\\n  \"i18n_keyboard_shortcuts\" : {\\r\\n    \"message\" : \"Raccourcis clavier\"\\r\\n  },\\r\\n  \"i18n_keyboard_reload\" : {\\r\\n    \"message\" : \"Veuillez recharger la page pour que les raccourcis clavier prennent effet.\"\\r\\n  },\\r\\n  \"i18n_reset_key\" : {\\r\\n    \"message\" : \"Réinitialiser le raccourci clavier par défaut\"\\r\\n  },\\r\\n  \"i18n_reset_key_all\" : {\\r\\n    \"message\" : \"Réinitialiser tous les raccourcis clavier par défaut\"\\r\\n  },\\r\\n  \"i18n_duplicate_keyboard_shortcut\" : {\\r\\n    \"message\" : \"DUPLIQUE\"\\r\\n  },\\r\\n  \"i18n_invalid_keyboard_shortcut\" : {\\r\\n    \"message\" : \"INVALIDE\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"Paginer tout le contenu des EPUB recomposables\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"Ouvrir automatiquement les urls *.epub dans Readium\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"Montrer les messages d\\'avertissement pendant la décompression des fichiers EPUB\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"Détails\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"Lire\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"Supprimer\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"Auteur : \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"Éditeur : \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"Source : \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"Date de publication :  \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"Date de modification : \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"version de l\\'EPUB : \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"Ajouté le : \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"Format : \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"Ajouté le : \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"Inconnu\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"Désolé, l\\'EPUB actuel ne contient pas de média associé (media overlay) pour ce contenu\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"Ajoutez des articles à votre bibliothèque ici !\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"extraction : \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"Voulez-vous vraiment supprimer \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Ajoutez un livre à la bibliothèque de Readium :\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"Ajouter un livre\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"Annuler\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"À partir du Web :\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"À partir d\\'un fichier local :\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"Entrez l\\'URL d\\'un fichier .epub\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"Répertoire non-compressé :\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"Valider :\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"Confirmer que ce livre est conforme aux standards EPUB\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"Pages simples\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"Doubles-pages\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"Enregistrer\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"TAILLE DE LA POLICE\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"MARGES\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"COULEUR DU TEXTE ET DU FOND\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Noir et Blanc\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Mille et une Nuits\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Sables de Dune\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Le Blues de Ballard\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Le Brouillard de Vancouver\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"FORMAT D\\'AFFICHAGE\"\\r\\n  },\\r\\n  \"i18n_scroll_mode\" : {\\r\\n    \"message\" : \"MODE DE DÉFILEMENT\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_auto\" : {\\r\\n    \"message\" : \"Auto\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_doc\" : {\\r\\n    \"message\" : \"Document\"\\r\\n  },\\r\\n  \"i18n_scroll_mode_continuous\" : {\\r\\n    \"message\" : \"Continu\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium pour Chrome est l\\'extension du navigateur Chrome de ReadiumJS, un système de lecture open-source et une librairie JavaScript pour afficher des documents EPUB® dans les navigateurs web. ReadiumJS est un projet de la fondation Readium (Readium.org). Pour en savoir plus ou pour contribuer, visiter la <a href=\\\\\"http://readium.org/projects/readiumjs\\\\\">page d\\'accueil du projet</a>.\"\\r\\n  },\\r\\n  \"i18n_audio_play\" : {\\r\\n    \"message\" : \"Jouer\"\\r\\n  },\\r\\n  \"i18n_audio_pause\" : {\\r\\n    \"message\" : \"Pauser\"\\r\\n  },\\r\\n  \"i18n_audio_previous\" : {\\r\\n    \"message\" : \"Phrase audio précédente\"\\r\\n  },\\r\\n  \"i18n_audio_next\" : {\\r\\n    \"message\" : \"Phrase audio suivante\"\\r\\n  },\\r\\n  \"i18n_audio_volume\" : {\\r\\n    \"message\" : \"Ajustement du volume audio\"\\r\\n  },\\r\\n  \"i18n_audio_time\" : {\\r\\n    \"message\" : \"Contrôle du curseur temporel audio\"\\r\\n  },\\r\\n  \"i18n_audio_mute\" : {\\r\\n    \"message\" : \"Silence audio\"\\r\\n  },\\r\\n  \"i18n_audio_unmute\" : {\\r\\n    \"message\" : \"Restaurer le volume audio\"\\r\\n  },\\r\\n  \"i18n_audio_expand\" : {\\r\\n    \"message\" : \"Afficher les contrôles audio avancés\"\\r\\n  },\\r\\n  \"i18n_audio_collapse\" : {\\r\\n    \"message\" : \"Fermer les contrôles audio avancés\"\\r\\n  },\\r\\n  \"i18n_audio_esc\" : {\\r\\n    \"message\" : \"Échapper le contexte audio actuel\"\\r\\n  },\\r\\n  \"i18n_audio_rate\" : {\\r\\n    \"message\" : \"Vitesse de lecture audio\"\\r\\n  },\\r\\n  \"i18n_audio_rate_reset\" : {\\r\\n    \"message\" : \"Retour à la vitesse normale de lecture audio\"\\r\\n  },\\r\\n  \"i18n_audio_skip_disable\" : {\\r\\n    \"message\" : \"Désactiver la \\'skippabilité\\'\"\\r\\n  },\\r\\n  \"i18n_audio_skip_enable\" : {\\r\\n    \"message\" : \"Activer la \\'skippabilité\\'\"\\r\\n  },\\r\\n  \"i18n_audio_touch_enable\" : {\\r\\n    \"message\" : \"Activer la fonction \\'toucher pour jouer\\'\"\\r\\n  },\\r\\n  \"i18n_audio_touch_disable\" : {\\r\\n    \"message\" : \"Désactiver la fonction \\'toucher pour jouer\\'\"\\r\\n  },\\r\\n  \"i18n_audio_highlight_default\" : {\\r\\n    \"message\" : \"défaut\"\\r\\n  },\\r\\n  \"i18n_audio_highlight\" : {\\r\\n    \"message\" : \"Couleur audio\"\\r\\n  },\\r\\n  \"i18n_audio_sync\" : {\\r\\n    \"message\" : \"Granularité de synchronisation texte / audio\"\\r\\n  },\\r\\n  \"i18n_audio_sync_default\" : {\\r\\n    \"message\" : \"Défaut\"\\r\\n  },\\r\\n  \"i18n_audio_sync_word\" : {\\r\\n    \"message\" : \"Mot\"\\r\\n  },\\r\\n  \"i18n_audio_sync_sentence\" : {\\r\\n    \"message\" : \"Phrase\"\\r\\n  },\\r\\n  \"i18n_audio_sync_paragraph\" : {\\r\\n    \"message\" : \"Paragraphe\"\\r\\n  },\\r\\n  \"i18n_page_previous\" : {\\r\\n    \"message\" : \"Page précédente\"\\r\\n  },\\r\\n  \"i18n_page_next\" : {\\r\\n    \"message\" : \"Page suivante\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,fr,ja,de\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/it/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"Un visualizzatore di documenti EPUB3\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Biblioteca di Readium\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Caricamento biblioteca\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Opzioni di Readium\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"Applica\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"Chiudi\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"Impagina anche i file EPUB reflowable\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"Apri in Readium gli URL che terminano in .epub\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"Mostra errori e avvisi relativi ai file EPUB\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"Dettagli\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"Leggi\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"Elimina\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"Autore: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"Editore: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"Origine: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"Data pubblicazione: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"Data ultima modifica: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"Versione EPUB: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"Data importazione: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"Formato: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"Aggiunto: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"Sconosciuto\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"Spiacente, non ci sono risorse Media Overlays associate a questo elemento.\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"Aggiungi libri alla tua biblioteca!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"Decomprimendo: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"Sei sicuro di voler cancellare definitivamente \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Aggiungi libro alla Biblioteca di Readium\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"Aggiungi libro\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"Annulla\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"Scarica dal Web:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"Importa file EPUB dal tuo computer:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"Indirizzo Web del file EPUB che vuoi aggiungere:\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"Importa directory decompressa:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"Convalida:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"Controlla che i file siano conformi allo standard EPUB prima di aprirli\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"Singole\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"Affiancate\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"Applica\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"DIMENSIONE CARATTERE\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"MARGINI\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"COMBINAZIONE COLORE TESTO/SFONDO\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Bianco su nero\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Notturno\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Deserto\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Mediterraneo\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Nebbia\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"VISUALIZZAZIONE PAGINE\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>, progetto dell\\'International Digital Publishing Forum (IDPF) e dei suoi sostenitori, è una piattaforma open source di lettura e un motore di rendering per documenti in formato EPUB&reg;. Per saperne di più, visita la <a href=\\\\\"http://readium.org/\\\\\">pagina principale del progetto</a>. Lo sviluppo del progetto è stato guidato da <a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a> e <a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>. Per contribuire, visita il <a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">repository github</a>.\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accetta le seguenti lingue: $languages$\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,it,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/id/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"reader untuk buku-buku EPUB3 .\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Perpustakaan Readium\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Pilihan Readium :\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"Simpan perubahan\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"Tutup\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"Paginate all reflowable ePUB content\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"Secara otomatis buka *.epub urls di readium\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"Tampilkan pesan peringatan ketika unpacking file EPUB\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"Detail\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"Baca\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"Hapus\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"Penulis: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"Penerbit: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"Sumber: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"Tgl Terbit: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"Tgl Modifikasi: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"Versi EPUB: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"Dibuat di: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"Format: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"Menambahkan: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"Tidak dikenal\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"Maaf, EPUB saat ini tidak berisi overlay media untuk konten ini \"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"Masukkan item r Library disini!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"extracting: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"Apakah and yakin ingin menghapus secara permanen \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Masukkan Buku ke Readium Library:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"Add Book\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"Batal\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"Dari Web:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"Dari File local:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"Masukkan  URL ke file .epub \"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"Unpacked Directory:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"Validasi:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"Konfirmasikan bahwa buku ini sesuai dengan standar EPUB\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"Single Pages\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"Double Pages\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"Save Settings\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"FONT SIZE\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"MARGINS\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"TEKS DAN WARNA LATAR\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Black and White\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Arabian Nights\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Sands of Dune\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Ballard Blues\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Vancouver Mist\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"DISPLAY FORMAT\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>, a project of the International Digital Publishing Forum (IDPF) and supporters, adalah sistem referensi open source DAN rendering engine untuk EPUB&reg; publikasi.  Untuk mengetahui lebih lanjut, kunjungi <a href=\\\\\"http://readium.org/\\\\\">project homepage</a>. Sampai saat ini, pengembangan project telah dipimpin oleh  <a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a> and <a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>. Untuk kontribusi, kunjungi <a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">github repository</a>\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/ja/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"EPUB3ブックリーダ\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Readiumライブラリ\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Readiumオプション:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"変更を保存\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"閉じる\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"リフロー可能なEPUBコンテンツをすべてページネートする\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"URLが*.epubなら自動でReadiumで開く\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"EPUBファイルを展開する際には警告メッセージを表示する\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"詳細\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"読む\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"削除\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"著者: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"出版社: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"ソース: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"出版日時: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"更新日時: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"EPUBバージョン: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"追加日時: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"フォーマット: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"追加日時: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"不明\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"現在のEPUBにはこのコンテンツのメディアオーバーレイが含まれていません\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"ここをクリックして本を登録します!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"展開しています: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"本を削除します: \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Readiumライブラリに本を追加します:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"本の追加\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"キャンセル\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"Webから:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"ローカルファイルから:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \".epubファイルのURLを入力してください\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"パッケージ化されていないフォルダ:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"検証（バリデート）:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"この本がEPUB仕様に準拠していることを確認する\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"単ページ\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"ダブル\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"設定を保存する\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"文字サイズ\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"マージン\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"文字色と背景色\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"白背景に黒文字\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"アラビアンナイト\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"砂丘の砂\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"バラード ブルース\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"バンクーバーの霧\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"表示形式\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>とは, International Digital Publishing Forum (IDPF) と支援企業によるプロジェクトで, EPUB&reg; 出版のためのシステムとレンダリングエンジンのオープンソースリファレンスです。詳しくは、<a href=\\\\\"http://readium.org/\\\\\">プロジェクトホームページ</a>をご覧ください。これまでは<a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a>と<a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>がプロジェクト開発をリードしてきました。 コントリビュートするには<a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">githubレポジトリ</a>をご覧ください。\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,ja,sr,de\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/ko/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"EPUB3책 리더.\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Readium 라이브러리\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Readium 옵션:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"변경사항 저장\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"닫기\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"모든 리플로우 컨텐츠의 페이지네이션\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"*.epub url들을 radium에서 자동으로 열기\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"EPUB파일들을 열 때 경고메시지 표시\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"세부항목\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"읽기\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"삭제\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"저자: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"출판사: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"소스: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"출판일: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"개정일: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"EPUB 버전: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"생성: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"포맷: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"추가일시: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"미상\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"현재 EPUB은 이 컨텐츠를 위한 미디어 오버레이가 포함되어 있지 않습니다.\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"책을 등록하기 위하여 여기를 클릭하세요!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"정보 추출 중: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"영구히 삭제하시길 원하십니까? \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Readium 라이브러리에 책 추가:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"책 추가\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"취소\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"웹에서:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"로컬 파일에서:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \".epub 파일의 URL을 입력하세요\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"추출된 디렉토리:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"승인:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"이 책이 ePUB표준을 따르는지 확인\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"단일 페이지\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"더블 페이지\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"설정 저장\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"폰트 크기\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"여백\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"글자와 배경 색\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"흑백\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"아라비안 나이트\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"샌즈 오브 듄\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"발라드 블루스\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"밴쿠버 안개\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"디스플레이 포맷\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>는 EPUB&reg;컨텐츠의 출판을 위한 국제디지털출판포럼(IDPF, International Digital Publishing Forum)과 지원 기업들의 오픈소스 시스템 및 렌더링 엔진 프로젝트입니다. 자세한 내용은 <a href=\\\\\"http://readium.org/\\\\\">프로젝트 홈페이지</a>를 참조하세요. 지금까지, 프로젝트 개발은 <a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a>와 <a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>에 의해서 주도 되었습니다. 프로젝트에 기여하시기 위해서는 <a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">github 저장소</a>를 확인하시기 바랍니다.\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/pt_BR/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\" : {\\r\\n    \"message\": \"Um leitor para livros para EPUB3.\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Biblioteca Readium\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n   \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Opções do Readium:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"Salvar mudanças\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"Fechar\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"Paginar todo o conteúdo ePUB fluído\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"Abrir automaticamente urls *.epub no readium\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"Exibir mensagem de alerta quando extraindo arquivos EPUB\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"Detalhes\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"Ler\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"Excluir\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"Autor: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"Editora: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"Origem: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"Publicação: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"Data de Modificação: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"Versão do EPUB: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"Criado aos: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"Formato: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"Adicionado: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"Desconhecido\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"Desculpe, o atual EPUB não contém uma mídia de sobreposição para este conteúdo\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"Adicione itens para sua biblioteca aqui!\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"extraindo: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"Você tem certeza de que deseja excluir permanentemente \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"Adicionar Livro à Biblioteca Readium:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"Adicionar Livro\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"Cancelar\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"Da Rede:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"De Arquivo Local:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"Insira uma URL para um arquivo .epub\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"Diretório Extraido:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"Validar:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"Confirmar que este livro obedece aos padrões ePUB\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"Pág. Simples\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"Pág. Duplas\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"Salvar Configurações\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"TAMANHO DA FONTE\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"MARGENS\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"COR DO TEXTO E PLANO DE FUNDO\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Preto e Branco\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Noites Árabes\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Areias de Duna\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Ballard Blues\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Névoa de Vancouver\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"FORMATO DE EXIBIÇÃO\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>, a project of the International Digital Publishing Forum (IDPF) and supporters, is an open source reference system and rendering engine for EPUB&reg; publications.  To learn more, visit the <a href=\\\\\"http://readium.org/\\\\\">project homepage</a>. To date, the project development has been lead by <a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a> and <a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>. To contribute visit the <a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">github repository</a>\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,pt-BR,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/zh_CN/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"EPUB3电子书阅览器\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Readium书库\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Readium选项:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"保存更改\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"关闭\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"分页显示所有可重排版EPUB文件\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"自动用Readium打开*.epub网址\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"解压缩EPUB文件时显示警告消息\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"详细信息\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"阅读\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"删除\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"作者: \"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"出版社: \"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"源自: \"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"出版日期: \"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"更新日期: \"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID: \"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"EPUB版本: \"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"创建日期: \"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"格式: \"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"添加: \"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"未知\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"目前EPUB不支持此内容的媒体格式\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"点击这里添加新书\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"解压中: \"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"确定永久删除 \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"添加新书到Readium书库:\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"添加\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"取消\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"从网络:\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"从本地文件:\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"请输入一个.EPUB文件的URL\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"未打包目录:\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"验证:\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"确认这本书是否符合EPUB标准\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"单页\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"双页\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"保存设置\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"字体大小\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"页边距\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"字体和背景颜色\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"Black and White\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"Arabian Nights\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"Sands of Dune\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"Ballard Blues\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"Vancouver Mist\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"显示格式\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>，是一个International Digital Publishing Forum (IDPF)和技术支持者们共同开发的项目，也是一个开放源代码的EPUB格式出版物的渲染引擎。要了解更多信息，请访问<a href=\\\\\"http://readium.org/\\\\\">项目主页</a>。迄今为止，该项目的开发一直由<a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a>和<a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>来领导。要贡献请访问<a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">GitHub资料库</a>\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,ja,sr,de,zh_CN\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "\ndefine('text!readium_js_viewer_i18n/_locales/zh_TW/messages.json',[],function () { return '{\\r\\n  \"chrome_extension_name\": {\\r\\n    \"message\": \"Readium\"\\r\\n  },\\r\\n  \"chrome_extension_description\": {\\r\\n    \"message\": \"EPUB3電子書閱讀器\"\\r\\n  },\\r\\n  \"i18n_readium_library\" : {\\r\\n    \"message\" : \"Readium書櫃\"\\r\\n  },\\r\\n  \"i18n_loading\" : {\\r\\n    \"message\" : \"Loading Library\"\\r\\n  },\\r\\n  \"i18n_readium_options\" : {\\r\\n    \"message\" : \"Readium設定:\"\\r\\n  },\\r\\n  \"i18n_save_changes\" : {\\r\\n    \"message\" : \"儲存變更\"\\r\\n  },\\r\\n  \"i18n_close\" : {\\r\\n    \"message\" : \"關閉\"\\r\\n  },\\r\\n  \"i18n_paginate_all\" : {\\r\\n    \"message\" : \"分頁呈現所有文字順走型的EPUB內容\"\\r\\n  },\\r\\n  \"i18n_automatically\" : {\\r\\n    \"message\" : \"自動以Readium開啟任何以.epub結尾的網址\"\\r\\n  },\\r\\n  \"i18n_show_warning\" : {\\r\\n    \"message\" : \"解壓縮EPUB檔案時顯示警告訊息\"\\r\\n  },\\r\\n  \"i18n_details\" : {\\r\\n    \"message\" : \"詳細\"\\r\\n  },\\r\\n  \"i18n_read\" : {\\r\\n    \"message\" : \"閱讀\"\\r\\n  },\\r\\n  \"i18n_delete\" : {\\r\\n    \"message\" : \"刪除\"\\r\\n  },\\r\\n  \"i18n_author\" : {\\r\\n    \"message\" : \"作者：\"\\r\\n  },\\r\\n  \"i18n_publisher\" : {\\r\\n    \"message\" : \"出版社：\"\\r\\n  },\\r\\n  \"i18n_source\" : {\\r\\n    \"message\" : \"來源：\"\\r\\n  },\\r\\n  \"i18n_pub_date\" : {\\r\\n    \"message\" : \"出版日期：\"\\r\\n  },\\r\\n  \"i18n_modified_date\" : {\\r\\n    \"message\" : \"更新日期：\"\\r\\n  },\\r\\n  \"i18n_id\" : {\\r\\n    \"message\" : \"ID：\"\\r\\n  },\\r\\n  \"i18n_epub_version\" : {\\r\\n    \"message\" : \"EPUB版本：\"\\r\\n  },\\r\\n  \"i18n_created_at\" : {\\r\\n    \"message\" : \"建立日期：\"\\r\\n  },\\r\\n  \"i18n_format\" : {\\r\\n    \"message\" : \"格式：\"\\r\\n  },\\r\\n  \"i18n_added\" : {\\r\\n    \"message\" : \"加入日期：\"\\r\\n  },\\r\\n  \"i18n_unknown\" : {\\r\\n    \"message\" : \"未知\"\\r\\n  },\\r\\n  \"i18n_sorry\" : {\\r\\n    \"message\" : \"目前的EPUB內容並不包含朗讀聲音\"\\r\\n  },\\r\\n  \"i18n_add_items\" : {\\r\\n    \"message\" : \"按下這裡加入新書\"\\r\\n  },\\r\\n  \"i18n_extracting\" : {\\r\\n    \"message\" : \"解壓縮中：\"\\r\\n  },\\r\\n  \"i18n_are_you_sure\" : {\\r\\n    \"message\" : \"你確定要永久刪除 \"\\r\\n  },\\r\\n  \"i18n_add_book_to_readium_library\" : {\\r\\n    \"message\" : \"將書籍加入Readium書櫃：\"\\r\\n  },\\r\\n  \"i18n_add_book\" : {\\r\\n    \"message\" : \"加入書籍\"\\r\\n  },\\r\\n  \"i18n_cancel\" : {\\r\\n    \"message\" : \"取消\"\\r\\n  },\\r\\n  \"i18n_from_the_web\" : {\\r\\n    \"message\" : \"從網站加入：\"\\r\\n  },\\r\\n  \"i18n_from_local_file\" : {\\r\\n    \"message\" : \"從檔案加入：\"\\r\\n  },\\r\\n  \"i18n_enter_a_url\" : {\\r\\n    \"message\" : \"請輸入 .epub 檔案所在網址\"\\r\\n  },\\r\\n  \"i18n_unpacked_directory\" : {\\r\\n    \"message\" : \"未壓縮目錄：\"\\r\\n  },\\r\\n  \"i18n_validate\" : {\\r\\n    \"message\" : \"檢證：\"\\r\\n  },\\r\\n  \"i18n_confirm_that_this_book\" : {\\r\\n    \"message\" : \"確認這本書是否符合EPUB標準\"\\r\\n  },\\r\\n  \"i18n_single_pages\" : {\\r\\n    \"message\" : \"單頁呈現\"\\r\\n  },\\r\\n  \"i18n_double_pages\" : {\\r\\n    \"message\" : \"跨頁呈現\"\\r\\n  },\\r\\n  \"i18n_save_settings\" : {\\r\\n    \"message\" : \"儲存設定\"\\r\\n  },\\r\\n  \"i18n_font_size\" : {\\r\\n    \"message\" : \"文字尺寸\"\\r\\n  },\\r\\n  \"i18n_margins\" : {\\r\\n    \"message\" : \"頁緣餘白\"\\r\\n  },\\r\\n  \"i18n_text_and_background_color\" : {\\r\\n    \"message\" : \"文字與背景色彩\"\\r\\n  },\\r\\n  \"i18n_black_and_white\" : {\\r\\n    \"message\" : \"黑底與白字\"\\r\\n  },\\r\\n  \"i18n_arabian_nights\" : {\\r\\n    \"message\" : \"阿拉伯之夜\"\\r\\n  },\\r\\n  \"i18n_sands_of_dune\" : {\\r\\n    \"message\" : \"砂丘之黃砂\"\\r\\n  },\\r\\n  \"i18n_ballard_blues\" : {\\r\\n    \"message\" : \"抒情曲藍調\"\\r\\n  },\\r\\n  \"i18n_vancouver_mist\" : {\\r\\n    \"message\" : \"溫哥華之霧\"\\r\\n  },\\r\\n  \"i18n_display_format\" : {\\r\\n    \"message\" : \"顯示格式\"\\r\\n  },\\r\\n  \"i18n_html_readium_tm_a_project\" : {\\r\\n    \"message\" : \"Readium<sup>TM</sup>是由是International Digital Publishing Forum (IDPF)與技術協助者們共同開發的專案，是供EPUB&reg; 出版品使用的開放原始碼參考系統與排版引擎。要了解更多訊息，請前往<a href=\\\\\"http://readium.org/\\\\\">專案網頁</a>。迄今為止，本專案持續由<a href=\\\\\"http://evidentpoint.com/\\\\\">Evident Point</a>和<a href=\\\\\"http://www.bluefirereader.com/\\\\\">Bluefire Productions</a>所主導。若想協助開發，請前往<a href=\\\\\"https://github.com/readium/readium-js-viewer\\\\\">GitHub專案</a>\"\\r\\n  },\\r\\n  \"chrome_accept_languages\": {\\r\\n    \"message\": \"$CHROME$ accepts $languages$ languages\",\\r\\n    \"placeholders\": {\\r\\n      \"chrome\": {\\r\\n        \"content\": \"Chrome\",\\r\\n        \"example\": \"Chrome\"\\r\\n      },\\r\\n      \"languages\": {\\r\\n        \"content\": \"$1\",\\r\\n        \"example\": \"en-US,zh-TW,zh-HK,ja,sr,de\"\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n';});\n\n",
    "//  Copyright (c) 2014 Readium Foundation and/or its licensees. All rights reserved.\r\n//\r\n//  Redistribution and use in source and binary forms, with or without modification,\r\n//  are permitted provided that the following conditions are met:\r\n//  1. Redistributions of source code must retain the above copyright notice, this\r\n//  list of conditions and the following disclaimer.\r\n//  2. Redistributions in binary form must reproduce the above copyright notice,\r\n//  this list of conditions and the following disclaimer in the documentation and/or\r\n//  other materials provided with the distribution.\r\n//  3. Neither the name of the organization nor the names of its contributors may be\r\n//  used to endorse or promote products derived from this software without specific\r\n//  prior written permission.\r\n\r\ndefine('readium_js_viewer_i18n/Strings',['text!./_locales/de/messages.json',\r\n        'text!./_locales/es/messages.json',\r\n\t\t'text!./_locales/en_US/messages.json',\r\n\t\t'text!./_locales/fr/messages.json',\r\n\t\t'text!./_locales/it/messages.json',\r\n\t\t'text!./_locales/id/messages.json',\r\n\t\t'text!./_locales/ja/messages.json',\r\n\t\t'text!./_locales/ko/messages.json',\r\n\t\t'text!./_locales/pt_BR/messages.json',\r\n\t\t'text!./_locales/zh_CN/messages.json',\r\n\t\t'text!./_locales/zh_TW/messages.json'], \r\nfunction(de, es, en_US, fr, id, it, ja, ko, pt_BR, zh_CN, zh_TW){\r\n\tvar Strings = {};\r\n\r\n\tStrings['de'] = de;\r\n\tStrings['es'] = es;\r\n\tStrings['en_US'] = en_US;\r\n\tStrings['fr'] = fr;\r\n\tStrings['id'] = id;\r\n\tStrings['it'] = it;\r\n\tStrings['ja'] = ja;\r\n\tStrings['ko'] = ko;\r\n\tStrings['pt_BR'] = pt_BR;\r\n\tStrings['zh_CN'] = zh_CN;\r\n\tStrings['zh_TW'] = zh_TW;\r\n\r\n\tvar language = navigator.userLanguage || navigator.language;\r\n//FORCE HERE (for testing)\r\n//language=\"es\";\r\n    console.log(\"Language: [\" + language + \"]\");\r\n\r\n    var allowEnglishFallback = true;\r\n\r\n\tvar i18nStr = Strings[language] || en_US;\r\n\r\n\tvar i18nObj = JSON.parse(i18nStr);\r\n    var i18nObj_en = i18nStr === en_US ? i18nObj : JSON.parse(en_US);\r\n\r\n\tfor(var prop in i18nObj_en){\r\n        var okay = prop in i18nObj;\r\n        if (!okay) console.log(\"Language [\" + language + \"], missing string: [\" + prop + \"]\");\r\n\r\n\t\ti18nObj[prop] = okay ? i18nObj[prop].message : (allowEnglishFallback ? (\"*\"+i18nObj_en[prop].message) : \"\");\r\n\t}\r\n\treturn i18nObj;\r\n\r\n});\r\n\ndefine('readium_js_viewer_i18n', ['readium_js_viewer_i18n/Strings'], function (main) { return main; });\n\n",
    "define('readium_js_viewer/EpubLibraryManager',['jquery', 'module', 'readium_js/epub-model/package_document_parser', './workers/WorkerProxy', 'StorageManager', 'readium_js_viewer_i18n/Strings'], function ($, module, PackageParser, WorkerProxy, StorageManager, Strings) {\r\n\r\n\tvar config = module.config();\r\n\r\n\r\n\r\n\tvar LibraryManager = function(){\r\n\t};\r\n\r\n\tLibraryManager.prototype = {\r\n\t   _getFullUrl : function(packageUrl, relativeUrl){\r\n            if (!relativeUrl){\r\n                return null;\r\n            }\r\n\r\n            var parts = packageUrl.split('/');\r\n            parts.pop();\r\n\r\n            var root = parts.join('/');\r\n\r\n            return root + (relativeUrl.charAt(0) == '/' ? '' : '/') + relativeUrl\r\n        },\r\n\r\n        retrieveAvailableEpubs : function(success, error){\r\n            var indexUrl = StorageManager.getPathUrl('/epub_library.json');\r\n            if (this.libraryData){\r\n                success(this.libraryData);\r\n                return;\r\n            }\r\n            var self = this;\r\n\t\t\t$.getJSON(indexUrl, function(data){\r\n                self.libraryData = data;\r\n\t\t\t\tsuccess(data);\r\n\t\t\t}).fail(function(){\r\n                self.libraryData = [];\r\n                success([]);\r\n            });\r\n\t\t},\r\n\r\n        deleteEpubWithId : function(id, success, error){\r\n            WorkerProxy.deleteEpub(id, this.libraryData, {\r\n                success: this._refreshLibraryFromWorker.bind(this, success),\r\n                error: error\r\n            });\r\n        },\r\n\t\tretrieveFullEpubDetails : function(packageUrl, rootUrl, rootDir, noCoverBackground, success, error){\r\n            var self = this;\r\n\t\t\t$.get(packageUrl, function(data){\r\n\r\n                if(typeof(data) === \"string\" ) {\r\n                    var parser = new window.DOMParser;\r\n                    data = parser.parseFromString(data, 'text/xml');\r\n                }\r\n                var jsonObj = PackageParser.parsePackageDom(data, packageUrl);\r\n                jsonObj.coverHref = self._getFullUrl(packageUrl, jsonObj.coverHref);\r\n                jsonObj.packageUrl = packageUrl;\r\n                jsonObj.rootDir = rootDir;\r\n                jsonObj.rootUrl = rootUrl;\r\n                jsonObj.noCoverBackground = noCoverBackground;\r\n                success(jsonObj);\r\n\r\n\t\t\t}).fail(error);\r\n\t\t},\r\n        _refreshLibraryFromWorker : function(callback, newLibraryData){\r\n            this.libraryData = newLibraryData;\r\n            callback();\r\n        },\r\n        handleZippedEpub : function(options){\r\n            WorkerProxy.importZip(options.file, this.libraryData, {\r\n                progress : options.progress,\r\n                overwrite: options.overwrite,\r\n                success: this._refreshLibraryFromWorker.bind(this, options.success),\r\n                error : options.error\r\n            });\r\n            //Dialogs.showModalProgress()\r\n            //unzipper.extractAll();\r\n        },\r\n        handleDirectoryImport : function(options){\r\n\r\n            var rawFiles = options.files,\r\n                files = {};\r\n            for (var i = 0; i < rawFiles.length; i++){\r\n                 var path = rawFiles[i].webkitRelativePath\r\n                // don't capture paths that contain . at the beginning of a file or dir.\r\n                // These are hidden files. I don't think chrome will ever reference\r\n                // a file using double dot \"/..\" so this should be safe\r\n                if (path.indexOf('/.') != -1){\r\n                    continue;\r\n                }\r\n                var parts = path.split('/');\r\n\r\n                parts.shift();\r\n                var shiftPath = parts.join('/');\r\n\r\n                files[shiftPath] = rawFiles[i];\r\n            }\r\n\r\n            WorkerProxy.importDirectory(files, this.libraryData, {\r\n                progress : options.progress,\r\n                overwrite: options.overwrite,\r\n                success: this._refreshLibraryFromWorker.bind(this, options.success),\r\n                error : options.error\r\n            });\r\n        },\r\n        handleUrlImport : function(options){\r\n            WorkerProxy.importUrl(options.url, this.libraryData, {\r\n                progress : options.progress,\r\n                overwrite: options.overwrite,\r\n                success: this._refreshLibraryFromWorker.bind(this, options.success),\r\n                error : options.error\r\n\r\n            });\r\n        },\r\n        handleMigration : function(options){\r\n            WorkerProxy.migrateOldBooks({\r\n                progress : options.progress,\r\n                success: this._refreshLibraryFromWorker.bind(this, options.success),\r\n                error : options.error\r\n            });\r\n        },\r\n        handleUrl : function(options){\r\n\r\n        },\r\n        canHandleUrl : function(){\r\n            return config.canHandleUrl;\r\n        },\r\n        canHandleDirectory : function(){\r\n            return config.canHandleDirectory;\r\n        }\r\n\t}\r\n\r\n    window.cleanEntireLibrary = function(){\r\n        StorageManager.deleteFile('/', function(){\r\n            console.log('done');\r\n        }, console.error);\r\n    }\r\n\treturn new LibraryManager();\r\n\r\n});\r\n\n",
    "/**@license\n * RequireJS Hogan Plugin | v0.3.0 (2013/06/11)\n * Author: Miller Medeiros | MIT License\n */\ndefine('hgn',['hogan', 'text'], function (hogan, text) {\n\n    var DEFAULT_EXTENSION = '.mustache';\n\n    var _buildMap = {};\n    var _buildTemplateText = 'define(\"{{pluginName}}!{{moduleName}}\", [\"hogan\"], function(hogan){'+\n                             '  var tmpl = new hogan.Template({{{fn}}}, \"\", hogan);'+\n                             // need to use apply to bind the proper scope.\n                             '  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;'+\n                             '});\\n';\n    var _buildTemplate;\n\n\n    function load(name, req, onLoad, config){\n        var hgnConfig = config.hgn || {};\n        var fileName = name;\n        fileName += hgnConfig && hgnConfig.templateExtension != null? hgnConfig.templateExtension : DEFAULT_EXTENSION;\n\n        // load text files with text plugin\n        text.get(req.toUrl(fileName), function(data){\n            var compilationOptions = hgnConfig.compilationOptions? mixIn({}, hgnConfig.compilationOptions) : {};\n\n            if (config.isBuild) {\n                // store compiled function if build\n                // and should always be a string\n                compilationOptions.asString = true;\n                _buildMap[name] = hogan.compile(data, compilationOptions);\n            }\n\n            // maybe it's required by some other plugin during build\n            // so return the compiled template even during build\n            var template = hogan.compile(data, compilationOptions);\n            var render = bind(template.render, template);\n            // add text property for debugging if needed.\n            // it's important to notice that this value won't be available\n            // after build.\n            render.text = template.text;\n            render.template = template;\n            // return just the render method so it's easier to use\n            onLoad( render );\n        });\n    }\n\n    function bind(fn, context) {\n        return function(){\n            return fn.apply(context, arguments);\n        };\n    }\n\n    function mixIn(target, source) {\n        var key;\n        for (key in source){\n            if ( Object.prototype.hasOwnProperty.call(source, key) ) {\n                target[key] = source[key];\n            }\n        }\n        return target;\n    }\n\n    function write(pluginName, moduleName, writeModule){\n        if(moduleName in _buildMap){\n            if (! _buildTemplate) {\n                // using templates to generate compiled templates, so meta :P\n                _buildTemplate = hogan.compile( _buildTemplateText );\n            }\n            var fn = _buildMap[moduleName];\n            writeModule( _buildTemplate.render({\n                pluginName : pluginName,\n                moduleName : moduleName,\n                fn : fn\n            }) );\n        }\n    }\n\n    return {\n        load : load,\n        write : write\n    };\n\n});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/library-navbar.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"btn-group navbar-left\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"aboutButt1\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-logo\\\" data-toggle=\\\"modal\\\" data-target=\\\"#about-dialog\\\" title=\\\"\");t.b(t.v(t.d(\"strings.about\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.about\",c,p,0)));t.b(\"\\\"></button>\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"btn-group navbar-right\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t<button tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-thumbnails\\\" title=\\\"\");t.b(t.v(t.d(\"strings.thumbnail_view\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.thumbnail_view\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t\t<span class=\\\"glyphicon glyphicon-th\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"\t</button>\\r\");t.b(\"\\n\" + i);t.b(\"\t<button tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-list-view\\\" title=\\\"\");t.b(t.v(t.d(\"strings.list_view\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.list_view\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t\t<span class=\\\"glyphicon glyphicon-align-justify\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"\t</button>\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"addbutt\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-add-epub\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"\\\" data-toggle=\\\"modal\\\" data-target=\\\"#add-epub-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    \t<span class=\\\"glyphicon glyphicon-plus\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"settbutt1\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-settings\\\" title=\\\"\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.ShowSettingsModal\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.ShowSettingsModal\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.ShowSettingsModal\",c,p,0)));t.b(\"\\\" data-toggle=\\\"modal\\\" data-target=\\\"#settings-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    \t<span class=\\\"glyphicon glyphicon-cog\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/library-body.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"row library-items\\\" role=\\\"main\\\">\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/empty-library.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"pull-right\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t<div id=\\\"empty-message\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t\t\");t.b(t.v(t.d(\"strings.i18n_add_items\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\t</div>\\r\");t.b(\"\\n\" + i);t.b(\"\t<img id=\\\"empty-message-arrow\\\" src=\\\"images/library_arrow.png\\\" alt=\\\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/library-item.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"col-xs-4 col-sm-3 col-md-2 library-item\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class='info-wrap'>\\r\");t.b(\"\\n\" + i);t.b(\"        <!-- <div class='caption book-info'>\\r\");t.b(\"\\n\" + i);t.b(\"            <h4 class='title'>\");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"</h4>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class='author'>\");t.b(t.v(t.d(\"epub.author\",c,p,0)));if(!t.s(t.d(\"epub.author\",c,p,1),c,p,1,0,0,\"\")){t.b(\"No Author Listed\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        </div> -->\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button type=\\\"button\\\" style=\\\"background: none; border: none; padding: 0; margin: 0;\\\" class=\\\"read\\\" data-book=\\\"\");t.b(t.v(t.d(\"epub.rootUrl\",c,p,0)));t.b(\"\\\"  aria-label=\\\"(\");t.b(t.v(t.d(\"count.n\",c,p,0)));t.b(\") \");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"\\\" title=\\\"(\");t.b(t.v(t.d(\"count.n\",c,p,0)));t.b(\") \");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"\\\"  tabindex=\\\"\");t.b(t.v(t.d(\"count.tabindex\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);if(t.s(t.d(\"epub.coverHref\",c,p,1),c,p,0,610,760,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <div aria-hidden=\\\"true\\\" class=\\\"no-cover has-cover\\\" style=\\\"background-image:url(\");t.b(t.v(t.d(\"epub.coverHref\",c,p,0)));t.b(\");\\\"><p>&nbsp;</p></div>\\r\");t.b(\"\\n\" + i);});c.pop();}t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"                \\r\");t.b(\"\\n\" + i);if(!t.s(t.d(\"epub.coverHref\",c,p,1),c,p,1,0,0,\"\")){t.b(\"        <div aria-hidden=\\\"true\\\" class=\\\"no-cover\\\" style=\\\"background-image: url('\");t.b(t.v(t.f(\"noCoverBackground\",c,p,0)));t.b(\"')\\\"><p>\");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"</p></div>\\r\");t.b(\"\\n\" + i);};t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"    <!-- <div class=\\\"caption buttons\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <a href=\\\"#\\\" class=\\\"btn btn-default read\\\" data-book=\\\"\");t.b(t.v(t.d(\"epub.packageUrl\",c,p,0)));t.b(\"\\\" role=\\\"button\\\">\");t.b(t.v(t.d(\"strings.i18n_read\",c,p,0)));t.b(\"</a>\\r\");t.b(\"\\n\" + i);t.b(\"        <a href=\\\"#details-modal\\\" data-book=\\\"\");t.b(t.v(t.d(\"epub.packageUrl\",c,p,0)));t.b(\"\\\" aria-pressed=\\\"true\\\" class=\\\"btn btn-default details\\\" data-toggle=\\\"modal\\\" role=\\\"button\\\">\");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\"</a>\\r\");t.b(\"\\n\" + i);t.b(\"    </div> -->\\r\");t.b(\"\\n\" + i);t.b(\"    <div class='caption book-info'>\\r\");t.b(\"\\n\" + i);t.b(\"        <h4 class='title'>\");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"</h4>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='author'>\");t.b(t.v(t.d(\"epub.author\",c,p,0)));if(!t.s(t.d(\"epub.author\",c,p,1),c,p,1,0,0,\"\")){t.b(\"No Author Listed\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"buttons\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"         <button aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\" (\");t.b(t.v(t.d(\"count.n\",c,p,0)));t.b(\") \");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\" (\");t.b(t.v(t.d(\"count.n\",c,p,0)));t.b(\") \");t.b(t.v(t.d(\"epub.title\",c,p,0)));t.b(\"\\\" tabindex=\\\"\");t.b(t.v(t.d(\"count.tabindex\",c,p,0)));t.b(\"\\\" data-toggle=\\\"modal\\\" data-target=\\\"#details-modal\\\" data-package=\\\"\");t.b(t.v(t.d(\"epub.rootUrl\",c,p,0)));t.b(\"/\");t.b(t.v(t.d(\"epub.packagePath\",c,p,0)));t.b(\"\\\" data-root=\\\"\");t.b(t.v(t.d(\"epub.rootUrl\",c,p,0)));t.b(\"\\\" data-root-dir=\\\"\");t.b(t.v(t.d(\"epub.rootDir\",c,p,0)));t.b(\"\\\" \");if(!t.s(t.d(\"epub.coverHref\",c,p,1),c,p,1,0,0,\"\")){t.b(\" data-no-cover=\\\"\");t.b(t.v(t.f(\"noCoverBackground\",c,p,0)));t.b(\"\\\" \");};t.b(\" class=\\\"btn btn-info details\\\">\");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\"</button></div>\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/details-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div id=\\\"details-dialog\\\" class=\\\"modal fade details-dialog\\\" tabindex=\\\"-1\\\">\\r\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"modal-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"      <div class=\\\"modal-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <p>Loading Details...</p>\\r\");t.b(\"\\n\" + i);t.b(\"        <progress></progress>\\r\");t.b(\"\\n\" + i);t.b(\"      </div>\\r\");t.b(\"\\n\" + i);t.b(\"    </div><!-- /.modal-content -->\\r\");t.b(\"\\n\" + i);t.b(\"  </div><!-- /.modal-dialog -->\\r\");t.b(\"\\n\" + i);t.b(\"</div><!-- /.modal -->\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/about-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"modal fade\\\" id=\\\"about-dialog\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-label=\\\"\");t.b(t.t(t.d(\"strings.about\",c,p,0)));t.b(\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"modal-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"      <div class=\\\"modal-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"      \t<div class=\\\"splash-logo\\\">\\r\");t.b(\"\\n\" + i);t.b(\"      \t\t<img src=\\\"images/about_readium_logo.png\\\" alt=\\\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"      \t</div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"      \t<div class=\\\"about-message\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t      \t<span>\");t.b(t.t(t.d(\"strings.i18n_html_readium_tm_a_project\",c,p,0)));t.b(\"</span>\\r\");t.b(\"\\n\" + i);t.b(\"      \t</div>\\r\");t.b(\"\\n\" + i);t.b(\"      \t<div>\\r\");t.b(\"\\n\" + i);t.b(\"\t\t\t     <img src=\\\"images/partner_logos.png\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\t\t    </div>\\r\");t.b(\"\\n\" + i);t.b(\"        <h4 style=\\\"color:#111155\\\">\");t.b(t.t(t.d(\"strings.gethelp\",c,p,0)));t.b(\"</h4>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"version\\\">\");t.b(t.v(t.d(\"viewer.chromeVersion\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"build-date\\\">\");t.b(t.v(t.d(\"viewer.dateTimeString\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"version-details\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <div><a target=\\\"_blank\\\" href=\\\"https://github.com/readium/readium-js-viewer/tree/\");t.b(t.v(t.d(\"viewer.sha\",c,p,0)));t.b(\"\\\">readium-js-viewer@\");t.b(t.v(t.d(\"viewer.sha\",c,p,0)));t.b(\"</a>\");if(!t.s(t.d(\"viewer.clean\",c,p,1),c,p,1,0,0,\"\")){t.b(\"<span class=\\\"local-changes-alert\\\">(with local changes)</span>\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"          <div><a target=\\\"_blank\\\" href=\\\"https://github.com/readium/readium-js/tree/\");t.b(t.v(t.d(\"readium.sha\",c,p,0)));t.b(\"\\\">readium-js@\");t.b(t.v(t.d(\"readium.sha\",c,p,0)));t.b(\"</a>\");if(!t.s(t.d(\"readium.clean\",c,p,1),c,p,1,0,0,\"\")){t.b(\"<span class=\\\"local-changes-alert\\\">(with local changes)</span>\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"          <div><a target=\\\"_blank\\\" href=\\\"https://github.com/readium/readium-shared-js/tree/\");t.b(t.v(t.d(\"sharedJs.sha\",c,p,0)));t.b(\"\\\">readium-shared-js@\");t.b(t.v(t.d(\"sharedJs.sha\",c,p,0)));t.b(\"</a>\");if(!t.s(t.d(\"sharedJs.clean\",c,p,1),c,p,1,0,0,\"\")){t.b(\"<span class=\\\"local-changes-alert\\\">(with local changes)</span>\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"          <div><a target=\\\"_blank\\\" href=\\\"https://github.com/readium/readium-cfi-js/tree/\");t.b(t.v(t.d(\"cfiJs.sha\",c,p,0)));t.b(\"\\\">readium-cfi-js@\");t.b(t.v(t.d(\"cfiJs.sha\",c,p,0)));t.b(\"</a>\");if(!t.s(t.d(\"cfiJs.clean\",c,p,1),c,p,1,0,0,\"\")){t.b(\"<span class=\\\"local-changes-alert\\\">(with local changes)</span>\");};t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"      </div>\\r\");t.b(\"\\n\" + i);t.b(\"    </div><!-- /.modal-content -->\\r\");t.b(\"\\n\" + i);t.b(\"  </div><!-- /.modal-dialog -->\\r\");t.b(\"\\n\" + i);t.b(\"</div><!-- /.modal -->\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/details-body.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"details-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\"  tabindex=\\\"1000\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_details\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"offscreenText\\\">Details Start</div>\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-cover-wrap\\\">\\r\");t.b(\"\\n\" + i);if(t.s(t.d(\"data.coverHref\",c,p,1),c,p,0,388,500,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <img class=\\\"details-cover-image img-responsive\\\" src=\\\"\");t.b(t.v(t.d(\"data.coverHref\",c,p,0)));t.b(\"\\\" alt=\\\"ePUB cover\\\">\\r\");t.b(\"\\n\" + i);});c.pop();}if(!t.s(t.d(\"data.coverHref\",c,p,1),c,p,1,0,0,\"\")){t.b(\"        <div class=\\\"no-cover\\\" style=\\\"background-image: url('\");t.b(t.v(t.d(\"data.noCoverBackground\",c,p,0)));t.b(\"')\\\"><p>\");t.b(t.v(t.d(\"data.title\",c,p,0)));t.b(\"</p></div>\\r\");t.b(\"\\n\" + i);};t.b(\"        <div class=\\\"buttons\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1000\\\" class=\\\"btn btn-default read\\\" data-dismiss=\\\"modal\\\" data-book=\\\"\");t.b(t.v(t.d(\"data.rootUrl\",c,p,0)));t.b(\"\\\" type=\\\"button\\\">\");t.b(t.v(t.d(\"strings.i18n_read\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1000\\\" class=\\\"btn btn-danger delete\\\" data-dismiss=\\\"modal\\\" type=\\\"button\\\">\");t.b(t.v(t.d(\"strings.i18n_delete\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"    <div class='modal-book-info'>\\r\");t.b(\"\\n\" + i);t.b(\"        <h3 class='modal-title'>\");t.b(t.v(t.d(\"data.title\",c,p,0)));t.b(\"</h3>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_author\",c,p,0)));t.b(t.v(t.d(\"data.author\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_publisher\",c,p,0)));t.b(t.v(t.d(\"data.publisher\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_pub_date\",c,p,0)));t.b(t.v(t.d(\"data.pubdate\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_modified_date\",c,p,0)));t.b(t.v(t.d(\"data.modified_date\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_id\",c,p,0)));t.b(t.v(t.d(\"data.id\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"        <div class='modal-detail'>\");t.b(t.v(t.d(\"strings.i18n_epub_version\",c,p,0)));t.b(t.v(t.d(\"data.epub_version\",c,p,0)));t.b(\"</div>        \\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"offscreenText\\\">Details End</div>\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/add-epub-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"modal fade\\\" id=\\\"add-epub-dialog\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"add-epub-label\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"modal-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-header\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                <button id=\\\"closeAddEpubCross\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" tabindex=\\\"999\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                <h4 class=\\\"modal-title\\\" id=\\\"add-epub-label\\\">\");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"</h4>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <form class=\\\"form-horizontal\\\" role=\\\"form\\\">\\r\");t.b(\"\\n\" + i);if(t.s(t.f(\"canHandleUrl\",c,p,1),c,p,0,763,1190,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"                <div class=\\\"form-group\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    <label id=\\\"add1\\\" class=\\\"control-label col-sm-5\\\">\");t.b(t.v(t.d(\"strings.i18n_from_the_web\",c,p,0)));t.b(\"</label>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div class=\\\"col-sm-7\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        <input tabindex=\\\"1000\\\" type=\\\"text\\\" id=\\\"url-upload\\\" class=\\\"form-control\\\" placeholder=\\\"\");t.b(t.v(t.d(\"strings.i18n_enter_a_url\",c,p,0)));t.b(\"\\\" aria-labelledby=\\\"add1\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);});c.pop();}t.b(\"                <div id=\\\"epub-upload-div\\\" class=\\\"form-group\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    <label id=\\\"add2\\\" class=\\\"control-label col-sm-5\\\">\");t.b(t.v(t.d(\"strings.i18n_from_local_file\",c,p,0)));t.b(\"</label>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div class=\\\"col-sm-7\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        <input tabindex=\\\"1000\\\" type=\\\"file\\\" id=\\\"epub-upload\\\" class=\\\"form-control\\\" aria-labelledby=\\\"add2\\\" role=\\\"button\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);if(t.s(t.f(\"canHandleDirectory\",c,p,1),c,p,0,1653,2106,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"                <div class=\\\"form-group\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    <label id=\\\"add3\\\" class=\\\"control-label col-sm-5\\\">\");t.b(t.v(t.d(\"strings.i18n_unpacked_directory\",c,p,0)));t.b(\"</label>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div class=\\\"col-sm-7\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        <input tabindex=\\\"1000\\\" type=\\\"file\\\" id=\\\"dir-upload\\\" webkitdirectory=\\\"\\\" mozdirectory=\\\"\\\" directory=\\\"\\\" class=\\\"form-control\\\" aria-labelledby=\\\"add3\\\"  role=\\\"button\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);});c.pop();}t.b(\"                </form>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-footer\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1000\\\" type=\\\"button\\\" class=\\\"btn btn-default add-book\\\" data-dismiss=\\\"modal\\\" disabled=\\\"disabled\\\">\");t.b(t.v(t.d(\"strings.i18n_add_book\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1000\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\">\");t.b(t.v(t.d(\"strings.i18n_cancel\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"        <!-- /.modal-content --> \\r\");t.b(\"\\n\" + i);t.b(\"    </div><!-- /.modal-dialog -->\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"<!-- /.modal -->\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/settings-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div tabindex=\\\"-1\\\" class=\\\"modal fade\\\" id=\\\"settings-dialog\\\" role=\\\"dialog\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"modal-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"           <!-- div class=\\\"modal-header\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <h4 class=\\\"modal-title\\\" id=\\\"settings-label\\\">\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\"</h4>\\r\");t.b(\"\\n\" + i);t.b(\"           </div -->\\r\");t.b(\"\\n\" + i);t.b(\"               \\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"           <button type=\\\"button\\\" class=\\\"close\\\" id=\\\"closeSettingsCross\\\" data-dismiss=\\\"modal\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"           <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\" aria-owns=\\\"tab-butt-style tab-butt-layout tab-butt-keys\\\">\\r\");t.b(\"\\n\" + i);t.b(\"             <li class=\\\"active\\\" role=\\\"presentation\\\"><button id=\\\"tab-butt-style\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.style\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.style\",c,p,0)));t.b(\"\\\" role='tab' aria-controls=\\\"tab-style\\\" data-toggle=\\\"tab\\\" data-target=\\\"#tab-style\\\">\");t.b(t.v(t.d(\"strings.style\",c,p,0)));t.b(\"</button></li>\\r\");t.b(\"\\n\" + i);t.b(\"             <li role=\\\"presentation\\\"><button id=\\\"tab-butt-layout\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.layout\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.layout\",c,p,0)));t.b(\"\\\" role='tab' aria-controls=\\\"tab-layout\\\" data-toggle=\\\"tab\\\" data-target=\\\"#tab-layout\\\">\");t.b(t.v(t.d(\"strings.layout\",c,p,0)));t.b(\"</button></li>\\r\");t.b(\"\\n\" + i);t.b(\"             <li role=\\\"presentation\\\"><button id=\\\"tab-butt-keys\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_keyboard_shortcuts\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_keyboard_shortcuts\",c,p,0)));t.b(\"\\\" role='tab' aria-controls=\\\"tab-keyboard\\\" data-toggle=\\\"tab\\\" data-target=\\\"#tab-keyboard\\\">\");t.b(t.v(t.d(\"strings.i18n_keyboard_shortcuts\",c,p,0)));t.b(\"</button></li>\\r\");t.b(\"\\n\" + i);t.b(\"           </ul>\\r\");t.b(\"\\n\" + i);t.b(\"           \\r\");t.b(\"\\n\" + i);t.b(\"           \\r\");t.b(\"\\n\" + i);t.b(\"           <div class=\\\"tab-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <div id=\\\"tab-style\\\" class=\\\"tab-pane active\\\" role=\\\"tabpanel\\\" aria-expanded=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                     \\r\");t.b(\"\\n\" + i);t.b(\"                <h5 aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.preview\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                <div  aria-hidden=\\\"true\\\" class=\\\"row\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    <div data-theme=\\\"default-theme\\\" class=\\\"col-xs-10 col-xs-offset-1 preview-text default-theme\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus neque dui, congue a suscipit non, feugiat eu urna. Cras in felis sed orci aliquam sagittis. \\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"<!-- button  type=\\\"button\\\" title=\\\"TESTING\\\" aria-label=\\\"TESTING\\\">TESTING DANIEL</button -->\\r\");t.b(\"\\n\" + i);t.b(\"                \\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 id=\\\"setting-header-font-size\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_font_size\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div class=\\\"row\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-2 icon-scale-down\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <img src=\\\"images/glyphicons_115_text_smaller.png\\\" alt=\\\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-8\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input  type=\\\"range\\\" role=\\\"slider\\\" aria-labelledby=\\\"setting-header-font-size\\\" id=\\\"font-size-input\\\" min=\\\"60\\\" aria-value-min=\\\"60\\\" aria-valuemin=\\\"60\\\" step=\\\"10\\\" max=\\\"170\\\" aria-value-max=\\\"170\\\" aria-valuemax=\\\"170\\\" value=\\\"100\\\" aria-valuenow=\\\"100\\\" aria-value-now=\\\"100\\\" aria-valuetext=\\\"1em\\\" aria-value-text=\\\"1em\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_font_size\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_font_size\",c,p,0)));t.b(\"\\\" />\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-2\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <img src=\\\"images/glyphicons_116_text_bigger.png\\\" alt=\\\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 id=\\\"setting-header-color-legend\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_text_and_background_color\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div role=\\\"group\\\" aria-labelledby=\\\"setting-header-color-legend\\\" id=\\\"theme-radio-group\\\" class=\\\"row\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"author-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_author_theme\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_author_theme\",c,p,0)));t.b(\"\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option author-theme clickable\\\">\");t.b(t.v(t.d(\"strings.i18n_author_theme\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"default-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_black_and_white\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_black_and_white\",c,p,0)));t.b(\"\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option default-theme clickable\\\">\");t.b(t.v(t.d(\"strings.i18n_black_and_white\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"night-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_arabian_nights\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.NightTheme\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_arabian_nights\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.NightTheme\",c,p,0)));t.b(\"]\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option night-theme clickable\\\" >\");t.b(t.v(t.d(\"strings.i18n_arabian_nights\",c,p,0)));t.b(\"</button> <!-- accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.NightTheme\",c,p,0)));t.b(\"\\\" -->\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"parchment-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_sands_of_dune\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_sands_of_dune\",c,p,0)));t.b(\"\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option parchment-theme clickable\\\">\");t.b(t.v(t.d(\"strings.i18n_sands_of_dune\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"ballard-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_ballard_blues\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_ballard_blues\",c,p,0)));t.b(\"\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option ballard-theme clickable\\\">\");t.b(t.v(t.d(\"strings.i18n_ballard_blues\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <button role=\\\"button\\\" data-theme=\\\"vancouver-theme\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_vancouver_mist\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_vancouver_mist\",c,p,0)));t.b(\"\\\" class=\\\"col-xs-8 col-xs-offset-2 theme-option vancouver-theme clickable\\\">\");t.b(t.v(t.d(\"strings.i18n_vancouver_mist\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);t.b(\"                <div id=\\\"tab-layout\\\" class=\\\"tab-pane\\\" role=\\\"tabpanel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 id=\\\"setting-header-margins-legend\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_margins\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                     <div class=\\\"row\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-2 icon-scale-down\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <img style=\\\"height: 32px;\\\" src=\\\"images/margin1_off.png\\\" alt=\\\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-8\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input  type=\\\"range\\\" role=\\\"slider\\\" aria-labelledby=\\\"setting-header-margins-legend\\\" id=\\\"margin-size-input\\\" min=\\\"20\\\" aria-value-min=\\\"20\\\" aria-valuemin=\\\"20\\\" step=\\\"20\\\" max=\\\"100\\\" aria-value-max=\\\"100\\\" aria-valuemax=\\\"100\\\" value=\\\"20\\\" aria-valuenow=\\\"20\\\" aria-value-now=\\\"20\\\" aria-valuetext=\\\"20\\\" aria-value-text=\\\"20\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_margins\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_margins\",c,p,0)));t.b(\"\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        <div class=\\\"col-xs-2\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <img style=\\\"height: 32px;\\\" src=\\\"images/margin4_off.png\\\" alt=\\\"\\\" aria-hidden=\\\"true\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 id=\\\"setting-header-display-legend\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_display_format\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    <div role=\\\"radiogroup\\\" class=\\\"row\\\" style=\\\"width:100%;text-align:center;\\\" aria-labelledby=\\\"setting-header-display-legend\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"spread-default-option\\\"\\r\");t.b(\"\\n\" + i);t.b(\"                        style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"display-format\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"spread-default-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"spread-default-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_spread_auto\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"one-up-option\\\"\\r\");t.b(\"\\n\" + i);t.b(\"                        style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            \\r\");t.b(\"\\n\" + i);t.b(\"                            <input  name=\\\"display-format\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"single-page-radio\\\" />\\r\");t.b(\"\\n\" + i);t.b(\"                                            <label for=\\\"single-page-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                            <img src=\\\"images/ico_singlepage_up.png\\\" alt=\\\"\");t.b(t.v(t.d(\"strings.i18n_display_format\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_single_pages\",c,p,0)));t.b(\"\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"two-up-option\\\"\\r\");t.b(\"\\n\" + i);t.b(\"                        style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            \\r\");t.b(\"\\n\" + i);t.b(\"                                <input  name=\\\"display-format\\\" value=\\\"double\\\" type=\\\"radio\\\" id=\\\"double-page-radio\\\" />\\r\");t.b(\"\\n\" + i);t.b(\"                                            <label for=\\\"double-page-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                            <img src=\\\"images/ico_doublepage_up.png\\\" alt=\\\"\");t.b(t.v(t.d(\"strings.i18n_display_format\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_double_pages\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 id=\\\"setting-header-scroll-legend\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_scroll_mode\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    <div role=\\\"radiogroup\\\" class=\\\"row\\\" style=\\\"width:100%;text-align:center;\\\" aria-labelledby=\\\"setting-header-scroll-legend\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"scroll-default-option\\\" style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"scrolling\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"scroll-default-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"scroll-default-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_scroll_mode_auto\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"scroll-doc-option\\\" style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"scrolling\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"scroll-doc-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"scroll-doc-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                <span style=\\\"font-size:150%;color:#888888;\\\" class=\\\"glyphicon glyphicon-file\\\" aria-hidden=\\\"true\\\"></span> \");t.b(t.v(t.d(\"strings.i18n_scroll_mode_doc\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"scroll-continuous-option\\\" style=\\\"vertical-align:middle;width:30%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"scrolling\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"scroll-continuous-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"scroll-continuous-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                <span style=\\\"font-size:150%;color:#888888;\\\" class=\\\"glyphicon glyphicon-road\\\" aria-hidden=\\\"true\\\"></span> \");t.b(t.v(t.d(\"strings.i18n_scroll_mode_continuous\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                    <h5 hiddenx=\\\"hidden\\\" id=\\\"setting-header-pageTransition-legend\\\" class=\\\"setting-header\\\">\");t.b(t.v(t.d(\"strings.i18n_page_transition\",c,p,0)));t.b(\"</h5>\\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    <div hiddenx=\\\"hidden\\\" role=\\\"radiogroup\\\" class=\\\"row\\\" style=\\\"width:100%;text-align:center;\\\" aria-labelledby=\\\"setting-header-pageTransition-legend\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"pageTransition-none-option\\\" style=\\\"vertical-align:middle;width:15%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"pageTransition\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"pageTransition-none-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"pageTransition-none-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_page_transition_none\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"pageTransition-1-option\\\" style=\\\"vertical-align:middle;width:15%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"pageTransition\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"pageTransition-1-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"pageTransition-1-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_page_transition_fade\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"pageTransition-2-option\\\" style=\\\"vertical-align:middle;width:15%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"pageTransition\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"pageTransition-2-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"pageTransition-2-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_page_transition_slide\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"pageTransition-3-option\\\" style=\\\"vertical-align:middle;width:15%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"pageTransition\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"pageTransition-3-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"pageTransition-3-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_page_transition_swoosh\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div role=\\\"radio\\\" id=\\\"pageTransition-4-option\\\" style=\\\"vertical-align:middle;width:15%;display:inline-block;position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                            <input style=\\\"\\\"  name=\\\"pageTransition\\\" value=\\\"single\\\" type=\\\"radio\\\" id=\\\"pageTransition-4-radio\\\"/>\\r\");t.b(\"\\n\" + i);t.b(\"                            <label style=\\\"\\\" for=\\\"pageTransition-4-radio\\\" class=\\\"underlinedLabel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                                \");t.b(t.v(t.d(\"strings.i18n_page_transition_butterfly\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                            </label>\\r\");t.b(\"\\n\" + i);t.b(\"                        </div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    \\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                    <div id=\\\"tab-keyboard\\\" class=\\\"tab-pane\\\" role=\\\"tabpanel\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                    <div class=\\\"row\\\" style=\\\"position:relative;\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <div id=\\\"invalid_keyboard_shortcut_ALERT\\\"></div>\\r\");t.b(\"\\n\" + i);t.b(\"                        \\r\");t.b(\"\\n\" + i);t.b(\"                        <ul id=\\\"keyboard-list\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                        </ul>\\r\");t.b(\"\\n\" + i);t.b(\"                    </div>\\r\");t.b(\"\\n\" + i);t.b(\"                     </div>\\r\");t.b(\"\\n\" + i);t.b(\"                </div>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-footer\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <button id=\\\"buttClose\\\"  type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SettingsModalClose\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SettingsModalClose\",c,p,0)));t.b(\"]\\\">\");t.b(t.v(t.d(\"strings.i18n_close\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button id=\\\"buttSave\\\"  type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_save_changes\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SettingsModalSave\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_save_changes\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SettingsModalSave\",c,p,0)));t.b(\"]\\\">\");t.b(t.v(t.d(\"strings.i18n_save_changes\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"        <!-- /.modal-content -->\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"    <!-- /.modal-dialog -->\\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/settings-keyboard-item.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");if(t.s(t.f(\"name\",c,p,1),c,p,0,9,747,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"<li>\\r\");t.b(\"\\n\" + i);t.b(\"<label id=\\\"label_\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"\\\">\");t.b(t.v(t.f(\"i18n\",c,p,0)));t.b(\"<br/><span>\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"</span></label>\\r\");t.b(\"\\n\" + i);t.b(\"<input id=\\\"\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"\\\" name=\\\"\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"\\\" class=\\\"keyboardInput\\\" type=\\\"text\\\"  placeholder=\\\"\");t.b(t.v(t.f(\"shortcut\",c,p,0)));t.b(\"\\\" value=\\\"\");t.b(t.v(t.f(\"shortcut\",c,p,0)));t.b(\"\\\" aria-labelledbyxxx=\\\"label_\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.f(\"i18n\",c,p,0)));t.b(\"\\\" title=\\\"\");t.b(t.v(t.f(\"i18n\",c,p,0)));t.b(\"\\\"></input>\\r\");t.b(\"\\n\" + i);t.b(\"<button class=\\\"resetKey captureKeyboardShortcut\\\" role=\\\"button\\\" data-key=\\\"\");t.b(t.v(t.f(\"name\",c,p,0)));t.b(\"\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_reset_key\",c,p,0)));t.b(\" (\");t.b(t.v(t.f(\"def\",c,p,0)));t.b(\")\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_reset_key\",c,p,0)));t.b(\" (\");t.b(t.v(t.f(\"def\",c,p,0)));t.b(\")\\\"><span aria-hidden=\\\"true\\\">&#8855;</span></button>\\r\");t.b(\"\\n\" + i);t.b(\"<span id=\\\"duplicate_keyboard_shortcut\\\" aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_duplicate_keyboard_shortcut\",c,p,0)));t.b(\"</span>\\r\");t.b(\"\\n\" + i);t.b(\"<span id=\\\"invalid_keyboard_shortcut\\\" aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_invalid_keyboard_shortcut\",c,p,0)));t.b(\"</span>\\r\");t.b(\"\\n\" + i);t.b(\"</li>\\r\");t.b(\"\\n\" + i);});c.pop();}if(!t.s(t.f(\"name\",c,p,1),c,p,1,0,0,\"\")){t.b(\"<li id=\\\"resetAllKeys\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"resetAllKeys\\\">\\r\");t.b(\"\\n\" + i);t.b(\"<button class=\\\"resetKey\\\" role=\\\"button\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_reset_key_all\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_reset_key_all\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_reset_key_all\",c,p,0)));t.b(\"  &#8855;</span></button>\\r\");t.b(\"\\n\" + i);t.b(\"</li>\\r\");t.b(\"\\n\" + i);};return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/managed-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"modal fade\\\" id=\\\"managed-dialog\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"managed-label\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"modal-dialog\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <div class=\\\"modal-content\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-header\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"close\\\" title=\\\"close\\\"><span aria-hidden=\\\"true\\\">&times;<span></button>\\r\");t.b(\"\\n\" + i);t.b(\"                <h4 class=\\\"modal-title\\\" id=\\\"managed-label\\\"></h4>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-body\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            <div class=\\\"modal-footer\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"        <!-- /.modal-content --> \\r\");t.b(\"\\n\" + i);t.b(\"    </div><!-- /.modal-dialog -->\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"<!-- /.modal -->\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/progress-dialog.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"progress progress-striped active\\\">\\r\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"progress-bar\\\"  role=\\\"progressbar\\\" aria-valuenow=\\\"1\\\" aria-valuemin=\\\"1\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 1%\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <!-- <span class=\\\"progress-message sr-only\\\">\");t.b(t.v(t.f(\"message\",c,p,0)));t.b(\"</span> -->\\r\");t.b(\"\\n\" + i);t.b(\"  </div>\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"progress-message\\\">\");t.b(t.v(t.f(\"message\",c,p,0)));t.b(\"</div>\\r\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/managed-buttons.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");if(t.s(t.f(\"buttons\",c,p,1),c,p,0,12,157,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"<button type=\\\"button\\\" class=\\\"btn btn-default \");if(t.s(t.f(\"classes\",c,p,1),c,p,0,71,77,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(t.v(t.d(\".\",c,p,0)));t.b(\" \");});c.pop();}t.b(\"\\\" \");if(t.s(t.f(\"dismiss\",c,p,1),c,p,0,103,125,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\" data-dismiss=\\\"modal\\\" \");});c.pop();}t.b(\">\");t.b(t.v(t.f(\"text\",c,p,0)));t.b(\"</button>\\r\");t.b(\"\\n\" + i);});c.pop();}return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "define('readium_js_viewer/Dialogs',['hgn!readium_js_viewer_html_templates/managed-dialog.html', 'hgn!readium_js_viewer_html_templates/progress-dialog.html', 'hgn!readium_js_viewer_html_templates/managed-buttons.html', 'readium_js_viewer_i18n/Strings', './workers/Messages'], function(ManagedDialog, ProgressDialog, ButtonTemplate, Strings, Messages){\r\n\tvar $currentModal,\r\n\t\tlastTitle;\r\n\r\n\r\n\tvar hideExistingModal = function(){\r\n\t\tif($currentModal){\r\n\t\t\t$currentModal.modal('hide');\r\n\t\t}\r\n\t};\r\n\r\n\tvar showModalDialog = function(dismissable, title, body, buttons){\r\n\t\tif (!$currentModal){\r\n\t\t\t$currentModal = $(ManagedDialog({}));\r\n\t\t\t$('#app-container').append($currentModal);\r\n\r\n\t\t}\r\n\r\n\t\t$('#managed-label').text(title);\r\n\t\t$('#managed-dialog .modal-body').empty().append(body);\r\n\t\t$('#managed-dialog .modal-footer').empty().append(buttons);\r\n\t\tif (dismissable){\r\n\t\t\t$('#managed-dialog .close').show();\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$('#managed-dialog .close').hide();\r\n\t\t}\r\n\r\n\t\tif ($currentModal.is(':hidden')){\r\n\t\t\t$('#managed-dialog').modal('show');\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tDialogs = {\r\n\t\tshowError : function(type, data){\r\n\t\t\tvar msg = Strings.err_unknown;\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase Messages.ERROR_STORAGE:\r\n\t\t\t\t\tmsg = Strings.err_storage;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.ERROR_EPUB:\r\n\t\t\t\t\tmsg = Strings.err_epub_corrupt;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.ERROR_AJAX:\r\n        \t\t\t\tmsg = Strings.err_ajax;\r\n                \t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmsg = Strings.err_unknown;\r\n\t\t\t\t\tconsole.trace();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tDialogs.showModalMessage(Strings.err_dlg_title, msg);\r\n\t\t},\r\n\t\tshowModalMessage : function(title, message){\r\n\t\t\tvar body = $('<p></p>').text(message),\r\n\t\t\t\tbuttons = ButtonTemplate({\r\n\t\t\t\t\tbuttons : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdismiss : true,\r\n\t\t\t\t\t\t\ttext : Strings.ok\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\r\n\t\t\tshowModalDialog(true, title, body, buttons);\r\n\t\t},\r\n\t\tshowModalPromptEx : function(title, message, buttons, handlers){\r\n\r\n\t\t\tvar body = $('<p></p>').text(message);\r\n\t\t\tvar buttonsStr = ButtonTemplate({buttons: buttons});\r\n\t\t\tshowModalDialog(false, title, body, buttonsStr);\r\n\r\n\t\t\tfor (var i = 0; i < handlers.length; i++){\r\n\t\t\t\tif (handlers[i]){\r\n\t\t\t\t\t$('#managed-dialog .' + buttons[i].classes[0]).on('click', handlers[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// if (onOk)\r\n\t\t\t// \t$('#managed-dialog .yes-button').on('click', onOk);\r\n\r\n\t\t\t// if (onCancel)\r\n\t\t\t// \t$('#managed-dialog .no-button').on('click', onCancel);\r\n\t\t},\r\n\t\tshowModalPrompt : function(title, message, okLabel, cancelLabel, onOk, onCancel){\r\n\r\n\r\n\t\t\tvar buttons = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdismiss: true,\r\n\t\t\t\t\t\ttext : cancelLabel,\r\n\t\t\t\t\t\tclasses : ['no-button']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdismiss : true,\r\n\t\t\t\t\t\ttext : okLabel,\r\n\t\t\t\t\t\tclasses : ['yes-button', 'btn-primary']\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\thandlers = [onCancel, onOk];\r\n\t\t\tDialogs.showModalPromptEx(title, message, buttons, handlers);\r\n\t\t},\r\n\t\tshowReplaceConfirm : function(title, message, okLabel, cancelLabel, keepBothLabel, onOk, onCancel, onKeepBoth){\r\n\t\t\tvar buttons = [\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdismiss: true,\r\n\t\t\t\t\t\ttext : cancelLabel,\r\n\t\t\t\t\t\tclasses : ['no-button']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdismiss : true,\r\n\t\t\t\t\t\ttext : okLabel,\r\n\t\t\t\t\t\tclasses : ['yes-button', 'btn-danger']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdismiss : true,\r\n\t\t\t\t\t\ttext : keepBothLabel,\r\n\t\t\t\t\t\tclasses : ['keep-both-button', 'btn-primary']\r\n\t\t\t\t\t}\r\n\r\n\t\t\t];\r\n\t\t\thandlers = [onCancel, onOk, onKeepBoth];\r\n\t\t\tDialogs.showModalPromptEx(title, message, buttons, handlers);\r\n\t\t},\r\n\t\tshowModalProgress : function(title, message){\r\n\t\t\tvar data = {\r\n\t\t\t\tmessage: message\r\n\t\t\t}\r\n\t\t\tlastTitle = title;\r\n\t\t\tshowModalDialog(false, title, ProgressDialog(data), '');\r\n\t\t},\r\n\t\tupdateProgress : function(percent, type, data, noForce){\r\n\r\n\t\t\tvar msg = '';\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase Messages.PROGRESS_MIGRATING :\r\n\t\t\t\t\tmsg = Strings.migrating + ' ' + data;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.PROGRESS_EXTRACTING:\r\n\t\t\t\t\tmsg = Strings.i18n_extracting + ' ' + data;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.PROGRESS_WRITING:\r\n\t\t\t\t\tmsg = Strings.storing_file + ' ' + data;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Messages.PROGRESS_DELETING:\r\n\t\t\t\t\tmsg = Strings.delete_progress_message + ' ' + data;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t// if (!noForce && $('#managed-dialog').is(':hidden')){\r\n\t\t\t//  \tDialogs.showModalProgress(lastTitle, msg);\r\n\t\t\t// }\r\n\t\t\t$('#managed-dialog .progress-bar').attr('aria-valuenow', percent).css('width', percent + '%');\r\n\t\t\t$('#managed-dialog .progress-message').text(msg);\r\n\t\t},\r\n\t\tcloseModal : function(){\r\n\t\t\thideExistingModal();\r\n\t\t},\r\n\t\treset : function(){\r\n\t\t\tif ($currentModal){\r\n\t\t\t\t$currentModal.remove();\r\n\t\t\t\t$currentModal = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn Dialogs;\r\n});\r\n\n",
    "define('readium_js_viewer/Keyboard',['readium_js_viewer_i18n/Strings', 'keymaster', './storage/Settings'], function(Strings, key, Settings){\r\n\r\n    var keyBindings = {};\r\n\r\n            //https://github.com/termi/DOM-Keyboard-Event-Level-3-polyfill\r\n            //https://gist.github.com/termi/4654819\r\n            void function() {//closure\r\n\r\n            var global = this\r\n              , _initKeyboardEvent_type = (function( e ) {\r\n            \t\ttry {\r\n            \t\t\te.initKeyboardEvent(\r\n            \t\t\t\t\"keyup\" // in DOMString typeArg\r\n            \t\t\t\t, false // in boolean canBubbleArg\r\n            \t\t\t\t, false // in boolean cancelableArg\r\n            \t\t\t\t, global // in views::AbstractView viewArg\r\n            \t\t\t\t, \"+\" // [test]in DOMString keyIdentifierArg | webkit event.keyIdentifier | IE9 event.key\r\n            \t\t\t\t, 3 // [test]in unsigned long keyLocationArg | webkit event.keyIdentifier | IE9 event.location\r\n            \t\t\t\t, true // [test]in boolean ctrlKeyArg | webkit event.shiftKey | old webkit event.ctrlKey | IE9 event.modifiersList\r\n            \t\t\t\t, false // [test]shift | alt\r\n            \t\t\t\t, true // [test]shift | alt\r\n            \t\t\t\t, false // meta\r\n            \t\t\t\t, false // altGraphKey\r\n            \t\t\t);\r\n\r\n\r\n\r\n            \t\t\t/*\r\n            \t\t\t// Safari and IE9 throw Error here due keyCode, charCode and which is readonly\r\n            \t\t\t// Uncomment this code block if you need legacy properties\r\n            \t\t\tdelete e.keyCode;\r\n            \t\t\t_Object_defineProperty(e, {writable: true, configurable: true, value: 9})\r\n            \t\t\tdelete e.charCode;\r\n            \t\t\t_Object_defineProperty(e, {writable: true, configurable: true, value: 9})\r\n            \t\t\tdelete e.which;\r\n            \t\t\t_Object_defineProperty(e, {writable: true, configurable: true, value: 9})\r\n            \t\t\t*/\r\n\r\n            \t\t\treturn ((e[\"keyIdentifier\"] || e[\"key\"]) == \"+\" && (e[\"keyLocation\"] || e[\"location\"]) == 3) && (\r\n            \t\t\t\te.ctrlKey ?\r\n            \t\t\t\t\te.altKey ? // webkit\r\n            \t\t\t\t\t\t1\r\n            \t\t\t\t\t\t:\r\n            \t\t\t\t\t\t3\r\n            \t\t\t\t\t:\r\n            \t\t\t\t\te.shiftKey ?\r\n            \t\t\t\t\t\t2 // webkit\r\n            \t\t\t\t\t\t:\r\n            \t\t\t\t\t\t4 // IE9\r\n            \t\t\t\t) || 9 // FireFox|w3c\r\n            \t\t\t\t;\r\n            \t\t}\r\n            \t\tcatch ( __e__ ) { _initKeyboardEvent_type = 0 }\r\n            \t})( document.createEvent( \"KeyboardEvent\" ) )\r\n\r\n            \t, _keyboardEvent_properties_dictionary = {\r\n            \t\t\"char\": \"\",\r\n            \t\t\"key\": \"\",\r\n            \t\t\"location\": 0,\r\n            \t\t\"ctrlKey\": false,\r\n            \t\t\"shiftKey\": false,\r\n            \t\t\"altKey\": false,\r\n            \t\t\"metaKey\": false,\r\n            \t\t\"repeat\": false,\r\n            \t\t\"locale\": \"\",\r\n\r\n            \t\t\"detail\": 0,\r\n            \t\t\"bubbles\": false,\r\n            \t\t\"cancelable\": false,\r\n\r\n            \t\t//legacy properties\r\n            \t\t\"keyCode\": 0,\r\n            \t\t\"charCode\": 0,\r\n            \t\t\"which\": 0\r\n            \t}\r\n\r\n            \t, own = Function.prototype.call.bind(Object.prototype.hasOwnProperty)\r\n\r\n            \t, _Object_defineProperty = Object.defineProperty || function(obj, prop, val) {\r\n            \t\tif( \"value\" in val ) {\r\n            \t\t\tobj[prop] = val[\"value\"];\r\n            \t\t}\r\n            \t}\r\n            ;\r\n\r\n            function crossBrowser_initKeyboardEvent(type, dict) {\r\n            \tvar e;\r\n            \tif( _initKeyboardEvent_type ) {\r\n            \t\te = document.createEvent( \"KeyboardEvent\" );\r\n            \t}\r\n            \telse {\r\n            \t\te = document.createEvent( \"Event\" );\r\n            \t}\r\n\r\n                // // Chromium Hack\r\n                // try\r\n                // {\r\n                // Object.defineProperty(e, 'keyCode', {\r\n                //             get : function() {\r\n                //                 return this.keyCodeVal;\r\n                //             }\r\n                // });\r\n                // }catch(){}\r\n                //\r\n                // try\r\n                // {\r\n                // Object.defineProperty(e, 'which', {\r\n                //             get : function() {\r\n                //                 return this.keyCodeVal;\r\n                //             }\r\n                // });\r\n                // }catch(){}\r\n\r\n\r\n            \tvar _prop_name\r\n            \t\t, localDict = {};\r\n\r\n            \tfor( _prop_name in _keyboardEvent_properties_dictionary ) if(own(_keyboardEvent_properties_dictionary, _prop_name) ) {\r\n            \t\tlocalDict[_prop_name] = (own(dict, _prop_name) && dict || _keyboardEvent_properties_dictionary)[_prop_name];\r\n            \t}\r\n\r\n            \tvar _ctrlKey = localDict[\"ctrlKey\"]\r\n            \t\t, _shiftKey = localDict[\"shiftKey\"]\r\n            \t\t, _altKey = localDict[\"altKey\"]\r\n            \t\t, _metaKey = localDict[\"metaKey\"]\r\n            \t\t, _altGraphKey = localDict[\"altGraphKey\"]\r\n\r\n            \t\t, _modifiersListArg = _initKeyboardEvent_type > 3 ? (\r\n            \t\t\t(_ctrlKey ? \"Control\" : \"\")\r\n            \t\t\t\t+ (_shiftKey ? \" Shift\" : \"\")\r\n            \t\t\t\t+ (_altKey ? \" Alt\" : \"\")\r\n            \t\t\t\t+ (_metaKey ? \" Meta\" : \"\")\r\n            \t\t\t\t+ (_altGraphKey ? \" AltGraph\" : \"\")\r\n            \t\t\t).trim() : null\r\n\r\n            \t\t, _key = localDict[\"key\"] + \"\"\r\n            \t\t, _char = localDict[\"char\"] + \"\"\r\n            \t\t, _location = localDict[\"location\"]\r\n            \t\t, _keyCode = localDict[\"keyCode\"] || (localDict[\"keyCode\"] = _key && _key.charCodeAt( 0 ) || 0)\r\n            \t\t, _charCode = localDict[\"charCode\"] || (localDict[\"charCode\"] = _char && _char.charCodeAt( 0 ) || 0)\r\n\r\n            \t\t, _bubbles = localDict[\"bubbles\"]\r\n            \t\t, _cancelable = localDict[\"cancelable\"]\r\n\r\n            \t\t, _repeat = localDict[\"repeat\"]\r\n            \t\t, _locale = localDict[\"locale\"]\r\n            \t\t, _view = global\r\n            \t;\r\n\r\n            \tlocalDict[\"which\"] || (localDict[\"which\"] = localDict[\"keyCode\"]);\r\n\r\n                //e.keyCodeVal = _keyCode;\r\n\r\n            \tif( \"initKeyEvent\" in e ) {//FF\r\n            \t\t//https://developer.mozilla.org/en/DOM/event.initKeyEvent\r\n            \t\te.initKeyEvent( type, _bubbles, _cancelable, _view, _ctrlKey, _altKey, _shiftKey, _metaKey, _keyCode, _charCode );\r\n            \t}\r\n            \telse if(  _initKeyboardEvent_type && \"initKeyboardEvent\" in e ) {//https://developer.mozilla.org/en/DOM/KeyboardEvent#initKeyboardEvent()\r\n            \t\tif( _initKeyboardEvent_type == 1 ) { // webkit\r\n            \t\t\t//http://stackoverflow.com/a/8490774/1437207\r\n            \t\t\t//https://bugs.webkit.org/show_bug.cgi?id=13368\r\n            \t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, _view, _key, _location, _ctrlKey, _shiftKey, _altKey, _metaKey, _altGraphKey );\r\n            \t\t}\r\n            \t\telse if( _initKeyboardEvent_type == 2 ) { // old webkit\r\n            \t\t\t//http://code.google.com/p/chromium/issues/detail?id=52408\r\n            \t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, _view, _ctrlKey, _altKey, _shiftKey, _metaKey, _keyCode, _charCode );\r\n            \t\t}\r\n            \t\telse if( _initKeyboardEvent_type == 3 ) { // webkit\r\n            \t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, _view, _key, _location, _ctrlKey, _altKey, _shiftKey, _metaKey, _altGraphKey );\r\n            \t\t}\r\n            \t\telse if( _initKeyboardEvent_type == 4 ) { // IE9\r\n            \t\t\t//http://msdn.microsoft.com/en-us/library/ie/ff975297(v=vs.85).aspx\r\n            \t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, _view, _key, _location, _modifiersListArg, _repeat, _locale );\r\n            \t\t}\r\n            \t\telse { // FireFox|w3c\r\n            \t\t\t//http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent-initKeyboardEvent\r\n            \t\t\t//https://developer.mozilla.org/en/DOM/KeyboardEvent#initKeyboardEvent()\r\n            \t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, _view, _char, _key, _location, _modifiersListArg, _repeat, _locale );\r\n            \t\t}\r\n            \t}\r\n            \telse {\r\n            \t\te.initEvent(type, _bubbles, _cancelable)\r\n            \t}\r\n\r\n            \tfor( _prop_name in _keyboardEvent_properties_dictionary )if( own( _keyboardEvent_properties_dictionary, _prop_name ) ) {\r\n            \t\tif( e[_prop_name] != localDict[_prop_name] ) {\r\n            \t\t\ttry {\r\n            \t\t\t\tdelete e[_prop_name];\r\n            \t\t\t\t_Object_defineProperty( e, _prop_name, { writable: true, \"value\": localDict[_prop_name] } );\r\n            \t\t\t}\r\n            \t\t\tcatch(ex) {\r\n            \t\t\t\t//Some properties is read-only\r\n// console.debug(\"PROP EX: \" + ex);\r\n// e[_prop_name] = _keyCode;\r\n// console.debug(\"PROP AFTER: \" + e[_prop_name]);\r\n            \t\t\t}\r\n\r\n            \t\t}\r\n            \t}\r\n\r\n            \treturn e;\r\n            }\r\n\r\n            //export\r\n            global.crossBrowser_initKeyboardEvent = crossBrowser_initKeyboardEvent;\r\n\r\n            }.call(window);\r\n\r\n\r\n\tKeyboard = {\r\n        resetToDefaults: function()\r\n        {\r\n            // reset current scheme to defaultOptions\r\n            for (prop in Keyboard.defaultOptions)\r\n            {\r\n                if (!Keyboard.defaultOptions.hasOwnProperty(prop)) continue;\r\n\r\n                if (typeof Keyboard.defaultOptions[prop] !== 'string') continue;\r\n\r\n                Keyboard[prop] = Keyboard.defaultOptions[prop];\r\n            }\r\n        },\r\n        resetAccessKeys: function()\r\n        {\r\n            // reset access keys\r\n            var extractAccessKey = function(keyboardShortcut)\r\n            {\r\n                if (!keyboardShortcut || !keyboardShortcut.length) return \"\";\r\n\r\n                var char = keyboardShortcut[keyboardShortcut.length-1];\r\n                if (/^[a-z0-9]+$/i.test(char)) return char;\r\n\r\n                return \"\";\r\n            };\r\n            Keyboard.accesskeys = {};\r\n            for (prop in Keyboard)\r\n            {\r\n                if (!Keyboard.hasOwnProperty(prop)) continue;\r\n\r\n                var str = Keyboard[prop];\r\n\r\n                if (typeof str !== 'string') continue;\r\n\r\n                Keyboard.accesskeys[prop] = extractAccessKey(str);\r\n            }\r\n        },\r\n        applySettings: function(json)\r\n        {\r\n            this.resetToDefaults();\r\n\r\n            if (json && json.keyboard)\r\n            {\r\n                // override with user options\r\n                for (prop in Keyboard)\r\n                {\r\n                    if (!Keyboard.hasOwnProperty(prop)) continue;\r\n\r\n                    if (typeof Keyboard[prop] !== 'string') continue;\r\n\r\n                    if (typeof json.keyboard[prop] !== 'string') continue;\r\n\r\n                    Keyboard[prop] = json.keyboard[prop];\r\n                }\r\n            }\r\n\r\n            this.resetAccessKeys();\r\n        },\r\n        dispatch: function(target, e)\r\n        {\r\n            //THIS FUNCTION NOT REACHED WHEN e.stopPropagation(); INVOKED IN IFRAME's HTML\r\n\r\n            if (e.cancelBubble)\r\n            {\r\n                //WHEN e.cancelBubble = true IN IFRAME's HTML's own event callback\r\n                return;\r\n            }\r\n\r\n            if (e.defaultPrevented)\r\n            {\r\n                //WHEN e.preventDefault() INVOKED IN IFRAME's HTML\r\n                return;\r\n            }\r\n\r\n            if (typeof e.returnValue !== \"undefined\" && !e.returnValue)\r\n            {\r\n                //WHEN e.returnValue = false IN IFRAME's HTML's own event callback\r\n                return;\r\n            }\r\n\r\n            var source = e.srcElement || e.target;\r\n            if (source)\r\n            {\r\n                var parent = source;\r\n                while (parent)\r\n                {\r\n                    var name = parent.nodeName;\r\n                    if (name === \"input\" || name === \"textarea\")\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    if (parent.getAttribute)\r\n                    {\r\n                        var ce = parent.getAttribute(\"contenteditable\");\r\n                        if (ce === \"true\" || ce === \"contenteditable\")\r\n                        {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    if (parent.classList && parent.classList.contains(\"keyboard-input\"))\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    parent = parent.parentNode;\r\n                }\r\n            }\r\n\r\n\r\n            // //var newE = jQuery.extend(true, {}, e);// deep copy\r\n            // var newE = $.extend($.Event(e.type), {}, e);\r\n            //\r\n            // newE.preventDefault();\r\n            // newE.stopPropagation();\r\n            // newE.stopImmediatePropagation();\r\n            //\r\n            // newE.originalEvent.bubbles = false;\r\n            // newE.originalEvent.srcElement = document.documentElement;\r\n            // newE.originalEvent.target = document.documentElement;\r\n            // newE.originalEvent.view = window;\r\n\r\n            var ev = crossBrowser_initKeyboardEvent(e.type, {\r\n                \"bubbles\": true,\r\n                \"cancelable\": false,\r\n\r\n                \"keyCode\": e.keyCode,\r\n                \"charCode\": e.charCode,\r\n                \"which\": e.which,\r\n\r\n                \"ctrlKey\": e.ctrlKey,\r\n                \"shiftKey\": e.shiftKey,\r\n                \"altKey\": e.altKey,\r\n                \"metaKey\": e.metaKey,\r\n\r\n                //https://developer.mozilla.org/en-US/docs/Web/API/event.which\r\n                \"char\": e.char ? e.char : String.fromCharCode(e.charCode), // lower/upper case-sensitive\r\n                \"key\": e.key ? e.key : e.keyCode // case-insensitive\r\n            });\r\n\r\n            //$(target).trigger(e);\r\n            target.dispatchEvent(ev);\r\n        },\r\n        scope: function(scope)\r\n        {\r\n            if (!scope) alert(\"!SCOPE ACTIVATE!\");\r\n\r\n            key.setScope(scope);\r\n        },\r\n        on: function(keys, scope, callback)\r\n        {\r\n            if (!keys) console.error(\"!KEYS!\");\r\n\r\n            if (!keyBindings.hasOwnProperty(scope))\r\n            {\r\n                keyBindings[scope] = [];\r\n            }\r\n            keyBindings[scope].push(keys);\r\n\r\n            key.unbind(keys, scope);\r\n            key(keys, scope, function()\r\n            {\r\n                $(document.body).addClass(\"keyboard\");\r\n                callback();\r\n            });\r\n        },\r\n        off: function(scope)\r\n        {\r\n            if (!scope) alert(\"!SCOPE OFF!\");\r\n\r\n            if (!keyBindings.hasOwnProperty(scope)) return;\r\n\r\n            for (k in keyBindings[scope])\r\n            {\r\n                key.unbind(k, scope);\r\n            }\r\n        },\r\n        i18n:\r\n        {\r\n            ShowSettingsModal: Strings.settings,\r\n\r\n            SettingsModalSave: Strings.settings + \" - \" + Strings.i18n_save_changes,\r\n            SettingsModalClose: Strings.settings + \" - \" + Strings.i18n_close,\r\n\r\n            PagePrevious: Strings.i18n_page_previous,\r\n            PageNext: Strings.i18n_page_next,\r\n            PagePreviousAlt: Strings.i18n_page_previous + \" (access key)\",\r\n            PageNextAlt: Strings.i18n_page_next + \" (access key)\",\r\n\r\n            ToolbarShow: Strings.i18n_toolbar_show,\r\n            ToolbarHide: Strings.i18n_toolbar_hide,\r\n\r\n            FullScreenToggle: Strings.enter_fullscreen + \" / \" + Strings.exit_fullscreen,\r\n\r\n            SwitchToLibrary: Strings.view_library,\r\n\r\n            TocShowHideToggle: Strings.toc,\r\n\r\n            NightTheme: Strings.i18n_arabian_nights,\r\n\r\n            //MediaOverlaysPlayPauseAlt: Strings.i18n_audio_play + \" / \" + Strings.i18n_audio_pause,\r\n            MediaOverlaysPlayPause: Strings.i18n_audio_play + \" / \" + Strings.i18n_audio_pause,\r\n\r\n            MediaOverlaysPrevious: Strings.i18n_audio_previous,\r\n            MediaOverlaysNext: Strings.i18n_audio_next,\r\n\r\n            MediaOverlaysEscape: Strings.i18n_audio_esc,\r\n\r\n            MediaOverlaysRateIncrease: Strings.i18n_audio_rate_increase,\r\n            MediaOverlaysRateDecrease: Strings.i18n_audio_rate_decrease,\r\n            //MediaOverlaysRateIncreaseAlt: \"\",\r\n            //MediaOverlaysRateDecreaseAlt: \"\",\r\n            MediaOverlaysRateReset: Strings.i18n_audio_rate_reset,\r\n\r\n            MediaOverlaysVolumeIncrease: Strings.i18n_audio_volume_increase,\r\n            MediaOverlaysVolumeDecrease: Strings.i18n_audio_volume_decrease,\r\n            //MediaOverlaysVolumeIncreaseAlt: \"\",\r\n            //MediaOverlaysVolumeDecreaseAlt: \"\",\r\n            MediaOverlaysVolumeMuteToggle: Strings.i18n_audio_mute + \" / \" + Strings.i18n_audio_unmute,\r\n\r\n            MediaOverlaysAdvancedPanelShowHide: Strings.i18n_audio_expand,\r\n\r\n            BackgroundAudioPlayPause: Strings.i18n_audio_play_background + \" / \" + Strings.i18n_audio_pause_background\r\n        },\r\n        defaultOptions:  {},\r\n        accesskeys: {}, // single key strokes are dynamically populated, based on the full shortcuts below:\r\n        ShowSettingsModal: 'o', //accesskey'ed\r\n\r\n        SettingsModalSave: 's', //accesskey'ed\r\n        SettingsModalClose: 'c', //accesskey'ed\r\n\r\n        PagePrevious: 'left', // ALT BELOW\r\n        PageNext: 'right', // ALT BELOW\r\n        PagePreviousAlt: '1', //accesskey'ed\r\n        PageNextAlt: '2', //accesskey'ed\r\n\r\n        ToolbarShow: 'v', //accesskey'ed\r\n        ToolbarHide: 'x', //accesskey'ed\r\n\r\n        FullScreenToggle: 'h', //accesskey'ed\r\n\r\n        SwitchToLibrary: 'b', //accesskey'ed\r\n\r\n        TocShowHideToggle: 't', //accesskey'ed\r\n\r\n        NightTheme: 'n', //accesskey'ed\r\n\r\n        MediaOverlaysEscape: 'r', //accesskey'ed\r\n\r\n        //MediaOverlaysPlayPauseAlt: 'p', // ALT BELOW\r\n        MediaOverlaysPlayPause: 'm', //accesskey'ed\r\n\r\n        MediaOverlaysRateIncrease: 'l', //accesskey'ed\r\n        MediaOverlaysRateDecrease: 'j', //accesskey'ed\r\n        //MediaOverlaysRateIncreaseAlt: 'F8', //??\r\n        //MediaOverlaysRateDecreaseAlt: 'shift+F8', //??\r\n        MediaOverlaysRateReset: 'k', //accesskey'ed\r\n\r\n        MediaOverlaysVolumeIncrease: 'w', //accesskey'ed\r\n        MediaOverlaysVolumeDecrease: 'q', //accesskey'ed\r\n        //MediaOverlaysVolumeIncreaseAlt: 'F7', //??\r\n        //MediaOverlaysVolumeDecreaseAlt: 'shift+F7', //??\r\n        MediaOverlaysVolumeMuteToggle: 'a', //accesskey'ed\r\n\r\n        MediaOverlaysPrevious: 'y', //accesskey'ed\r\n        MediaOverlaysNext: 'u', //accesskey'ed\r\n\r\n        MediaOverlaysAdvancedPanelShowHide: 'g', //accesskey'ed\r\n\r\n        BackgroundAudioPlayPause: 'd'\r\n\t};\r\n\r\n    try\r\n    {\r\n        // reset defaultOptions with the hard-coded values\r\n        Keyboard.defaultOptions = {};\r\n        for (prop in Keyboard)\r\n        {\r\n            if (!Keyboard.hasOwnProperty(prop)) continue;\r\n\r\n            if (typeof Keyboard[prop] !== 'string') continue;\r\n\r\n            Keyboard.defaultOptions[prop] = Keyboard[prop];\r\n        }\r\n\r\n        // too early (async reader.options storage lookup)\r\n        // Settings.get('reader', function(json)\r\n        // {\r\n        //    Keyboard.applySettings(json);\r\n        // });\r\n\r\n        //unnecessary\r\n        //Keyboard.resetToDefaults();\r\n\r\n        //necessary!\r\n        Keyboard.resetAccessKeys();\r\n    }\r\n    catch(e)\r\n    {\r\n        console.error(e);\r\n    }\r\n\r\n\treturn Keyboard;\r\n});\r\n\n",
    "define('readium_js_viewer/ReaderSettingsDialog_Keyboard',['hgn!readium_js_viewer_html_templates/settings-keyboard-item.html', 'readium_js_viewer_i18n/Strings', './Dialogs', './storage/Settings', './Keyboard', 'underscore'], function(KeyboardItem, Strings, Dialogs, Settings, Keyboard, _){\r\n\r\n\r\n    var checkKeyboardShortcuts = function($focusedInput, typing)\r\n    {\r\n        var duplicate = false;\r\n        var invalid = false;\r\n\r\n        var $keyboardList = $(\"#keyboard-list\");\r\n\r\n        var wasAlert = $keyboardList.hasClass(\"atLeastOneInvalidOrDuplicateShortcut\");\r\n\r\n        $keyboardList.removeClass(\"atLeastOneInvalidOrDuplicateShortcut\");\r\n\r\n        var alertInvalidKeyboard = $(\"#invalid_keyboard_shortcut_ALERT\")[0];\r\n\r\n        alertInvalidKeyboard.removeAttribute(\"role\");\r\n        alertInvalidKeyboard.removeAttribute(\"aria-live\");\r\n        alertInvalidKeyboard.removeAttribute(\"aria-atomic\");\r\n\r\n        //alertInvalidKeyboard.style.clip = \"rect(0px,0px,0px,0px)\";\r\n\r\n        while (alertInvalidKeyboard.firstChild) {\r\n            alertInvalidKeyboard.removeChild(alertInvalidKeyboard.firstChild);\r\n        }\r\n\r\n        var focusedInputIsInvalid = false;\r\n\r\n        var $inputs = $(\".keyboardInput\");\r\n        $inputs.each(function()\r\n        {\r\n            var $that = $(this);\r\n\r\n            $that.parent().removeClass(\"duplicateShortcut\");\r\n            $that[0].removeAttribute(\"aria-invalid\");\r\n\r\n            checkKeyboardShortcut($that, typing);\r\n\r\n            if ($that.parent().hasClass(\"invalidShortcut\"))\r\n            {\r\n                $that[0].setAttribute(\"aria-invalid\", \"true\");\r\n                invalid = true;\r\n\r\n                if ($focusedInput && $focusedInput.length && $focusedInput[0] === $that[0])\r\n                {\r\n                    focusedInputIsInvalid = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        var focusedInputIsDuplicate = false;\r\n\r\n        for (var i = 0; i < 2; i++) // 2-pass process\r\n        {\r\n            // duplicates\r\n            $inputs.each(function()\r\n            {\r\n                var $that = $(this);\r\n\r\n                var thatInvalid = $that.parent().hasClass(\"invalidShortcut\");\r\n                var thatDuplicate = $that.parent().hasClass(\"duplicateShortcut\");\r\n                var thatOriginal = $that.attr(\"placeholder\");\r\n\r\n                var thatVal = thatInvalid || thatDuplicate ? thatOriginal : $that.attr(\"data-val\");\r\n\r\n                if (thatDuplicate) return true; // continue (second pass)\r\n\r\n                $inputs.each(function()\r\n                {\r\n                    var $self = $(this);\r\n                    if ($self[0] === $that[0]) return true; //continue\r\n\r\n                    var selfOriginal = $self.attr(\"placeholder\");\r\n\r\n                    var selfInvalid = $self.parent().hasClass(\"invalidShortcut\");\r\n\r\n                    var selfDuplicate = $self.parent().hasClass(\"duplicateShortcut\");\r\n\r\n                    var selfVal = selfInvalid || selfDuplicate ? selfOriginal : $self.attr(\"data-val\");\r\n\r\n                    if (thatVal === selfVal)\r\n                    {\r\n                        duplicate = true;\r\n\r\n                        if ($focusedInput && $focusedInput.length && ($focusedInput[0] === $that[0] || $focusedInput[0] === $self[0]))\r\n                        {\r\n                            focusedInputIsDuplicate = true;\r\n                        }\r\n\r\n                        $that[0].setAttribute(\"aria-invalid\", \"true\");\r\n                        $self[0].setAttribute(\"aria-invalid\", \"true\");\r\n\r\n                        if (!$self.parent().hasClass(\"duplicateShortcut\")) $self.parent().addClass(\"duplicateShortcut\");\r\n                        if (!$that.parent().hasClass(\"duplicateShortcut\")) $that.parent().addClass(\"duplicateShortcut\");\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        if (duplicate || invalid)\r\n        {\r\n            $keyboardList.addClass(\"atLeastOneInvalidOrDuplicateShortcut\");\r\n\r\n            if (focusedInputIsInvalid || focusedInputIsDuplicate)\r\n            {\r\n                if (wasAlert)\r\n                    alertInvalidKeyboard.setAttribute(\"aria-live\", \"polite\");\r\n                else\r\n                    alertInvalidKeyboard.setAttribute(\"role\", \"alert\"); //alertInvalidKeyboard.setAttribute(\"aria-live\", \"assertive\");\r\n\r\n                alertInvalidKeyboard.setAttribute(\"aria-atomic\", \"true\");\r\n\r\n                var txt = document.createTextNode(focusedInputIsInvalid ? Strings.i18n_invalid_keyboard_shortcut : Strings.i18n_duplicate_keyboard_shortcut);\r\n                alertInvalidKeyboard.appendChild(txt);\r\n\r\n                //alertInvalidKeyboard.style.clip = \"auto\";\r\n\r\n                alertInvalidKeyboard.style.visibility = \"hidden\";\r\n                alertInvalidKeyboard.style.visibility = \"visible\";\r\n            }\r\n        }\r\n    };\r\n\r\n    var checkKeyboardShortcut = function($input, typing)\r\n    {\r\n        $input.parent().removeClass(\"invalidShortcut\");\r\n        $input.attr(\"data-val\", $input.val());\r\n\r\n        var current = $input.val().toLowerCase().trim();\r\n\r\n        var shift = false;\r\n        var ctrl = false;\r\n        var alt = false;\r\n\r\n        if (current.indexOf(\"shift\") >= 0) shift = true;\r\n        if (current.indexOf(\"ctrl\") >= 0) ctrl = true;\r\n        if (current.indexOf(\"alt\") >= 0) alt = true;\r\n\r\n        var hasPlus = current.lastIndexOf(\"+\") === current.length - 1;\r\n\r\n        current = current.replace(/shift/g, '');\r\n        current = current.replace(/ctrl/g, '');\r\n        current = current.replace(/alt/g, '');\r\n        current = current.replace(/\\+/g, '');\r\n        current = current.replace(/\\s/g, '');\r\n        current = current.trim();\r\n\r\n        if (hasPlus)\r\n        {\r\n            current = current + \"+\";\r\n        }\r\n\r\n        if (current.match(/^[0-9A-Za-z]$/) || current.match(/^backspace$/) || current.match(/^space$/) || current.match(/^return$/) || current.match(/^enter$/) || current.match(/^left$/) || current.match(/^right$/) || current.match(/^up$/) || current.match(/^down$/))\r\n        {\r\n            var normalised = (shift?\"shift + \":\"\") + (ctrl?\"ctrl + \":\"\") + (alt?\"alt + \":\"\") + current;\r\n            $input.attr(\"data-val\", normalised);\r\n            if (!typing) $input.val(normalised);\r\n        }\r\n        else\r\n        {\r\n            $input.parent().addClass(\"invalidShortcut\");\r\n        }\r\n    };\r\n\r\n    var initKeyboardList = function()\r\n    {\r\n        var $keyboardList = $(\"#keyboard-list\");\r\n\r\n        $keyboardList.empty();\r\n\r\n        $keyboardList.append(KeyboardItem({strings: Strings, id: \"TOP\" }));\r\n\r\n        for (prop in Keyboard)\r\n        {\r\n            if (!Keyboard.hasOwnProperty(prop)) continue;\r\n\r\n            if (typeof Keyboard[prop] !== 'string') continue;\r\n\r\n            $keyboardList.append(KeyboardItem({strings: Strings, keyboard: Keyboard, name: prop, shortcut: Keyboard[prop], i18n: Keyboard.i18n[prop], def: Keyboard.defaultOptions[prop] }));\r\n        }\r\n\r\n        $keyboardList.append(KeyboardItem({strings: Strings, id: \"BOTTOM\" }));\r\n\r\n        checkKeyboardShortcuts();\r\n\r\n        var _previousInputVal = undefined;\r\n\r\n        $(\".keyboardInput\").on(\"blur\",\r\n        function(e)\r\n        {\r\n            var $that = $(this);\r\n            _previousInputVal = undefined;\r\n            checkKeyboardShortcuts();\r\n        });\r\n\r\n        $(\".keyboardInput\").on(\"focus\",\r\n        function(e)\r\n        {\r\n            var $that = $(this);\r\n            checkKeyboardShortcuts($that, true);\r\n        });\r\n\r\n        var debouncedKeyboardValidator = _.bind(_.debounce(checkKeyboardShortcuts, 700), this);\r\n\r\n        $(\".keyboardInput\").on(\"keyup\", function(){\r\n            var $that = $(this);\r\n            var val = $that.val();\r\n            if (val !== _previousInputVal)\r\n            {\r\n                debouncedKeyboardValidator($that, true);\r\n            }\r\n            _previousInputVal = val;\r\n        });\r\n\r\n        // KEYSTROKE CAPTURE DOES NOT WORK, BECAUSE HTML ACCESSKEYS GET IN THE WAY (e.g. CTRL ALT M => play audio)\r\n        // var oldScope = undefined;\r\n        // $(\".captureKeyboardShortcut\").on(\"focus\",\r\n        // function(e)\r\n        // {\r\n        //     oldScope = key.getScope();\r\n        //     key.setScope(\"captureKeyboardShortcut\");\r\n        // });\r\n        // $(\".captureKeyboardShortcut\").on(\"blur\",\r\n        // function(e)\r\n        // {\r\n        //     if (oldScope) key.setScope(oldScope);\r\n        // });\r\n        // $(\".captureKeyboardShortcut\").on(\"keydown\",\r\n        // //document.addEventListener('keydown',\r\n        // function()\r\n        // {\r\n        //     // var clazz = (e.sourceElement || e.target).getAttribute(\"class\");\r\n        //     // if (!clazz || clazz.indexOf(\"captureKeyboardShortcut\") < 0) return;\r\n        //\r\n        //     //str.charCodeAt(0);\r\n        //     console.log(key.shift);\r\n        //     console.log(key.control);\r\n        //     console.log(key.alt);\r\n        //     console.log(key.command);\r\n        //     console.log(key.getPressedKeyCodes());\r\n        //\r\n        //     var keys = key.getPressedKeyCodes();\r\n        //     if (keys && keys.length) keys = keys[0];\r\n        //\r\n        //     var keystroke = (key.shift ? \"shift+\" : \"\") + (key.control ? \"ctrl+\" : \"\") + (key.alt ? \"alt+\" : \"\") + (key.command ? \"command+\" : \"\") + keys;\r\n        //\r\n        //     $that = $(this);\r\n        //     var id = $that.attr(\"data-key\");\r\n        //     $input = $(\"input#\"+id);\r\n        //     $input.val(keystroke);\r\n        //\r\n        //     // e.preventDefault();\r\n        //     // e.stopPropagation();\r\n        //     // return false;\r\n        // });\r\n\r\n        $(\".resetKey\").on(\"click\", function()\r\n        {\r\n            $that = $(this);\r\n            var id = $that.attr(\"data-key\");\r\n            if (id)\r\n            {\r\n                var $input = $(\"input#\"+id);\r\n\r\n                //$input.val($input.attr(\"placeholder\"));\r\n                $input.val(Keyboard.defaultOptions[id]);\r\n            }\r\n            else\r\n            {\r\n                //$(\".resetKey[data-key]\").trigger(\"click\");\r\n                $(\".resetKey[data-key]\").each(function()\r\n                {\r\n                    var $self = $(this);\r\n                    var id = $self.attr(\"data-key\");\r\n                    if (id)\r\n                    {\r\n                        var $input = $(\"input#\"+id);\r\n\r\n                        //$input.val($input.attr(\"placeholder\"));\r\n                        $input.val(Keyboard.defaultOptions[id]);\r\n                    }\r\n                });\r\n            }\r\n\r\n            checkKeyboardShortcuts();\r\n        });\r\n    };\r\n\r\n    var saveKeys = function()\r\n    {\r\n        var atLeastOneChanged = false;\r\n        var keys = {};\r\n\r\n        checkKeyboardShortcuts();\r\n        $(\".keyboardInput\").each(function()\r\n        {\r\n            var $that = $(this);\r\n\r\n            var original = $that.attr(\"placeholder\");\r\n            var id = $that.attr(\"id\");\r\n\r\n            var val = $that.attr(\"data-val\");\r\n            //var valShown = $that.val();\r\n\r\n            if ($that.parent().hasClass(\"invalidShortcut\") || $that.parent().hasClass(\"duplicateShortcut\"))\r\n            {\r\n                // if (original === val) return true; // continue (effectively resets to the default valid value)\r\n                val = original;\r\n            }\r\n\r\n            if (!val.length) return true; // continue\r\n\r\n            val = val.toLowerCase();\r\n\r\n            if (original !== val) atLeastOneChanged = true;\r\n\r\n            if (val !== Keyboard.defaultOptions[id])\r\n            {\r\n                keys[id] = val;\r\n            }\r\n        });\r\n        if (atLeastOneChanged)\r\n        {\r\n            // TODO: anything more elegant than alert() ?\r\n            //alert(Strings.i18n_keyboard_reload);\r\n\r\n            Dialogs.showModalMessage(\"Readium - \" + Strings.i18n_keyboard_shortcuts, Strings.i18n_keyboard_reload);\r\n        }\r\n\r\n        return keys;\r\n    };\r\n\r\n\treturn {\r\n\t\tinitKeyboardList : initKeyboardList,\r\n        saveKeys : saveKeys\r\n\t}\r\n});\r\n\n",
    "define('readium_js_viewer/ReaderSettingsDialog',['hgn!readium_js_viewer_html_templates/settings-dialog.html', './ReaderSettingsDialog_Keyboard', 'readium_js_viewer_i18n/Strings', './Dialogs', './storage/Settings', './Keyboard'], function(SettingsDialog, KeyboardSettings, Strings, Dialogs, Settings, Keyboard){\r\n\tvar defaultSettings = {\r\n        fontSize: 100,\r\n        syntheticSpread: \"auto\",\r\n        scroll: \"auto\",\r\n        columnGap: 60\r\n    }\r\n\r\n    var getBookStyles = function(theme){\r\n        var isAuthorTheme = theme === \"author-theme\";\r\n    \tvar $previewText = $('.preview-text');\r\n    \tsetPreviewTheme($previewText, theme);\r\n    \tvar previewStyle = window.getComputedStyle($previewText[0]);\r\n    \tvar bookStyles = [{selector: 'body', declarations: {\r\n            backgroundColor: isAuthorTheme ? \"\" : previewStyle.backgroundColor,\r\n            color: isAuthorTheme ? \"\" : previewStyle.color\r\n        }}];\r\n        return bookStyles;\r\n    }\r\n    var setPreviewTheme = function($previewText, newTheme){\r\n        var previewTheme = $previewText.attr('data-theme');\r\n        $previewText.removeClass(previewTheme);\r\n        $previewText.addClass(newTheme);\r\n        $previewText.attr('data-theme', newTheme);\r\n    }\r\n\r\n    var updateReader = function(reader, readerSettings){\r\n        reader.updateSettings(readerSettings); // triggers on pagination changed\r\n\r\n        if (readerSettings.theme){\r\n            //$(\"html\").addClass(\"_\" + readerSettings.theme);\r\n            $(\"html\").attr(\"data-theme\", readerSettings.theme);\r\n\r\n            var bookStyles = getBookStyles(readerSettings.theme);\r\n            reader.setBookStyles(bookStyles);\r\n            $('#reading-area').css(bookStyles[0].declarations);\r\n        }\r\n    }\r\n\r\n    var updateSliderLabels = function($slider, val, txt, label)\r\n    {\r\n        $slider.attr(\"aria-valuenow\", val+\"\");\r\n        $slider.attr(\"aria-value-now\", val+\"\");\r\n\r\n        $slider.attr(\"aria-valuetext\", txt+\"\");\r\n        $slider.attr(\"aria-value-text\", txt+\"\");\r\n\r\n        $slider.attr(\"title\", label + \" \" + txt);\r\n        $slider.attr(\"aria-label\", label + \" \" + txt);\r\n    };\r\n\r\n\tvar initDialog = function(reader){\r\n\t\t$('#app-container').append(SettingsDialog({strings: Strings, dialogs: Dialogs, keyboard: Keyboard}));\r\n\r\n\t\t$previewText = $('.preview-text');\r\n        $('.theme-option').on('click', function(){\r\n            var newTheme = $(this).attr('data-theme');\r\n            setPreviewTheme($previewText, newTheme);\r\n        });\r\n\r\n        var $marginSlider = $(\"#margin-size-input\");\r\n        $marginSlider.on(\"change\",\r\n        function() {\r\n            var val = $marginSlider.val();\r\n\r\n            updateSliderLabels($marginSlider, val, val + \"px\", Strings.i18n_margins);\r\n        }\r\n        );\r\n\r\n        var $fontSizeSlider = $(\"#font-size-input\");\r\n        $fontSizeSlider.on('change', function(){\r\n            var fontSize = $fontSizeSlider.val();\r\n\r\n            $previewText.css({fontSize: (fontSize/100) + 'em'});\r\n\r\n            updateSliderLabels($fontSizeSlider, fontSize, fontSize + '%', Strings.i18n_font_size);\r\n        });\r\n\r\n        $('#tab-butt-main').on('click', function(){\r\n            $(\"#tab-keyboard\").attr('aria-expanded', \"false\");\r\n            $(\"#tab-main\").attr('aria-expanded', \"true\");\r\n        });\r\n        $('#tab-butt-keys').on('click', function(){\r\n            $(\"#tab-main\").attr('aria-expanded', \"false\");\r\n            $(\"#tab-keyboard\").attr('aria-expanded', \"true\");\r\n        });\r\n        $('#buttSave').on('keydown',function(evt) {\r\n            if(evt.which === 9 && !(evt.shiftKey | evt.ctrlKey | evt.metaKey | evt.altKey)) { // TAB pressed\r\n              evt.preventDefault();\r\n              $('#closeSettingsCross').focus();\r\n            }\r\n        });\r\n        $('#closeSettingsCross').on('keydown',function(evt) {\r\n            if(evt.which === 9 && evt.shiftKey) { // shift-TAB pressed\r\n              evt.preventDefault();\r\n              $('#buttSave').focus();\r\n            }\r\n        });\r\n\r\n        $('#settings-dialog').on('hide.bs.modal', function(){ // IMPORTANT: not \"hidden.bs.modal\"!! (because .off() in\r\n\r\n            // Safety: \"save\" button click\r\n            setTimeout(function(){\r\n                $(\"#keyboard-list\").empty();\r\n            }, 500);\r\n        });\r\n\r\n        $('#settings-dialog').on('show.bs.modal', function(){ // IMPORTANT: not \"shown.bs.modal\"!! (because .off() in library vs. reader context)\r\n\r\n            $('#tab-butt-main').trigger(\"click\");\r\n            KeyboardSettings.initKeyboardList();\r\n\r\n            setTimeout(function(){ $('#closeSettingsCross')[0].focus(); }, 1000); //tab-butt-main\r\n\r\n            Settings.get('reader', function(readerSettings){\r\n                readerSettings = readerSettings || defaultSettings;\r\n                for (prop in defaultSettings)\r\n                {\r\n                    if (defaultSettings.hasOwnProperty(prop) && !readerSettings.hasOwnProperty(prop) && !readerSettings[prop])\r\n                    {\r\n                        readerSettings[prop] = defaultSettings[prop];\r\n                    }\r\n                }\r\n\r\n                $fontSizeSlider.val(readerSettings.fontSize);\r\n                updateSliderLabels($fontSizeSlider, readerSettings.fontSize, readerSettings.fontSize + '%', Strings.i18n_font_size);\r\n\r\n\r\n                $marginSlider.val(readerSettings.columnGap);\r\n                updateSliderLabels($marginSlider, readerSettings.columnGap, readerSettings.columnGap + \"px\", Strings.i18n_margins);\r\n\r\n                if (readerSettings.syntheticSpread == \"double\"){\r\n                    $('#two-up-option input').prop('checked', true);\r\n                }\r\n                else if (readerSettings.syntheticSpread == \"single\"){\r\n                    $('#one-up-option input').prop('checked', true);\r\n                }\r\n                else {\r\n                    $('#spread-default-option input').prop('checked', true);\r\n                }\r\n\r\n                if(readerSettings.scroll == \"scroll-doc\") {\r\n                    $('#scroll-doc-option input').prop('checked', true);\r\n                }\r\n                else if(readerSettings.scroll == \"scroll-continuous\") {\r\n                    $('#scroll-continuous-option input').prop('checked', true);\r\n                }\r\n                else {\r\n                    $('#scroll-default-option input').prop('checked', true);\r\n                }\r\n\r\n                if (readerSettings.pageTransition === 0)\r\n                {\r\n                    $('#pageTransition-1-option input').prop('checked', true);\r\n                }\r\n                else if (readerSettings.pageTransition === 1)\r\n                {\r\n                    $('#pageTransition-2-option input').prop('checked', true);\r\n                }\r\n                else if (readerSettings.pageTransition === 2)\r\n                {\r\n                    $('#pageTransition-3-option input').prop('checked', true);\r\n                }\r\n                else if (readerSettings.pageTransition === 3)\r\n                {\r\n                    $('#pageTransition-4-option input').prop('checked', true);\r\n                }\r\n                else\r\n                {\r\n                    $('#pageTransition-none-option input').prop('checked', true);\r\n                }\r\n\r\n                if (readerSettings.theme){\r\n                    setPreviewTheme($previewText, readerSettings.theme);\r\n                }\r\n\r\n                $previewText.css({fontSize: (readerSettings.fontSize/100) + 'em'});\r\n            });\r\n        });\r\n\r\n        var save = function(){\r\n\r\n            var readerSettings = {\r\n                fontSize: Number($fontSizeSlider.val()),\r\n                syntheticSpread: \"auto\",\r\n                columnGap: Number($marginSlider.val()),\r\n                scroll: \"auto\"\r\n            };\r\n\r\n            if($('#scroll-doc-option input').prop('checked')) {\r\n                readerSettings.scroll = \"scroll-doc\";\r\n            }\r\n            else if($('#scroll-continuous-option input').prop('checked')) {\r\n                readerSettings.scroll = \"scroll-continuous\";\r\n            }\r\n\r\n            if($('#two-up-option input').prop('checked')) {\r\n                readerSettings.syntheticSpread = \"double\";\r\n            }\r\n            else if($('#one-up-option input').prop('checked')) {\r\n                readerSettings.syntheticSpread = \"single\";\r\n            }\r\n\r\n            if($('#pageTransition-1-option input').prop('checked')) {\r\n                readerSettings.pageTransition = 0;\r\n            } else if($('#pageTransition-2-option input').prop('checked')) {\r\n                readerSettings.pageTransition = 1;\r\n            } else if($('#pageTransition-3-option input').prop('checked')) {\r\n                readerSettings.pageTransition = 2;\r\n            } else if($('#pageTransition-4-option input').prop('checked')) {\r\n                readerSettings.pageTransition = 3;\r\n            } else {\r\n                readerSettings.pageTransition = -1;\r\n            }\r\n\r\n            readerSettings.theme = $previewText.attr('data-theme');\r\n            if (reader){\r\n               updateReader(reader, readerSettings);\r\n\t        }\r\n\r\n\r\n            var keys = KeyboardSettings.saveKeys();\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                for (prop in readerSettings)\r\n                {\r\n                    if (readerSettings.hasOwnProperty(prop))\r\n                    {\r\n                        json[prop] = readerSettings[prop];\r\n                    }\r\n                }\r\n\r\n                json.keyboard = keys;\r\n                // if (keys)\r\n                // {\r\n                //     for (prop in keys)\r\n                //     {\r\n                //         if (keys.hasOwnProperty(prop))\r\n                //         {\r\n                //             json.keyboard[prop] = keys[prop];\r\n                //         }\r\n                //     }\r\n                // }\r\n\r\n                Settings.put('reader', json);\r\n\r\n                setTimeout(function()\r\n                {\r\n                    Keyboard.applySettings(json);\r\n                }, 100);\r\n            });\r\n        };\r\n\r\n        Keyboard.on(Keyboard.NightTheme, 'settings', function(){\r\n\r\n                Settings.get('reader', function(json)\r\n                {\r\n                    if (!json)\r\n                    {\r\n                        json = {};\r\n                    }\r\n\r\n                    var isNight = json.theme === \"night-theme\";\r\n                    json.theme = isNight ? \"author-theme\" : \"night-theme\";\r\n\r\n                    Settings.put('reader', json);\r\n\r\n                    if (reader) updateReader(reader, json);\r\n                });\r\n        });\r\n\r\n        Keyboard.on(Keyboard.SettingsModalSave, 'settings', function() {\r\n            save();\r\n            $('#settings-dialog').modal('hide');\r\n        });\r\n\r\n        Keyboard.on(Keyboard.SettingsModalClose, 'settings', function() {\r\n            $('#settings-dialog').modal('hide');\r\n        });\r\n\r\n        $('#settings-dialog .btn-primary').on('click', save);\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitDialog : initDialog,\r\n\t\tupdateReader : updateReader,\r\n\t\tdefaultSettings : defaultSettings\r\n\t}\r\n});\r\n\n",
    "define('readium_js_viewer/analytics/Analytics',[],function(){\r\n\treturn{\r\n\t\ttrackView : function(){},\r\n\t\tsendEvent : function(){}\r\n\t}\r\n});\n",
    "define('readium_js_viewer/versioning/ReadiumVersioning',['readium_js/Readium'], function(Readium){\r\n\r\n\tvar PackagedVersioning = {\r\n\t\tgetVersioningInfo : function(callback){\r\n\t\t\tvar versionInfo = {};\r\n\r\n            versionInfo = Readium.version;\r\n            versionInfo.dateTimeString = new Date(Readium.version.readiumJsViewer.timestamp).toString();\r\n\r\n\t\t\tcallback(versionInfo);\r\n\t\t}\r\n\t}\r\n\treturn PackagedVersioning;\r\n});\r\n\n",
    "define('readium_js_viewer/EpubLibrary',[\r\n'jquery',\r\n'bootstrap',\r\n'bootstrapA11y',\r\n'StorageManager',\r\n'./storage/Settings',\r\n'./EpubLibraryManager',\r\n'readium_js_viewer_i18n/Strings',\r\n'hgn!readium_js_viewer_html_templates/library-navbar.html',\r\n'hgn!readium_js_viewer_html_templates/library-body.html',\r\n'hgn!readium_js_viewer_html_templates/empty-library.html',\r\n'hgn!readium_js_viewer_html_templates/library-item.html',\r\n'hgn!readium_js_viewer_html_templates/details-dialog.html',\r\n'hgn!readium_js_viewer_html_templates/about-dialog.html',\r\n'hgn!readium_js_viewer_html_templates/details-body.html',\r\n'hgn!readium_js_viewer_html_templates/add-epub-dialog.html',\r\n'./ReaderSettingsDialog',\r\n'./Dialogs',\r\n'./workers/Messages',\r\n'./analytics/Analytics',\r\n'./Keyboard',\r\n'./versioning/ReadiumVersioning'],\r\n\r\nfunction(\r\n$,\r\nbootstrap,\r\nbootstrapA11y,\r\nStorageManager,\r\nSettings,\r\nlibraryManager,\r\nStrings,\r\nLibraryNavbar,\r\nLibraryBody,\r\nEmptyLibrary,\r\nLibraryItem,\r\nDetailsDialog,\r\nAboutDialog,\r\nDetailsBody,\r\nAddEpubDialog,\r\nSettingsDialog,\r\nDialogs,\r\nMessages,\r\nAnalytics,\r\nKeyboard,\r\nVersioning){\r\n\r\n    var detailsDialogStr = DetailsDialog({strings: Strings});\r\n\r\n\tvar heightRule,\r\n\t\tnoCoverRule;\r\n\t\t//maxHeightRule\r\n\r\n\tvar findHeightRule = function(){\r\n\r\n \t\tvar styleSheet=document.styleSheets[0];\r\n \t\tvar ii=0;\r\n \t\tvar cssRule;\r\n        do {\r\n            if (styleSheet.cssRules) {\r\n            \tcssRule = styleSheet.cssRules[ii];\r\n            } else {\r\n            \tcssRule = styleSheet.rules[ii];\r\n            }\r\n            if (cssRule && cssRule.selectorText)  {\r\n            \tif (cssRule.selectorText.toLowerCase()=='.library-item') {\r\n                    heightRule = cssRule;\r\n                }\r\n                // else if (cssRule.selectorText.toLowerCase()=='.library-item img') {\r\n                //     maxHeightRule = cssRule;\r\n                // }\r\n                else if (cssRule.selectorText.toLowerCase() == 'body:not(.list-view) .library-item .no-cover'){\r\n                \tnoCoverRule = cssRule;\r\n                }\r\n\r\n            }\r\n            ii++;\r\n        } while (cssRule);\r\n   \t}\r\n\r\n\r\n\tvar setItemHeight = function(){\r\n        if (!heightRule || !noCoverRule) return;\r\n\r\n\t\tvar medWidth = 2,\r\n\t\t\tsmWidth = 3,\r\n\t\t\txsWidth = 4,\r\n\t\t\trowHeight = 0,\r\n\t\t\timgWidth = 0,\r\n\t\t\tscale = 1;\r\n\r\n\t\tvar winWidth = window.innerWidth;\r\n\r\n\t\tif (winWidth >= 992){\r\n\t\t\timgWidth = winWidth * (medWidth/12) - 30;\r\n\t\t\trowHeight = 1.33 * imgWidth + 60;\r\n\t\t}\r\n\t\telse if (winWidth >= 768){\r\n\t\t\timgWidth = winWidth * (smWidth/12) - 30;\r\n\t\t\trowHeight = 1.33 * imgWidth + 60;\r\n\t\t}\r\n\t\telse{\r\n\t\t\timgWidth = winWidth * (xsWidth/12) - 30;\r\n\t\t\trowHeight = 1.33 * imgWidth + 20;\r\n\t\t}\r\n\t\theightRule.style.height  = rowHeight + 'px';\r\n\t\tscale = imgWidth/300;\r\n\r\n\t\tnoCoverRule.style.width = imgWidth + 'px';\r\n\t\tnoCoverRule.style.height = 1.33 * imgWidth + 'px';\r\n\t\tnoCoverRule.style.fontSize = 40 * scale + 'px';\r\n\t\t//maxHeightRule.style.height = 1.33 * imgWidth + 'px';\r\n\t\t//maxHeightRule.style.width = imgWidth + 'px';\r\n\t};\r\n\r\n\tvar showDetailsDialog = function(details){\r\n\t\tvar bodyStr = DetailsBody({\r\n\t\t\tdata: details,\r\n\t\t\tstrings: Strings\r\n\t\t});\r\n\r\n\t\t$('.details-dialog .modal-body').html(bodyStr);\r\n\t\t$('.details-dialog .delete').on('click', function(){\r\n\t\t\t$('.details-dialog').modal('hide');\r\n\t\t\tvar success = function(){\r\n\t\t\t\tlibraryManager.retrieveAvailableEpubs(loadLibraryItems);\r\n\t\t\t\tDialogs.closeModal();\r\n\t\t\t}\r\n\r\n\t\t\tvar promptMsg = Strings.i18n_are_you_sure + ' \\'' + details.title + '\\'';\r\n\r\n\t\t\tDialogs.showModalPrompt(Strings.delete_dlg_title, promptMsg,\r\n\t\t\t\t\t\t\t\t\tStrings.i18n_delete, Strings.i18n_cancel,\r\n\t\t\t\t\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\t\t\t\t\tDialogs.showModalProgress(Strings.delete_progress_title, '');\r\n\t\t\t\t\t\t\t\t\t\tDialogs.updateProgress(100, Messages.PROGRESS_DELETING, details.title, true);\r\n\t\t\t\t\t\t\t\t\t\tlibraryManager.deleteEpubWithId(details.rootDir, success, showError)\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tvar showError = function(errorCode){\r\n\t\tDialogs.showError(errorCode);\r\n\t}\r\n\r\n\tvar loadDetails = function(e){\r\n\t\tvar $this = $(this),\r\n\t\t\turl = $this.attr('data-package'),\r\n\t\t\tbookRoot = $this.attr('data-root'),\r\n\t\t\trootDir = $this.attr('data-root-dir'),\r\n\t\t\tnoCoverBg = $this.attr('data-no-cover');\r\n\r\n\t\t$('.details-dialog').remove();\r\n\r\n        $('.details-dialog').off('hidden.bs.modal');\r\n        $('.details-dialog').off('shown.bs.modal');\r\n\r\n\t\t$('#app-container').append(detailsDialogStr);\r\n\r\n        $('#details-dialog').on('hidden.bs.modal', function () {\r\n            Keyboard.scope('library');\r\n\r\n            setTimeout(function(){ $this.focus(); }, 50);\r\n        });\r\n\t\t$('#details-dialog').on('shown.bs.modal', function(){\r\n            Keyboard.scope('details');\r\n\t\t});\r\n\r\n\r\n\t\t$('.details-dialog').modal();\r\n\t\tlibraryManager.retrieveFullEpubDetails(url, bookRoot, rootDir, noCoverBg, showDetailsDialog, showError);\r\n\t}\r\n\r\n\tvar loadLibraryItems = function(epubs){\r\n\t\t$('#app-container .library-items').remove();\r\n\t\t$('#app-container').append(LibraryBody({}));\r\n\t\tif (!epubs.length){\r\n\t\t\t$('#app-container .library-items').append(EmptyLibrary({strings: Strings}));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar count = 0;\r\n\t\tepubs.forEach(function(epub){\r\n\t\t\tvar noCoverBackground = 'images/covers/cover' + ((count++ % 8) + 1) + '.jpg';\r\n\t\t\t$('.library-items').append(LibraryItem({count:{n: count, tabindex:count*2+99}, epub: epub, strings: Strings, noCoverBackground: noCoverBackground}));\r\n\t\t});\r\n\t\t$('.details').on('click', loadDetails);\r\n\t}\r\n\r\n\tvar readClick = function(e){\r\n\r\n\t\tvar epubUrl = $(this).attr('data-book');\r\n\t\t$(window).triggerHandler('readepub', [epubUrl]);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar unloadLibraryUI = function(){\r\n\r\n        // needed only if access keys can potentially be used to open a book while a dialog is opened, because keyboard.scope() is not accounted for with HTML access keys :(\r\n        Dialogs.closeModal();\r\n        Dialogs.reset();\r\n        $('.modal-backdrop').remove();\r\n\r\n        Keyboard.off('library');\r\n        Keyboard.off('settings');\r\n\r\n        $('#settings-dialog').off('hidden.bs.modal');\r\n        $('#settings-dialog').off('shown.bs.modal');\r\n\r\n        $('#about-dialog').off('hidden.bs.modal');\r\n        $('#about-dialog').off('shown.bs.modal');\r\n\r\n        $('#add-epub-dialog').off('hidden.bs.modal');\r\n        $('#add-epub-dialog').off('shown.bs.modal');\r\n\r\n        $('.details-dialog').off('hidden.bs.modal');\r\n        $('.details-dialog').off('shown.bs.modal');\r\n\r\n\t\t$(window).off('resize');\r\n\t\t$(document.body).off('click');\r\n\t\t$(window).off('storageReady');\r\n\t\t$('#app-container').attr('style', '');\r\n\t}\r\n\r\n\tvar promptForReplace = function(originalData, replaceCallback, keepBothCallback){\r\n\t\tSettings.get('replaceByDefault', function(val){\r\n\t\t\tif (val === 'true'){\r\n\t\t\t\treplaceCallback()\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tkeepBothCallback();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tvar handleLibraryChange = function(){\r\n\t\tDialogs.closeModal();\r\n\t\tlibraryManager.retrieveAvailableEpubs(loadLibraryItems);\r\n\t}\r\n\r\n\tvar handleFileSelect = function(evt){\r\n\t\tvar file = evt.target.files[0];\r\n\t\t$('#add-epub-dialog').modal('hide');\r\n\t\tDialogs.showModalProgress(Strings.import_dlg_title, Strings.import_dlg_message);\r\n\t\tlibraryManager.handleZippedEpub({\r\n\t\t\tfile: file,\r\n\t\t\toverwrite: promptForReplace,\r\n\t\t\tsuccess: handleLibraryChange,\r\n\t\t\tprogress: Dialogs.updateProgress,\r\n\t\t\terror: showError\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tvar handleDirSelect = function(evt){\r\n\t\tvar files = evt.target.files;\r\n\t\t$('#add-epub-dialog').modal('hide');\r\n\t\tDialogs.showModalProgress(Strings.import_dlg_title, Strings.import_dlg_message);\r\n\t\tlibraryManager.handleDirectoryImport({\r\n\t\t\tfiles: files,\r\n\t\t\toverwrite: promptForReplace,\r\n\t\t\tsuccess: handleLibraryChange,\r\n\t\t\tprogress: Dialogs.updateProgress,\r\n\t\t\terror: showError\r\n\t\t});\r\n\t}\r\n\tvar handleUrlSelect = function(){\r\n\t\tvar url = $('#url-upload').val();\r\n\t\t$('#add-epub-dialog').modal('hide');\r\n\t\tDialogs.showModalProgress(Strings.import_dlg_title, Strings.import_dlg_message);\r\n\t\tlibraryManager.handleUrlImport({\r\n\t\t\turl: url,\r\n\t\t\toverwrite: promptForReplace,\r\n\t\t\tsuccess: handleLibraryChange,\r\n\t\t\tprogress: Dialogs.updateProgress,\r\n\t\t\terror: showError\r\n\t\t});\r\n\t}\r\n\r\n\tvar doMigration = function(){\r\n\t\tDialogs.showModalProgress(Strings.migrate_dlg_title, Strings.migrate_dlg_message);\r\n\t\tlibraryManager.handleMigration({\r\n\t\t\tsuccess: function(){\r\n\t\t\t\tSettings.put('needsMigration', false, $.noop);\r\n\t\t\t\thandleLibraryChange();\r\n\t\t\t},\r\n\t\t\tprogress: Dialogs.updateProgress,\r\n\t\t\terror: showError\r\n\t\t});\r\n\t}\r\n\r\n\tvar loadLibraryUI = function(){\r\n\r\n\t\tDialogs.reset();\r\n\r\n        Keyboard.scope('library');\r\n\r\n\t\tAnalytics.trackView('/library');\r\n\t\tvar $appContainer = $('#app-container');\r\n\t\t$appContainer.empty();\r\n\t\tSettingsDialog.initDialog();\r\n\t\t$appContainer.append(AddEpubDialog({\r\n\t\t\tcanHandleUrl : libraryManager.canHandleUrl(),\r\n\t\t\tcanHandleDirectory : libraryManager.canHandleDirectory(),\r\n            strings: Strings\r\n\t\t}));\r\n\t\tVersioning.getVersioningInfo(function(version){\r\n\t\t\t$appContainer.append(AboutDialog({strings: Strings, viewer: version.readiumJsViewer, readium: version.readiumJs, sharedJs: version.readiumSharedJs, cfiJs: version.readiumCfiJs}));\r\n\t\t});\r\n\r\n\r\n        $('#about-dialog').on('hidden.bs.modal', function () {\r\n            Keyboard.scope('library');\r\n\r\n            setTimeout(function(){ $(\"#aboutButt1\").focus(); }, 50);\r\n        });\r\n\t\t$('#about-dialog').on('shown.bs.modal', function(){\r\n            Keyboard.scope('about');\r\n\t\t});\r\n\r\n        $('#add-epub-dialog').on('hidden.bs.modal', function () {\r\n            Keyboard.scope('library');\r\n\r\n            setTimeout(function(){ $(\"#addbutt\").focus(); }, 50);\r\n        });\r\n\t\t$('#add-epub-dialog').on('shown.bs.modal', function(){\r\n            Keyboard.scope('add');\r\n\r\n\t\t\t$('#add-epub-dialog input').val('');\r\n\r\n            setTimeout(function(){ $('#closeAddEpubCross')[0].focus(); }, 1000);\r\n\t\t});\r\n\t\t$('#url-upload').on('keyup', function(){\r\n\t\t\tvar val = $(this).val();\r\n\t\t\tif (val && val.length){\r\n\t\t\t\t$('#add-epub-dialog .add-book').prop('disabled', false);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$('#add-epub-dialog .add-book').prop('disabled', true);\r\n\t\t\t}\r\n\t\t});\r\n\t\t$('.add-book').on('click', handleUrlSelect);\r\n\t\t$('nav').empty();\r\n        $('nav').attr(\"aria-label\", Strings.i18n_toolbar);\r\n\t\t$('nav').append(LibraryNavbar({strings: Strings, dialogs: Dialogs, keyboard: Keyboard}));\r\n\t\t$('.icon-list-view').on('click', function(){\r\n\t\t\t$(document.body).addClass('list-view');\r\n            setTimeout(function(){ $('.icon-thumbnails')[0].focus(); }, 50);\r\n\t\t});\r\n\t\t$('.icon-thumbnails').on('click', function(){\r\n\t\t\t$(document.body).removeClass('list-view');\r\n            setTimeout(function(){ $('.icon-list-view')[0].focus(); }, 50);\r\n\t\t});\r\n\t\tfindHeightRule();\r\n\t\tsetItemHeight();\r\n\t\tStorageManager.initStorage(function(){\r\n\t\t\tlibraryManager.retrieveAvailableEpubs(loadLibraryItems);\r\n\t\t}, showError);\r\n\r\n        Keyboard.on(Keyboard.ShowSettingsModal, 'library', function(){$('#settings-dialog').modal(\"show\");});\r\n\r\n\t\t$(window).trigger('libraryUIReady');\r\n\t\t$(window).on('resize', setItemHeight);\r\n\r\n\t\tvar setAppSize = function(){\r\n            var appHeight = $(document.body).height() - $('#app-container')[0].offsetTop;\r\n            $('#app-container').height(appHeight);\r\n        }\r\n        $(window).on('resize', setAppSize);\r\n        $('#app-container').css('overflowY', 'auto');\r\n\r\n        setAppSize();\r\n\t\t$(document.body).on('click', '.read', readClick);\r\n\t\t$('#epub-upload').on('change', handleFileSelect);\r\n\t\t$('#dir-upload').on('change', handleDirSelect);\r\n\r\n\t\tdocument.title = Strings.i18n_readium_library;\r\n\r\n        $('#settings-dialog').on('hidden.bs.modal', function () {\r\n\r\n            Keyboard.scope('library');\r\n\r\n            setTimeout(function(){ $(\"#settbutt1\").focus(); }, 50);\r\n\r\n            $(\"#buttSave\").removeAttr(\"accesskey\");\r\n            $(\"#buttClose\").removeAttr(\"accesskey\");\r\n        });\r\n        $('#settings-dialog').on('shown.bs.modal', function () {\r\n\r\n            Keyboard.scope('settings');\r\n\r\n            $(\"#buttSave\").attr(\"accesskey\", Keyboard.accesskeys.SettingsModalSave);\r\n            $(\"#buttClose\").attr(\"accesskey\", Keyboard.accesskeys.SettingsModalClose);\r\n        });\r\n\r\n\r\n        //async in Chrome\r\n\t\tSettings.get(\"needsMigration\", function(needsMigration){\r\n\t\t\tif (needsMigration){\r\n\t\t\t\tdoMigration();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n    var applyKeyboardSettingsAndLoadUi = function(data)\r\n    {\r\n        // override current scheme with user options\r\n        Settings.get('reader', function(json)\r\n        {\r\n           Keyboard.applySettings(json);\r\n\r\n           loadLibraryUI(data);\r\n        });\r\n    };\r\n    window.setReplaceByDefault = function(replace){\r\n        Settings.put('replaceByDefault', String(replace));\r\n    }\r\n\treturn {\r\n        loadUI : applyKeyboardSettingsAndLoadUi,\r\n        unloadUI : unloadLibraryUI\r\n\t};\r\n});\r\n\n",
    "define('readium_js_viewer/Spinner',['spin'], function(Spinner){\r\n\tvar opts = {\r\n      lines: 17, // The number of lines to draw\r\n      length: 0, // The length of each line\r\n      width: 10, // The line thickness\r\n      radius: 48, // The radius of the inner circle\r\n      corners: 1, // Corner roundness (0..1)\r\n      rotate: 0, // The rotation offset\r\n      direction: 1, // 1: clockwise, -1: counterclockwise\r\n      color: '#000', // #rgb or #rrggbb or array of colors\r\n      speed: 1, // Rounds per second\r\n      trail: 66, // Afterglow percentage\r\n      shadow: false, // Whether to render a shadow\r\n      hwaccel: false, // Whether to use hardware acceleration\r\n      className: 'spinner', // The CSS class to assign to the spinner\r\n      zIndex: 2e9, // The z-index (defaults to 2000000000)\r\n      top: '50%', // Top position relative to parent in px\r\n      left: '50%' // Left position relative to parent in px\r\n    };\r\n    return new Spinner(opts);\r\n});\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/reader-navbar.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"btn-group navbar-left\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <!-- <button type=\\\"button\\\" class=\\\"btn btn-default icon icon-show-hide\\\"></button>  -->\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"aboutButt1\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-logo\\\" data-toggle=\\\"modal\\\" data-target=\\\"#about-dialog\\\" title=\\\"\");t.b(t.v(t.d(\"strings.about\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.about\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"icon-readium\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttShowToolBar\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:1px;height=1px;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.ToolbarShow\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.ToolbarShow\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.ToolbarShow\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttHideToolBar\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.ToolbarHide\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.ToolbarHide\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.ToolbarHide\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttNightTheme\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.NightTheme\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.NightTheme\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.NightTheme\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttRatePlus\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateIncrease\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateIncrease\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysRateIncrease\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttRateMinus\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateDecrease\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateDecrease\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysRateDecrease\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttVolumePlus\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeIncrease\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeIncrease\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysVolumeIncrease\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"buttVolumeMinus\\\" style=\\\"opacity:0;visibility:hidden;border:0;outline:0;padding:0;margin:0;width:0;height=0;\\\" tabindex=\\\"-1\\\" aria-hidden=\\\"true\\\" type=\\\"button\\\" title=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeDecrease\",c,p,0)));t.b(\"\\\" aria-label=\\\"access key \");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeDecrease\",c,p,0)));t.b(\"\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysVolumeDecrease\",c,p,0)));t.b(\"\\\"> </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"btn-group navbar-right\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"    <div id=\\\"backgroundAudioTrack-div\\\">\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"backgroundAudioTrack-button-play\\\" type=\\\"button\\\" class=\\\"btn icon-play-audio-background\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_play_background\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.BackgroundAudioPlayPause\",c,p,0)));t.b(\"]\\\"  aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_play_background\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.BackgroundAudioPlayPause\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.BackgroundAudioPlayPause\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-music\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"backgroundAudioTrack-button-pause\\\" type=\\\"button\\\" class=\\\"btn icon-pause-audio-background\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_pause_background\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.BackgroundAudioPlayPause\",c,p,0)));t.b(\"]\\\"  aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_pause_background\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.BackgroundAudioPlayPause\",c,p,0)));t.b(\"]\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-volume-up\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <!--Audioplayer Controls START-->\\r\");t.b(\"\\n\" + i);t.b(\"    <div id=\\\"audioplayer\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-collapse-audio\\\" type=\\\"button\\\" class=\\\"btn icon-collapse-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_collapse\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysAdvancedPanelShowHide\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_collapse\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysAdvancedPanelShowHide\",c,p,0)));t.b(\"]\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-open\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-expand-audio\\\" type=\\\"button\\\" class=\\\"btn icon-expand-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_expand\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysAdvancedPanelShowHide\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_expand\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysAdvancedPanelShowHide\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysAdvancedPanelShowHide\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-save\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-previous-audio\\\" type=\\\"button\\\" class=\\\"btn icon-previous-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPrevious\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPrevious\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysPrevious\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-backward\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-play-audio\\\" type=\\\"button\\\" class=\\\"btn icon-play-audio\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_play\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPlayPause\",c,p,0)));t.b(\"]\\\"  aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_play\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPlayPause\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysPlayPause\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-play\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-pause-audio\\\" type=\\\"button\\\" class=\\\"btn icon-pause-audio\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_pause\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPlayPause\",c,p,0)));t.b(\"]\\\"  aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_pause\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysPlayPause\",c,p,0)));t.b(\"]\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-pause\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-next-audio\\\" type=\\\"button\\\" class=\\\"btn icon-next-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysNext\",c,p,0)));t.b(\"]\\\" arial-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysNext\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysNext\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-forward\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <div id=\\\"audioResponsive\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-audio-volume-mute\\\" type=\\\"button\\\" class=\\\"btn icon-audio-volume-mute\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_mute\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeMuteToggle\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_mute\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeMuteToggle\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysVolumeMuteToggle\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-volume-up\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-audio-volume-unmute\\\" type=\\\"button\\\" class=\\\"btn icon-audio-volume-unmute\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_unmute\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeMuteToggle\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_unmute\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeMuteToggle\",c,p,0)));t.b(\"]\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <span class=\\\"glyphicon glyphicon-volume-off\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"        <input tabindex=\\\"1\\\" id=\\\"volume-range-slider\\\" type=\\\"range\\\" role=\\\"slider\\\" min=\\\"0\\\" aria-value-min=\\\"0\\\" aria-valuemin=\\\"0\\\" max=\\\"100\\\" aria-value-max=\\\"100\\\" aria-valuemax=\\\"100\\\" value=\\\"100\\\" aria-valuenow=\\\"100\\\" aria-value-now=\\\"100\\\" aria-valuetext=\\\"100%\\\" aria-value-text=\\\"100%\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_volume\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeDecrease\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeIncrease\",c,p,0)));t.b(\"]\\\" arial-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_volume\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeDecrease\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysVolumeIncrease\",c,p,0)));t.b(\"]\\\" />\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" tabindex=\\\"1\\\" id=\\\"btn-touch-audio-enable\\\" type=\\\"button\\\" class=\\\"btn icon-touch-audio-enable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_touch_enable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_touch_enable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"            <span id=\\\"icon-touch-off-hand\\\" class=\\\"glyphicon glyphicon-hand-up\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <span id=\\\"icon-touch-off\\\" class=\\\"glyphicon glyphicon-remove\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <button tabindex=\\\"1\\\" id=\\\"btn-touch-audio-disable\\\" type=\\\"button\\\" class=\\\"btn icon-touch-audio-disable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_touch_disable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_touch_disable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"            <span id=\\\"icon-touch-on-hand\\\" class=\\\"glyphicon glyphicon-hand-up\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <span id=\\\"icon-touch-on\\\" class=\\\"glyphicon glyphicon-ok\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"        </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        \\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"        <div id=\\\"audioExpanded\\\" role=\\\"alert\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <input tabindex=\\\"1\\\" id=\\\"time-range-slider\\\" type=\\\"range\\\" role=\\\"slider\\\" min=\\\"0\\\" aria-value-min=\\\"0\\\" aria-valuemin=\\\"0\\\" max=\\\"100\\\" aria-value-max=\\\"100\\\" aria-valuemax=\\\"100\\\" value=\\\"0\\\" aria-valuenow=\\\"0\\\" aria-value-now=\\\"0\\\" aria-valuetext=\\\"0%\\\" aria-value-text=\\\"0%\\\" data-value=\\\"0\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_time\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_time\",c,p,0)));t.b(\"\\\"  />\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-audio-rate\\\" type=\\\"button\\\" class=\\\"btn icon-rate-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_rate_reset\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateReset\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_rate_reset\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateReset\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysRateReset\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <span class=\\\"glyphicon glyphicon-play-circle\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <input tabindex=\\\"1\\\" id=\\\"rate-range-slider\\\" type=\\\"range\\\" role=\\\"slider\\\" min=\\\"0\\\" aria-value-min=\\\"0\\\" aria-valuemin=\\\"0\\\" max=\\\"4\\\" aria-value-max=\\\"4\\\" aria-valuemax=\\\"4\\\" value=\\\"1\\\" aria-valuenow=\\\"1\\\" aria-value-now=\\\"1\\\" aria-valuetext=\\\"1x\\\" aria-value-text=\\\"1x\\\" step=\\\"0.5\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_rate\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateDecrease\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateIncrease\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_rate\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateDecrease\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysRateIncrease\",c,p,0)));t.b(\"]\\\" />\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <span aria-hidden=\\\"true\\\" tabindex=\\\"-1\\\" id=\\\"rate-range-slider-label\\\">1x</span>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <form action=\\\"\\\" id=\\\"mo-sync-form\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <input tabindex=\\\"1\\\" type=\\\"radio\\\" name=\\\"mo-sync\\\" value=\\\"default\\\" id=\\\"mo-sync-default\\\" class=\\\"mo-sync\\\" checked=\\\"checked\\\"  title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_default\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_default\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"> </input>\\r\");t.b(\"\\n\" + i);t.b(\"                <label tabindex=\\\"1\\\" for=\\\"mo-sync-default\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_default\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">&#8855;</span></label>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                <input tabindex=\\\"1\\\" type=\\\"radio\\\" name=\\\"mo-sync\\\" value=\\\"word\\\" id=\\\"mo-sync-word\\\" class=\\\"mo-sync\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_word\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_word\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"> </input>\\r\");t.b(\"\\n\" + i);t.b(\"                <label tabindex=\\\"1\\\" for=\\\"mo-sync-word\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_word\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_audio_sync_word\",c,p,0)));t.b(\"</span></label>\\r\");t.b(\"\\n\" + i);t.b(\"                \\r\");t.b(\"\\n\" + i);t.b(\"                <input tabindex=\\\"1\\\" type=\\\"radio\\\" name=\\\"mo-sync\\\" value=\\\"sentence\\\" id=\\\"mo-sync-sentence\\\" class=\\\"mo-sync\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_sentence\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_sentence\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"> </input>\\r\");t.b(\"\\n\" + i);t.b(\"                <label tabindex=\\\"1\\\" for=\\\"mo-sync-sentence\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_sentence\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_audio_sync_sentence\",c,p,0)));t.b(\"</span></label>\\r\");t.b(\"\\n\" + i);t.b(\"                \\r\");t.b(\"\\n\" + i);t.b(\"                <input tabindex=\\\"1\\\" type=\\\"radio\\\" name=\\\"mo-sync\\\" value=\\\"paragraph\\\" id=\\\"mo-sync-paragraph\\\" class=\\\"mo-sync\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_paragraph\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_paragraph\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"> </input>\\r\");t.b(\"\\n\" + i);t.b(\"                <label tabindex=\\\"1\\\" for=\\\"mo-sync-paragraph\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_sync_paragraph\",c,p,0)));t.b(\" \");t.b(t.v(t.d(\"strings.i18n_audio_sync\",c,p,0)));t.b(\"\\\"><span aria-hidden=\\\"true\\\">\");t.b(t.v(t.d(\"strings.i18n_audio_sync_paragraph\",c,p,0)));t.b(\"</span></label>\\r\");t.b(\"\\n\" + i);t.b(\"            </form>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <div id=\\\"audio-block\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <div id=\\\"mo-highlighters\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-0\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": \");t.b(t.v(t.d(\"strings.i18n_audio_highlight_default\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": \");t.b(t.v(t.d(\"strings.i18n_audio_highlight_default\",c,p,0)));t.b(\"\\\" aria-selected=\\\"true\\\" data-mohighlight=\\\"0\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                    \");t.b(t.v(t.d(\"strings.i18n_audio_highlight_default\",c,p,0)));t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-1\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #1\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #1\\\" data-mohighlight=\\\"1\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-2\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #2\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #2\\\" data-mohighlight=\\\"2\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-3\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #3\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #3\\\" data-mohighlight=\\\"3\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-4\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #4\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #4\\\" data-mohighlight=\\\"4\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-5\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #5\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #5\\\" data-mohighlight=\\\"5\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"                <button tabindex=\\\"1\\\" id=\\\"mo-highlighter-6\\\" type=\\\"button\\\" class=\\\"btn btn-mo-highlighter\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #6\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_highlight\",c,p,0)));t.b(\": #6\\\" data-mohighlight=\\\"6\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"                </button>\\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-playback-scroll-enable\\\" type=\\\"button\\\" class=\\\"btn icon-playback-scroll-enable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_playback_scroll_enable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_playback_scroll_enable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-playback-scroll-off\\\" class=\\\"glyphicon glyphicon-sort-by-attributes\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-playback-scroll-disable\\\" type=\\\"button\\\" class=\\\"btn icon-playback-scroll-disable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_playback_scroll_disable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_playback_scroll_disable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-playback-scroll-on\\\" class=\\\"glyphicon glyphicon-sort\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-auto-page-turn-enable\\\" type=\\\"button\\\" class=\\\"btn icon-auto-page-turn-enable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_auto_page_turn_enable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_auto_page_turn_enable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-auto-page-turn-off\\\" class=\\\"glyphicon glyphicon-sound-stereo\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-auto-page-turn-disable\\\" type=\\\"button\\\" class=\\\"btn icon-auto-page-turn-disable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_auto_page_turn_disable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_auto_page_turn_disable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-auto-page-turn-on\\\" class=\\\"glyphicon glyphicon-sound-dolby\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-skip-audio-enable\\\" type=\\\"button\\\" class=\\\"btn icon-skip-audio-enable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_skip_enable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_skip_enable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-skip-off\\\" class=\\\"glyphicon glyphicon-remove-circle\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-skip-audio-disable\\\" type=\\\"button\\\" class=\\\"btn icon-skip-audio-disable\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_skip_disable\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_skip_disable\",c,p,0)));t.b(\"\\\" >\\r\");t.b(\"\\n\" + i);t.b(\"                <span id=\\\"icon-skip-on\\\" class=\\\"glyphicon glyphicon-ok-circle\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"            <button tabindex=\\\"1\\\" id=\\\"btn-esc-audio\\\" type=\\\"button\\\" class=\\\"btn icon-esc-audio\\\" title=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_esc\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysEscape\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_audio_esc\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.MediaOverlaysEscape\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.MediaOverlaysEscape\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"                <span class=\\\"glyphicon glyphicon-eject\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"            </button>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            </div>\\r\");t.b(\"\\n\" + i);t.b(\"            \\r\");t.b(\"\\n\" + i);t.b(\"            <!-- div class=\\\"checkbox\\\">\\r\");t.b(\"\\n\" + i);t.b(\"              <label>\\r\");t.b(\"\\n\" + i);t.b(\"                <input type=\\\"checkbox\\\" value=\\\"false\\\"> Skip\\r\");t.b(\"\\n\" + i);t.b(\"              </label>\\r\");t.b(\"\\n\" + i);t.b(\"            </div -->\\r\");t.b(\"\\n\" + i);t.b(\"        </div>\\r\");t.b(\"\\n\" + i);t.b(\"    </div> \\r\");t.b(\"\\n\" + i);t.b(\"    <!--Audioplayer Controls END-->\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"zoom-wrapper dropdown\\\" style=\\\"display:none\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <a tabindex=\\\"1\\\" href=\\\"#\\\" data-toggle=\\\"dropdown\\\"><input tabindex=\\\"1\\\" type=\\\"text\\\" value=\\\"100%\\\" disabled/><span class=\\\"caret\\\"></span></a>\\r\");t.b(\"\\n\" + i);t.b(\"        <ul id=\\\"zoom-menu\\\" class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\r\");t.b(\"\\n\" + i);t.b(\"            <li id=\\\"zoom-custom\\\"><a href=\\\"#\\\" tabindex=\\\"1\\\">Custom <span class=\\\"glyphicon glyphicon-ok\\\"></span></a></li>\\r\");t.b(\"\\n\" + i);t.b(\"            <li id=\\\"zoom-fit-width\\\"><a href=\\\"#\\\" tabindex=\\\"1\\\">Fit Width <span class=\\\"glyphicon glyphicon-ok\\\"></span></a></li>\\r\");t.b(\"\\n\" + i);t.b(\"            <li id=\\\"zoom-fit-screen\\\" class=\\\"active-zoom\\\"><a href=\\\"#\\\" tabindex=\\\"1\\\">Fit Screen <span class=\\\"glyphicon glyphicon-ok\\\"></span></a></li>\\r\");t.b(\"\\n\" + i);t.b(\"        </ul>\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"    <button tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-library\\\" title=\\\"\");t.b(t.v(t.d(\"strings.view_library\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SwitchToLibrary\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.view_library\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.SwitchToLibrary\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.SwitchToLibrary\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"glyphicon glyphicon-folder-open\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    <button tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-annotations\\\" title=\\\"\");t.b(t.v(t.d(\"strings.highlight_selection\",c,p,0)));t.b(\"\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.highlight_selection\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"glyphicon glyphicon-edit\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"tocButt\\\" tabindex=\\\"1\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-toc\\\" title=\\\"\");t.b(t.v(t.d(\"strings.toc\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.TocShowHideToggle\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.toc\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.TocShowHideToggle\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.TocShowHideToggle\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"glyphicon glyphicon-list\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    <button id=\\\"settbutt1\\\" tabindex=\\\"1\\\" type=\\\"button\\\" class=\\\"btn icon-settings\\\" data-toggle=\\\"modal\\\" data-target=\\\"#settings-dialog\\\" title=\\\"\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.ShowSettingsModal\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.settings\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.ShowSettingsModal\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.ShowSettingsModal\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"glyphicon glyphicon-cog\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <button tabindex=\\\"1\\\" id=\\\"buttFullScreenToggle\\\" type=\\\"button\\\" class=\\\"btn icon-full-screen\\\" title=\\\"\");t.b(t.v(t.d(\"strings.enter_fullscreen\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.FullScreenToggle\",c,p,0)));t.b(\"]\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.enter_fullscreen\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.FullScreenToggle\",c,p,0)));t.b(\"]\\\" accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.FullScreenToggle\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"        <span class=\\\"glyphicon glyphicon-resize-full\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"    </button>\\r\");t.b(\"\\n\" + i);t.b(\"    \\r\");t.b(\"\\n\" + i);t.b(\"    <!-- <button type=\\\"button\\\" class=\\\"btn btn-default icon icon-bookmark\\\"></button>-->\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/reader-body.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div id=\\\"readium-toc-body\\\"\\r\");t.b(\"\\n\" + i);t.b(\"aria-label=\\\"\");t.b(t.v(t.d(\"strings.toc\",c,p,0)));t.b(\"\\\"\\r\");t.b(\"\\n\" + i);t.b(\"role=\\\"navigation\\\"\\r\");t.b(\"\\n\" + i);t.b(\">\\r\");t.b(\"\\n\" + i);t.b(\"</div>\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"<div id=\\\"reading-area\\\" role=\\\"main\\\">  \\r\");t.b(\"\\n\" + i);t.b(\"  <div id=\\\"epub-reader-container\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    <div id=\\\"epub-reader-frame\\\">\\r\");t.b(\"\\n\" + i);t.b(\"    </div>\\r\");t.b(\"\\n\" + i);t.b(\"  </div>\\r\");t.b(\"\\n\" + i);t.b(\"  \\r\");t.b(\"\\n\" + i);t.b(\"  <div id=\\\"readium-page-btns\\\" role=\\\"region\\\" aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_navigation\",c,p,0)));t.b(\"\\\">\\r\");t.b(\"\\n\" + i);t.b(\"  <!-- page left/right buttons inserted here when EPUB is loaded (page progression direction) -->\\r\");t.b(\"\\n\" + i);t.b(\"  </div>\\r\");t.b(\"\\n\" + i);t.b(\"  \\r\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\ndefine(\"hgn!readium_js_viewer_html_templates/reader-body-page-btns.html\", [\"hogan\"], function(hogan){  var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<!-- Left page -->\\r\");t.b(\"\\n\" + i);t.b(\"<button tabindex=\\\"0\\\" id=\\\"left-page-btn\\\" class=\\\"page-switch-overlay-icon\\\" type=\\\"button\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);if(t.s(t.f(\"pageProgressionDirectionIsRTL\",c,p,1),c,p,0,144,402,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"title=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PagePrevious\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PagePreviousAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PagePrevious\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PagePreviousAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.PagePreviousAlt\",c,p,0)));t.b(\"\\\"\\r\");t.b(\"\\n\" + i);});c.pop();}t.b(\"\\r\");t.b(\"\\n\" + i);if(!t.s(t.f(\"pageProgressionDirectionIsRTL\",c,p,1),c,p,1,0,0,\"\")){t.b(\"title=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PagePrevious\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PagePreviousAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PagePrevious\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PagePreviousAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.PagePreviousAlt\",c,p,0)));t.b(\"\\\"\\r\");t.b(\"\\n\" + i);};t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\">\\r\");t.b(\"\\n\" + i);t.b(\"<!-- img aria-hidden=\\\"true\\\" src=\\\"images/pagination1.svg\\\" -->\\r\");t.b(\"\\n\" + i);t.b(\"<span class=\\\"glyphicon glyphicon-chevron-left\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"</button>\\r\");t.b(\"\\n\" + i);t.b(\"  \\r\");t.b(\"\\n\" + i);t.b(\"<!-- Right page -->\\r\");t.b(\"\\n\" + i);t.b(\"<button tabindex=\\\"0\\\" id=\\\"right-page-btn\\\" class=\\\"page-switch-overlay-icon\\\" type=\\\"button\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);if(t.s(t.f(\"pageProgressionDirectionIsRTL\",c,p,1),c,p,0,1079,1325,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"title=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PageNext\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PageNextAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_previous\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PageNext\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PageNextAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.PageNextAlt\",c,p,0)));t.b(\"\\\"\\r\");t.b(\"\\n\" + i);});c.pop();}t.b(\"\\r\");t.b(\"\\n\" + i);if(!t.s(t.f(\"pageProgressionDirectionIsRTL\",c,p,1),c,p,1,0,0,\"\")){t.b(\"title=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PageNext\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PageNextAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"aria-label=\\\"\");t.b(t.v(t.d(\"strings.i18n_page_next\",c,p,0)));t.b(\" [\");t.b(t.v(t.d(\"keyboard.PageNext\",c,p,0)));t.b(\"] / [\");t.b(t.v(t.d(\"keyboard.PageNextAlt\",c,p,0)));t.b(\"]\\\"\\r\");t.b(\"\\n\" + i);t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\"accesskey=\\\"\");t.b(t.v(t.d(\"keyboard.accesskeys.PageNextAlt\",c,p,0)));t.b(\"\\\"\\r\");t.b(\"\\n\" + i);};t.b(\"\\r\");t.b(\"\\n\" + i);t.b(\">\\r\");t.b(\"\\n\" + i);t.b(\"<!-- img aria-hidden=\\\"true\\\" src=\\\"images/pagination1.svg\\\" -->\\r\");t.b(\"\\n\" + i);t.b(\"<span class=\\\"glyphicon glyphicon-chevron-right\\\" aria-hidden=\\\"true\\\"></span>\\r\");t.b(\"\\n\" + i);t.b(\"</button>\\r\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"\", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n\n",
    "\r\ndefine('readium_js_viewer/EpubReaderMediaOverlays',['module','jquery', 'underscore', 'bootstrap', 'readium_js/Readium', './Spinner', './storage/Settings', 'readium_js_viewer_i18n/Strings', './Dialogs', './Keyboard'], \r\n        function (module, $, _, bootstrap, Readium, spinner, Settings, Strings, Dialogs, Keyboard) {\r\n\r\n    var init = function(readium) {\r\n\r\n        readium.reader.on(ReadiumSDK.Events.PAGINATION_CHANGED, function (pageChangeData) {\r\n            // That's after mediaOverlayPlayer.onPageChanged()\r\n\r\n            if (readium.reader.isMediaOverlayAvailable()) {\r\n                $('#audioplayer').show();\r\n            }\r\n\r\n            if (!pageChangeData.spineItem) return;\r\n\r\n            var smil = readium.reader.package().media_overlay.getSmilBySpineItem(pageChangeData.spineItem);\r\n\r\n            var atLeastOneIsEnabled = false;\r\n\r\n            var $moSyncWord = $('#mo-sync-word');\r\n            if (!smil || !smil.hasSync(\"word\"))\r\n            {\r\n                $moSyncWord.attr('disabled', \"disabled\");\r\n            }\r\n            else\r\n            {\r\n                atLeastOneIsEnabled = true;\r\n                $moSyncWord.removeAttr('disabled');\r\n            }\r\n\r\n            var $moSyncSentence = $('#mo-sync-sentence');\r\n            if (!smil || !smil.hasSync(\"sentence\"))\r\n            {\r\n                $moSyncSentence.attr('disabled', \"disabled\");\r\n            }\r\n            else\r\n            {\r\n                atLeastOneIsEnabled = true;\r\n                $moSyncSentence.removeAttr('disabled');\r\n            }\r\n\r\n            var $moSyncParagraph = $('#mo-sync-paragraph');\r\n            if (!smil || !smil.hasSync(\"paragraph\"))\r\n            {\r\n                $moSyncParagraph.attr('disabled', \"disabled\");\r\n            }\r\n            else\r\n            {\r\n                atLeastOneIsEnabled = true;\r\n                $moSyncParagraph.removeAttr('disabled');\r\n            }\r\n\r\n            var $moSyncDefault = $('#mo-sync-default');\r\n            if (!atLeastOneIsEnabled)\r\n            {\r\n                $moSyncDefault.attr('disabled', \"disabled\");\r\n            }\r\n            else\r\n            {\r\n                $moSyncDefault.removeAttr('disabled');\r\n            }\r\n        });\r\n\r\n        var $audioPlayer = $('#audioplayer');\r\n\r\n        Settings.get('reader', function(json)\r\n        {\r\n            if (!json)\r\n            {\r\n                json = {};\r\n\r\n                var settings = readium.reader.viewerSettings();\r\n\r\n                json.mediaOverlaysSkipSkippables = settings.mediaOverlaysSkipSkippables;\r\n                json.mediaOverlaysAutomaticPageTurn = settings.mediaOverlaysAutomaticPageTurn;\r\n                json.mediaOverlaysEnableClick = settings.mediaOverlaysEnableClick;\r\n                json.mediaOverlaysPreservePlaybackWhenScroll = settings.mediaOverlaysPreservePlaybackWhenScroll;\r\n\r\n                Settings.put('reader', json);\r\n            }\r\n\r\n            if (json.mediaOverlaysSkipSkippables) // excludes typeof json.mediaOverlaysSkipSkippables === \"undefined\", so the default is to disable skippability\r\n            {\r\n                $audioPlayer.addClass('skip');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysSkipSkippables: true\r\n                });\r\n            }\r\n            else\r\n            {\r\n                $audioPlayer.removeClass('skip');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysSkipSkippables: false\r\n                });\r\n            }\r\n\r\n            if (json.mediaOverlaysPreservePlaybackWhenScroll)\r\n            {\r\n                $audioPlayer.addClass('playScroll');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysPreservePlaybackWhenScroll: true\r\n                });\r\n            }\r\n            else\r\n            {\r\n                $audioPlayer.removeClass('playScroll');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysPreservePlaybackWhenScroll: false\r\n                });\r\n            }\r\n\r\n            if (json.mediaOverlaysAutomaticPageTurn)\r\n            {\r\n                $audioPlayer.addClass('autoPageTurn');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysAutomaticPageTurn: true\r\n                });\r\n            }\r\n            else\r\n            {\r\n                $audioPlayer.removeClass('autoPageTurn');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysAutomaticPageTurn: false\r\n                });\r\n            }\r\n\r\n            if (json.mediaOverlaysEnableClick)\r\n            {\r\n                $audioPlayer.removeClass('no-touch');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysEnableClick: true\r\n                });\r\n            }\r\n            else\r\n            {\r\n                $audioPlayer.addClass('no-touch');\r\n\r\n                readium.reader.updateSettings({\r\n                    doNotUpdateView: true,\r\n                    mediaOverlaysEnableClick: false\r\n                });\r\n            }\r\n        });\r\n\r\n        var $moSyncDefault = $('#mo-sync-default');\r\n        $moSyncDefault.on(\"click\", function () {\r\n            var wasPlaying = readium.reader.isPlayingMediaOverlay();\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.pauseMediaOverlay();\r\n            }\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSynchronizationGranularity: \"\"\r\n            });\r\n\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.playMediaOverlay();\r\n            }\r\n        });\r\n        var $moSyncWord = $('#mo-sync-word');\r\n        $moSyncWord.on(\"click\", function () {\r\n            var wasPlaying = readium.reader.isPlayingMediaOverlay();\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.pauseMediaOverlay();\r\n            }\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSynchronizationGranularity: \"word\"\r\n            });\r\n\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.playMediaOverlay();\r\n            }\r\n        });\r\n        var $moSyncSentence = $('#mo-sync-sentence');\r\n        $moSyncSentence.on(\"click\", function () {\r\n            var wasPlaying = readium.reader.isPlayingMediaOverlay();\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.pauseMediaOverlay();\r\n            }\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSynchronizationGranularity: \"sentence\"\r\n            });\r\n\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.playMediaOverlay();\r\n            }\r\n        });\r\n        var $moSyncParagraph = $('#mo-sync-paragraph');\r\n        $moSyncParagraph.on(\"click\", function () {\r\n            var wasPlaying = readium.reader.isPlayingMediaOverlay();\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.pauseMediaOverlay();\r\n            }\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSynchronizationGranularity: \"paragraph\"\r\n            });\r\n\r\n            if (wasPlaying)\r\n            {\r\n                readium.reader.playMediaOverlay();\r\n            }\r\n        });\r\n\r\n\r\n        var $highlighterButts = $('.btn-mo-highlighter');\r\n        $highlighterButts.on(\"click\", function () {\r\n            $highlighterButts.attr(\"aria-selected\", \"false\");\r\n            $(this).attr(\"aria-selected\", \"true\");\r\n\r\n            var index = $(this).attr(\"data-mohighlight\");\r\n\r\n            readium.reader.setStyles([\r\n                {\r\n                    selector: \".mo-active-default\",\r\n                    declarations: undefined\r\n                }\r\n            ], true);\r\n\r\n            if (index === \"1\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"yellow !important\",\r\n                            \"color\": \"black !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\",\r\n                            \"box-shadow\": \"0px 0px 0.4em #333333 !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n            else if (index === \"2\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"black !important\",\r\n                            \"color\": \"white !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n            else if (index === \"3\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"orange !important\",\r\n                            \"color\": \"black !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n            else if (index === \"4\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"blue !important\",\r\n                            \"color\": \"white !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n            else if (index === \"5\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"magenta !important\",\r\n                            \"color\": \"black !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n            else if (index === \"6\")\r\n            {\r\n                readium.reader.setStyles([\r\n                    {\r\n                        selector: \".mo-active-default\",\r\n                        declarations: {\r\n                            \"background-color\": \"#00FF00 !important\",\r\n                            \"color\": \"black !important\",\r\n                            \"border-color\": \"transparent !important\",\r\n                            \"border-radius\": \"0.4em !important\"\r\n                        }\r\n                    }\r\n                ], true);\r\n            }\r\n        });\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysEscape, 'reader', readium.reader.escapeMediaOverlay);\r\n\r\n        var $escAudioBtn = $(\"#btn-esc-audio\");\r\n        $escAudioBtn.on(\"click\", readium.reader.escapeMediaOverlay);\r\n\r\n        var $previousAudioBtn = $(\"#btn-previous-audio\");\r\n        var $nextAudioBtn = $(\"#btn-next-audio\");\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysPlayPause, 'reader', readium.reader.toggleMediaOverlay);\r\n        //Keyboard.on(Keyboard.MediaOverlaysPlayPauseAlt, 'reader', readium.reader.toggleMediaOverlay);\r\n\r\n        var $playAudioBtn = $(\"#btn-play-audio\");\r\n        var $pauseAudioBtn = $(\"#btn-pause-audio\");\r\n\r\n        $playAudioBtn.on(\"click\", function () {\r\n            //readium.reader[$(this).hasClass('pause-audio') ? 'pauseMediaOverlay' : 'playMediaOverlay']();\r\n            //readium.reader.toggleMediaOverlay();\r\n            var wasFocused = document.activeElement === $playAudioBtn[0];\r\n            readium.reader.playMediaOverlay();\r\n\r\n            $playAudioBtn.removeAttr(\"accesskey\");\r\n            $pauseAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysPlayPause);\r\n\r\n            if (wasFocused) setTimeout(function(){ $pauseAudioBtn[0].focus(); }, 50);\r\n        });\r\n\r\n        $pauseAudioBtn.on(\"click\", function () {\r\n            var wasFocused = document.activeElement === $pauseAudioBtn[0];\r\n            readium.reader.pauseMediaOverlay();\r\n\r\n            $pauseAudioBtn.removeAttr(\"accesskey\");\r\n            $playAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysPlayPause);\r\n\r\n            if (wasFocused) setTimeout(function(){ $playAudioBtn[0].focus(); }, 50);\r\n        });\r\n\r\n\r\n        var $expandAudioBtn = $(\"#btn-expand-audio\");\r\n        var $collapseAudioBtn = $(\"#btn-collapse-audio\");\r\n\r\n        var updateAudioExpand = function(expand)\r\n        {\r\n            if (expand)\r\n            {\r\n                $audioPlayer.addClass('expanded-audio');\r\n\r\n                $expandAudioBtn.removeAttr(\"accesskey\");\r\n                $collapseAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysAdvancedPanelShowHide);\r\n            }\r\n            else\r\n            {\r\n                $audioPlayer.removeClass('expanded-audio');\r\n\r\n                $collapseAudioBtn.removeAttr(\"accesskey\");\r\n                $expandAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysAdvancedPanelShowHide);\r\n            }\r\n        };\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysAdvancedPanelShowHide, 'reader', function(){\r\n            var toFocus = undefined;\r\n            if ($audioPlayer.hasClass('expanded-audio'))\r\n            {\r\n                updateAudioExpand(false);\r\n                toFocus = $expandAudioBtn[0];\r\n            }\r\n            else\r\n            {\r\n                updateAudioExpand(true);\r\n                toFocus = $collapseAudioBtn[0];\r\n            }\r\n\r\n            $(document.body).removeClass('hide-ui');\r\n            setTimeout(function(){ toFocus.focus(); }, 50);\r\n        });\r\n\r\n        $expandAudioBtn.on(\"click\", function() {\r\n            var wasFocused = document.activeElement === $expandAudioBtn[0];\r\n            updateAudioExpand(true);\r\n            if (wasFocused) setTimeout(function(){ $collapseAudioBtn[0].focus(); }, 50);\r\n        });\r\n\r\n        $collapseAudioBtn.on(\"click\", function() {\r\n            var wasFocused = document.activeElement === $collapseAudioBtn[0];\r\n            updateAudioExpand(false);\r\n            if (wasFocused) setTimeout(function(){ $expandAudioBtn[0].focus(); }, 50);\r\n        });\r\n\r\n        var $changeTimeControl = $('#time-range-slider');\r\n\r\n        var debouncedTimeRangeSliderChange = _.debounce(\r\n            function() {\r\n\r\n                inDebounce = false;\r\n\r\n                var percent = $changeTimeControl.val();\r\n\r\n                var package = readium.reader.package();\r\n                if (!package) return;\r\n                if (!package.media_overlay) return;\r\n\r\n                var par = {par: undefined};\r\n                var smilData = {smilData: undefined};\r\n                var milliseconds = {milliseconds: undefined};\r\n\r\n                package.media_overlay.percentToPosition(percent, smilData, par, milliseconds);\r\n\r\n                if (!par.par || !par.par.text || !smilData.smilData)\r\n                {\r\n                    return;\r\n                }\r\n\r\n                var smilSrc = smilData.smilData.href;\r\n\r\n                var offsetS = milliseconds.milliseconds / 1000.0;\r\n\r\n                readium.reader.mediaOverlaysOpenContentUrl(par.par.text.src, smilSrc, offsetS);\r\n            }\r\n        , 800);\r\n\r\n        var updateSliderLabels = function($slider, val, txt)\r\n        {\r\n            $slider.attr(\"aria-valuenow\", val+\"\");\r\n            $slider.attr(\"aria-value-now\", val+\"\");\r\n\r\n            $slider.attr(\"aria-valuetext\", txt+\"\");\r\n            $slider.attr(\"aria-value-text\", txt+\"\");\r\n        };\r\n\r\n        $changeTimeControl.on(\"change\",\r\n        function() {\r\n\r\n            var percent = $changeTimeControl.val();\r\n            percent = Math.round(percent);\r\n\r\n            $changeTimeControl.attr(\"data-value\", percent);\r\n            updateSliderLabels($changeTimeControl, percent, percent + \"%\");\r\n\r\n            if (readium.reader.isPlayingMediaOverlay())\r\n            {\r\n                readium.reader.pauseMediaOverlay();\r\n            }\r\n            debouncedTimeRangeSliderChange();\r\n        }\r\n        );\r\n\r\n        readium.reader.on(ReadiumSDK.Events.MEDIA_OVERLAY_STATUS_CHANGED, function (value) {\r\n\r\n            //var $audioPlayerControls = $('#audioplayer button, #audioplayer input:not(.mo-sync)');\r\n\r\n            var percent = 0;\r\n\r\n            var isPlaying = 'isPlaying' in value\r\n                ? value.isPlaying   // for all the other events\r\n                : true;             // for events raised by positionChanged, as `isPlaying` flag isn't even set\r\n\r\n            var wasFocused = document.activeElement === $playAudioBtn[0] || document.activeElement === $pauseAudioBtn[0];\r\n\r\n            if (isPlaying)\r\n            {\r\n                $playAudioBtn.removeAttr(\"accesskey\");\r\n                $pauseAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysPlayPause);\r\n            }\r\n            else\r\n            {\r\n                $pauseAudioBtn.removeAttr(\"accesskey\");\r\n                $playAudioBtn.attr(\"accesskey\", Keyboard.MediaOverlaysPlayPause);\r\n            }\r\n\r\n            $audioPlayer.toggleClass('isPlaying', isPlaying);\r\n\r\n            if (wasFocused) setTimeout(function(){ (isPlaying ? $pauseAudioBtn[0] : $playAudioBtn[0]).focus(); }, 50);\r\n\r\n            percent = -1; // to prevent flickering slider position (pause callback is raised between each audio phrase!)\r\n\r\n            // if (readium.reader.isMediaOverlayAvailable()) {\r\n            //     $audioPlayer.show();\r\n            //     //$audioPlayerControls.attr('disabled', false);\r\n            //\r\n            // } else {\r\n            //     //$audioPlayerControls.attr('disabled', true);\r\n            // }\r\n\r\n            if ((typeof value.playPosition !== \"undefined\") && (typeof value.smilIndex !== \"undefined\") && (typeof value.parIndex !== \"undefined\"))\r\n            {\r\n                var package = readium.reader.package();\r\n\r\n                var playPositionMS = value.playPosition * 1000;\r\n                percent = package.media_overlay.positionToPercent(value.smilIndex, value.parIndex, playPositionMS);\r\n\r\n                if (percent < 0)\r\n                {\r\n                    percent = 0;\r\n                }\r\n            }\r\n\r\n            if (percent >= 0)\r\n            {\r\n                $changeTimeControl.val(percent);\r\n                percent = Math.round(percent);\r\n                $changeTimeControl.attr(\"data-value\", percent);\r\n                updateSliderLabels($changeTimeControl, percent, percent + \"%\");\r\n            }\r\n        });\r\n\r\n        var $buttondPreservePlaybackWhenScrollDisable = $('#btn-playback-scroll-disable');\r\n        var $buttonPreservePlaybackWhenScrollEnable = $('#btn-playback-scroll-enable');\r\n\r\n        $buttondPreservePlaybackWhenScrollDisable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttondPreservePlaybackWhenScrollDisable[0];\r\n\r\n            $audioPlayer.removeClass('playScroll');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysPreservePlaybackWhenScroll: false\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysPreservePlaybackWhenScroll = false;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonPreservePlaybackWhenScrollEnable[0].focus(); }, 50);\r\n        });\r\n\r\n        $buttonPreservePlaybackWhenScrollEnable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonPreservePlaybackWhenScrollEnable[0];\r\n\r\n            $audioPlayer.addClass('playScroll');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysPreservePlaybackWhenScroll: true\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysPreservePlaybackWhenScroll = true;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttondPreservePlaybackWhenScrollDisable[0].focus(); }, 50);\r\n        });\r\n\r\n        var $buttonAutoPageTurnDisable = $('#btn-auto-page-turn-disable');\r\n        var $buttonAutoPageTurnEnable = $('#btn-auto-page-turn-enable');\r\n\r\n        $buttonAutoPageTurnDisable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonAutoPageTurnDisable[0];\r\n\r\n            $audioPlayer.removeClass('autoPageTurn');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysAutomaticPageTurn: false\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysAutomaticPageTurn = false;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonAutoPageTurnEnable[0].focus(); }, 50);\r\n        });\r\n\r\n        $buttonAutoPageTurnEnable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonAutoPageTurnEnable[0];\r\n\r\n            $audioPlayer.addClass('autoPageTurn');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysAutomaticPageTurn: true\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysAutomaticPageTurn = true;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonAutoPageTurnDisable[0].focus(); }, 50);\r\n        });\r\n\r\n\r\n        var $buttonSkipDisable = $('#btn-skip-audio-disable');\r\n        var $buttonSkipEnable = $('#btn-skip-audio-enable');\r\n\r\n        $buttonSkipDisable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonSkipDisable[0];\r\n\r\n            $audioPlayer.removeClass('skip');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSkipSkippables: false\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysSkipSkippables = false;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonSkipEnable[0].focus(); }, 50);\r\n        });\r\n\r\n        $buttonSkipEnable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonSkipEnable[0];\r\n\r\n            $audioPlayer.addClass('skip');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysSkipSkippables: true\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysSkipSkippables = true;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonSkipDisable[0].focus(); }, 50);\r\n        });\r\n\r\n        var $buttonTouchEnable = $('#btn-touch-audio-enable');\r\n        var $buttonTouchDisable = $('#btn-touch-audio-disable');\r\n\r\n        $buttonTouchEnable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonTouchEnable[0];\r\n\r\n            $audioPlayer.removeClass('no-touch');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysEnableClick: true\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysEnableClick = true;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonTouchDisable[0].focus(); }, 50);\r\n        });\r\n\r\n        $buttonTouchDisable.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $buttonTouchDisable[0];\r\n\r\n            $audioPlayer.addClass('no-touch');\r\n\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysEnableClick: false\r\n            });\r\n\r\n            Settings.get('reader', function(json)\r\n            {\r\n                if (!json)\r\n                {\r\n                    json = {};\r\n                }\r\n\r\n                json.mediaOverlaysEnableClick = false;\r\n                Settings.put('reader', json);\r\n            });\r\n\r\n            if (wasFocused) setTimeout(function(){ $buttonTouchEnable[0].focus(); }, 50);\r\n        });\r\n\r\n        var $changeRateControl = $('#rate-range-slider');\r\n        var $changeRateControl_label = $('#rate-range-slider-label');\r\n\r\n        var changeRate = function(minus)\r\n        {\r\n            var rateMin = parseFloat($changeRateControl.attr(\"min\"));\r\n            var rateMax = parseFloat($changeRateControl.attr(\"max\"));\r\n            var rateStep = parseFloat($changeRateControl.attr(\"step\"));\r\n            var rateVal = parseFloat($changeRateControl.val());\r\n\r\n            rateVal += (minus ? (-rateStep) : rateStep);\r\n\r\n            if (rateVal > rateMax) rateVal = rateMax;\r\n            if (rateVal < rateMin) rateVal = rateMin;\r\n\r\n            var txt = ((rateVal === 0 ? \"~0\" : \"\"+rateVal) + \"x\");\r\n\r\n            updateSliderLabels($changeRateControl, rateVal, txt);\r\n\r\n            $changeRateControl_label[0].textContent = txt;\r\n\r\n            //readium.reader.setRateMediaOverlay(rateVal);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysRate: rateVal\r\n            });\r\n\r\n            $changeRateControl.val(\"\"+rateVal);\r\n        };\r\n\r\n        $(\"#buttRatePlus\").on(\"click\", function(){\r\n            changeRate(false);\r\n            //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        });\r\n        Keyboard.on(Keyboard.MediaOverlaysRateIncrease, 'reader', function(){\r\n            changeRate(false);\r\n            //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        });\r\n\r\n        $(\"#buttRateMinus\").on(\"click\", function(){\r\n            changeRate(true);\r\n            //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        });\r\n        Keyboard.on(Keyboard.MediaOverlaysRateDecrease, 'reader', function(){\r\n            changeRate(true);\r\n            //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        });\r\n\r\n        // Keyboard.on(Keyboard.MediaOverlaysRateIncreaseAlt, 'reader', function(){\r\n        //     changeRate(false);\r\n        //     //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        // });\r\n        //\r\n        // Keyboard.on(Keyboard.MediaOverlaysRateDecreaseAlt, 'reader', function(){\r\n        //     changeRate(true);\r\n        //     //setTimeout(function(){ $changeRateControl[0].focus(); }, 50);\r\n        // });\r\n\r\n        $changeRateControl.on(\"change\", function() {\r\n            var rateVal = $(this).val();\r\n            var txt = ((rateVal === '0' ? \"~0\" : rateVal) + \"x\");\r\n\r\n            updateSliderLabels($(this), rateVal, txt);\r\n\r\n            $changeRateControl_label[0].textContent = txt;\r\n\r\n            //readium.reader.setRateMediaOverlay(rateVal);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysRate: rateVal\r\n            });\r\n        });\r\n\r\n        var resetRate = function() {\r\n            $changeRateControl.val(1);\r\n\r\n            updateSliderLabels($changeRateControl, \"1\", \"1x\");\r\n\r\n            $changeRateControl_label[0].textContent = \"1x\";\r\n\r\n            //readium.reader.setRateMediaOverlay(1);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysRate: 1\r\n            });\r\n        };\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysRateReset, 'reader', resetRate);\r\n\r\n        var $rateButton = $('#btn-audio-rate');\r\n        $rateButton.on(\"click\", resetRate);\r\n\r\n        var $changeVolumeControl = $('#volume-range-slider');\r\n\r\n        var changeVolume = function(minus)\r\n        {\r\n            var volumeVal = parseInt($changeVolumeControl.val());\r\n\r\n            volumeVal += (minus ? (-20) : 20);\r\n\r\n            if (volumeVal < 0) volumeVal = 0;\r\n            if (volumeVal > 100) volumeVal = 100;\r\n\r\n            //readium.reader.setVolumeMediaOverlay(volumeVal / 100);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysVolume: volumeVal\r\n            });\r\n\r\n            $changeVolumeControl.val(\"\"+volumeVal);\r\n\r\n            updateSliderLabels($changeVolumeControl, volumeVal, volumeVal + \"%\");\r\n\r\n            if (volumeVal === 0) {\r\n                $audioPlayer.addClass('no-volume');\r\n            } else {\r\n                $audioPlayer.removeClass('no-volume');\r\n            }\r\n        };\r\n\r\n        $(\"#buttVolumePlus\").on(\"click\", function(){\r\n            changeVolume(false);\r\n            //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        });\r\n        Keyboard.on(Keyboard.MediaOverlaysVolumeIncrease, 'reader', function(){\r\n            changeVolume(false);\r\n            //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        });\r\n\r\n        $(\"#buttVolumeMinus\").on(\"click\", function(){\r\n            changeVolume(true);\r\n            //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        });\r\n        Keyboard.on(Keyboard.MediaOverlaysVolumeDecrease, 'reader', function(){\r\n            changeVolume(true);\r\n            //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        });\r\n\r\n        // Keyboard.on(Keyboard.MediaOverlaysVolumeIncreaseAlt, 'reader', function(){\r\n        //     changeVolume(false);\r\n        //     //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        // });\r\n\r\n        // Keyboard.on(Keyboard.MediaOverlaysVolumeDecreaseAlt, 'reader', function(){\r\n        //     changeVolume(true);\r\n        //     //setTimeout(function(){ $changeVolumeControl[0].focus(); }, 50);\r\n        // });\r\n\r\n        $changeVolumeControl.on(\"change\", function() {\r\n            var volumeVal = $(this).val();\r\n\r\n            //readium.reader.setVolumeMediaOverlay(volumeVal / 100);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysVolume: volumeVal\r\n            });\r\n\r\n            updateSliderLabels($changeVolumeControl, volumeVal, volumeVal + \"%\");\r\n\r\n            if (volumeVal === '0') {\r\n                $audioPlayer.addClass('no-volume');\r\n            } else {\r\n                $audioPlayer.removeClass('no-volume');\r\n            }\r\n        });\r\n\r\n        $volumeButtonMute = $('#btn-audio-volume-mute');\r\n        $volumeButtonUnMute = $('#btn-audio-volume-unmute');\r\n\r\n        var _lastVolumeBeforeMute = '0';\r\n\r\n        var muteVolume = function(){\r\n\r\n            _lastVolumeBeforeMute = $changeVolumeControl.val();\r\n\r\n            //readium.reader.setVolumeMediaOverlay(volumeVal);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysVolume: 0\r\n            });\r\n\r\n            $changeVolumeControl.val(0);\r\n\r\n            updateSliderLabels($changeVolumeControl, 0, 0 + \"%\");\r\n\r\n            $volumeButtonMute.removeAttr(\"accesskey\");\r\n            $volumeButtonUnMute.attr(\"accesskey\", Keyboard.MediaOverlaysVolumeMuteToggle);\r\n\r\n            $audioPlayer.addClass('no-volume');\r\n        };\r\n\r\n        var unMuteVolume = function(){\r\n\r\n            //var currentVolume = $changeVolumeControl.val();\r\n            var volumeVal = _lastVolumeBeforeMute === '0' ? '100' : _lastVolumeBeforeMute;\r\n\r\n            //readium.reader.setVolumeMediaOverlay(volumeVal);\r\n            readium.reader.updateSettings({\r\n                doNotUpdateView: true,\r\n                mediaOverlaysVolume: volumeVal\r\n            });\r\n\r\n            $changeVolumeControl.val(volumeVal);\r\n\r\n            updateSliderLabels($changeVolumeControl, volumeVal, volumeVal + \"%\");\r\n\r\n            $volumeButtonUnMute.removeAttr(\"accesskey\");\r\n            $volumeButtonMute.attr(\"accesskey\", Keyboard.MediaOverlaysVolumeMuteToggle);\r\n\r\n            $audioPlayer.removeClass('no-volume');\r\n        };\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysVolumeMuteToggle, 'reader', function(){\r\n            ($audioPlayer.hasClass('no-volume') ? unMuteVolume : muteVolume)();\r\n        });\r\n\r\n        $volumeButtonMute.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $volumeButtonMute[0];\r\n\r\n            muteVolume();\r\n\r\n            if (wasFocused) setTimeout(function(){ $volumeButtonUnMute[0].focus(); }, 50);\r\n        });\r\n\r\n        $volumeButtonUnMute.on(\"click\", function() {\r\n\r\n            var wasFocused = document.activeElement === $volumeButtonUnMute[0];\r\n\r\n            unMuteVolume();\r\n\r\n            if (wasFocused) setTimeout(function(){ $volumeButtonMute[0].focus(); }, 50);\r\n        });\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysPrevious, 'reader', readium.reader.previousMediaOverlay);\r\n\r\n        $previousAudioBtn.on(\"click\", readium.reader.previousMediaOverlay);\r\n\r\n        Keyboard.on(Keyboard.MediaOverlaysNext, 'reader', readium.reader.nextMediaOverlay);\r\n\r\n        $nextAudioBtn.on(\"click\", readium.reader.nextMediaOverlay);\r\n    };\r\n\r\n    return {\r\n        init : init\r\n    };\r\n});\r\n\n",
    "\r\ndefine('readium_js_viewer/EpubReaderBackgroundAudioTrack',['module','jquery', 'bootstrap', 'readium_js/Readium', './Spinner', './storage/Settings', 'readium_js_viewer_i18n/Strings', './Dialogs', './Keyboard'], \r\n        function (module, $, bootstrap, Readium, spinner, Settings, Strings, Dialogs, Keyboard) {\r\n\r\n    var init = function(readium) {\r\n\r\n        if (!readium.reader.backgroundAudioTrackManager) return; // safety (out-of-date readium-shared-js?)\r\n\r\n        var $audioTrackDiv = $(\"#backgroundAudioTrack-div\");\r\n\r\n        var $playAudioTrackBtn = $(\"#backgroundAudioTrack-button-play\");\r\n        var $pauseAudioTrackBtn = $(\"#backgroundAudioTrack-button-pause\");\r\n\r\n        readium.reader.backgroundAudioTrackManager.setCallback_PlayPause(function(doPlay)\r\n            {\r\n                if (doPlay)\r\n                {\r\n                    $audioTrackDiv.addClass('isPlaying');\r\n\r\n                    $playAudioTrackBtn.removeAttr(\"accesskey\");\r\n                    $pauseAudioTrackBtn.attr(\"accesskey\", Keyboard.BackgroundAudioPlayPause);\r\n                }\r\n                else\r\n                {\r\n                    $audioTrackDiv.removeClass('isPlaying');\r\n\r\n                    $pauseAudioTrackBtn.removeAttr(\"accesskey\");\r\n                    $playAudioTrackBtn.attr(\"accesskey\", Keyboard.BackgroundAudioPlayPause);\r\n                }\r\n            }\r\n        );\r\n\r\n        readium.reader.backgroundAudioTrackManager.setCallback_IsAvailable(function(yes)\r\n            {\r\n                if (yes)\r\n                {\r\n                    $audioTrackDiv.removeClass(\"none\");\r\n                }\r\n                else\r\n                {\r\n                    $audioTrackDiv.addClass(\"none\");\r\n                }\r\n            }\r\n        );\r\n\r\n\r\n        Keyboard.on(Keyboard.BackgroundAudioPlayPause, 'reader', function()\r\n        {\r\n            var play = !$audioTrackDiv.hasClass('isPlaying');\r\n\r\n            readium.reader.backgroundAudioTrackManager.setPlayState(play);\r\n            readium.reader.backgroundAudioTrackManager.playPause(play);\r\n        });\r\n\r\n        $playAudioTrackBtn.on(\"click\", function ()\r\n        {\r\n            var wasFocused = document.activeElement === $playAudioTrackBtn[0];\r\n\r\n            readium.reader.backgroundAudioTrackManager.setPlayState(true);\r\n            readium.reader.backgroundAudioTrackManager.playPause(true);\r\n\r\n            if (wasFocused) setTimeout(function(){ $pauseAudioTrackBtn[0].focus(); }, 50);\r\n        });\r\n\r\n        $pauseAudioTrackBtn.on(\"click\", function ()\r\n        {\r\n            var wasFocused = document.activeElement === $pauseAudioTrackBtn[0];\r\n\r\n            readium.reader.backgroundAudioTrackManager.setPlayState(false);\r\n            readium.reader.backgroundAudioTrackManager.playPause(false);\r\n\r\n            if (wasFocused) setTimeout(function(){ $playAudioTrackBtn[0].focus(); }, 50);\r\n        });\r\n    };\r\n\r\n    return {\r\n        init : init\r\n    };\r\n});\r\n\n",
    "//  Copyright (c) 2014 Readium Foundation and/or its licensees. All rights reserved.\r\n//  \r\n//  Redistribution and use in source and binary forms, with or without modification, \r\n//  are permitted provided that the following conditions are met:\r\n//  1. Redistributions of source code must retain the above copyright notice, this \r\n//  list of conditions and the following disclaimer.\r\n//  2. Redistributions in binary form must reproduce the above copyright notice, \r\n//  this list of conditions and the following disclaimer in the documentation and/or \r\n//  other materials provided with the distribution.\r\n//  3. Neither the name of the organization nor the names of its contributors may be \r\n//  used to endorse or promote products derived from this software without specific \r\n//  prior written permission.\r\n\r\ndefine('readium_js_viewer/gestures',['jquery','jquery_hammer','hammerjs'], function($,jqueryHammer,Hammer) {\r\n\r\n    var gesturesHandler = function(reader, viewport){\r\n        \r\nthis.initialize= function(){};\r\nreturn; // TODO upgrade to Hammer API v2\r\n\r\n        var onSwipeLeft = function(){\r\n            reader.openPageRight();\r\n        };\r\n\r\n        var onSwipeRight = function(){\r\n            reader.openPageLeft();\r\n        };\r\n\r\n        var isGestureHandled = function() {\r\n            var viewType = reader.getCurrentViewType();\r\n\r\n            return viewType === ReadiumSDK.Views.ReaderView.VIEW_TYPE_FIXED || viewType == ReadiumSDK.Views.ReaderView.VIEW_TYPE_COLUMNIZED;\r\n        };\r\n\r\n        this.initialize= function(){\r\n\r\n            reader.on(ReadiumSDK.Events.CONTENT_DOCUMENT_LOADED, function(iframe,s) {\r\n                //set hammer's document root\r\n                Hammer.DOCUMENT = iframe.contents();\r\n                //hammer's internal touch events need to be redefined? (doesn't work without)\r\n                Hammer.event.onTouch(Hammer.DOCUMENT, Hammer.EVENT_MOVE, Hammer.detection.detect);\r\n                Hammer.event.onTouch(Hammer.DOCUMENT, Hammer.EVENT_END, Hammer.detection.detect);\r\n\r\n                //set up the hammer gesture events\r\n                //swiping handlers\r\n                var swipingOptions = {prevent_mouseevents: true};\r\n                Hammer(Hammer.DOCUMENT,swipingOptions).on(\"swipeleft\", function() {\r\n                    onSwipeLeft();\r\n                });\r\n                Hammer(Hammer.DOCUMENT,swipingOptions).on(\"swiperight\", function() {\r\n                    onSwipeRight();\r\n                });\r\n\r\n                //remove stupid ipad safari elastic scrolling\r\n                //TODO: test this with reader ScrollView and FixedView\r\n                $(Hammer.DOCUMENT).on(\r\n                    'touchmove',\r\n                    function(e) {\r\n                        //hack: check if we are not dealing with a scrollview\r\n                        if(isGestureHandled()){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n\r\n            //remove stupid ipad safari elastic scrolling (improves UX for gestures)\r\n            //TODO: test this with reader ScrollView and FixedView\r\n            $(viewport).on(\r\n                'touchmove',\r\n                function(e) {\r\n                    if(isGestureHandled()) {\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            );\r\n\r\n            //handlers on viewport\r\n            $(viewport).hammer().on(\"swipeleft\", function() {\r\n                onSwipeLeft();\r\n            });\r\n            $(viewport).hammer().on(\"swiperight\", function() {\r\n                onSwipeRight();\r\n            });\r\n        };\r\n\r\n    };\r\n    return gesturesHandler;\r\n});\n",
    "define('readium_js_viewer/EpubReader',[\r\n\"readium_shared_js/globalsSetup\",\r\n\"readium_plugin_example\",\r\n'module',\r\n'jquery',\r\n'bootstrap',\r\n'bootstrapA11y',\r\n'URIjs',\r\n'./Spinner',\r\n'./storage/Settings',\r\n'readium_js_viewer_i18n/Strings',\r\n'./Dialogs',\r\n'./ReaderSettingsDialog',\r\n'hgn!readium_js_viewer_html_templates/about-dialog.html',\r\n'hgn!readium_js_viewer_html_templates/reader-navbar.html',\r\n'hgn!readium_js_viewer_html_templates/reader-body.html',\r\n'hgn!readium_js_viewer_html_templates/reader-body-page-btns.html',\r\n'./analytics/Analytics',\r\n'screenfull',\r\n'./Keyboard',\r\n'./EpubReaderMediaOverlays',\r\n'./EpubReaderBackgroundAudioTrack',\r\n'./gestures',\r\n'./versioning/ReadiumVersioning',\r\n'readium_js/Readium'],\r\n\r\nfunction (\r\nglobalSetup, examplePluginConfig,\r\nmodule,\r\n$,\r\nbootstrap,\r\nbootstrapA11y,\r\nURI,\r\nspinner,\r\nSettings,\r\nStrings,\r\nDialogs,\r\nSettingsDialog,\r\nAboutDialog,\r\nReaderNavbar,\r\nReaderBody,\r\nReaderBodyPageButtons,\r\nAnalytics,\r\nscreenfull,\r\nKeyboard,\r\nEpubReaderMediaOverlays,\r\nEpubReaderBackgroundAudioTrack,\r\nGesturesHandler,\r\nVersioning,\r\nReadium){\r\n\r\n        examplePluginConfig.borderColor = \"blue\";\r\n        examplePluginConfig.backgroundColor = \"cyan\";\r\n\r\n    var readium,\r\n        embedded,\r\n        url,\r\n        el = document.documentElement,\r\n        currentDocument,\r\n        gesturesHandler;\r\n\r\n    // This function will retrieve a package document and load an EPUB\r\n    var loadEbook = function (packageDocumentURL, readerSettings, openPageRequest) {\r\n\r\n        readium.openPackageDocument(packageDocumentURL, function(packageDocument, options){\r\n            currentDocument = packageDocument;\r\n            currentDocument.generateTocListDOM(function(dom){\r\n                loadToc(dom)\r\n            });\r\n\r\n            wasFixed = readium.reader.isCurrentViewFixedLayout();\r\n            var metadata = options.metadata;\r\n\r\n            $('<h2 class=\"book-title-header\"></h2>').insertAfter('.navbar').text(metadata.title);\r\n\r\n\r\n            $(\"#left-page-btn\").unbind(\"click\");\r\n            $(\"#right-page-btn\").unbind(\"click\");\r\n            var $pageBtnsContainer = $('#readium-page-btns');\r\n            $pageBtnsContainer.empty();\r\n            var rtl = currentDocument.getPageProgressionDirection() === \"rtl\"; //_package.spine.isLeftToRight()\r\n            $pageBtnsContainer.append(ReaderBodyPageButtons({strings: Strings, dialogs: Dialogs, keyboard: Keyboard,\r\n                pageProgressionDirectionIsRTL: rtl\r\n            }));\r\n            $(\"#left-page-btn\").on(\"click\", prevPage);\r\n            $(\"#right-page-btn\").on(\"click\", nextPage);\r\n\r\n        }, openPageRequest);\r\n    };\r\n\r\n    var spin = function()\r\n    {\r\n//console.error(\"do SPIN: -- WILL: \" + spinner.willSpin + \" IS:\" + spinner.isSpinning + \" STOP REQ:\" + spinner.stopRequested);\r\n        if (spinner.willSpin || spinner.isSpinning) return;\r\n\r\n        spinner.willSpin = true;\r\n\r\n        setTimeout(function()\r\n        {\r\n            if (spinner.stopRequested)\r\n            {\r\n//console.debug(\"STOP REQUEST: -- WILL: \" + spinner.willSpin + \" IS:\" + spinner.isSpinning + \" STOP REQ:\" + spinner.stopRequested);\r\n                spinner.willSpin = false;\r\n                spinner.stopRequested = false;\r\n                return;\r\n            }\r\n//console.debug(\"SPIN: -- WILL: \" + spinner.willSpin + \" IS:\" + spinner.isSpinning + \" STOP REQ:\" + spinner.stopRequested);\r\n            spinner.isSpinning = true;\r\n            spinner.spin($('#reading-area')[0]);\r\n\r\n            spinner.willSpin = false;\r\n\r\n        }, 100);\r\n    };\r\n\r\n    var tocShowHideToggle = function(){\r\n\r\n        $(document.body).removeClass('hide-ui');\r\n\r\n        var $appContainer = $('#app-container'),\r\n            hide = $appContainer.hasClass('toc-visible');\r\n        var bookmark;\r\n        if (readium.reader.handleViewportResize && !embedded){\r\n            bookmark = JSON.parse(readium.reader.bookmarkCurrentPage());\r\n        }\r\n\r\n        if (hide){\r\n            $appContainer.removeClass('toc-visible');\r\n\r\n            setTimeout(function(){ $('#tocButt')[0].focus(); }, 100);\r\n        }\r\n        else{\r\n            $appContainer.addClass('toc-visible');\r\n\r\n            setTimeout(function(){ $('#readium-toc-body button.close')[0].focus(); }, 100);\r\n        }\r\n\r\n        if(embedded){\r\n            hideLoop(null, true);\r\n        }else if (readium.reader.handleViewportResize){\r\n\r\n            readium.reader.handleViewportResize();\r\n\r\n            setTimeout(function()\r\n            {\r\n                readium.reader.openSpineItemElementCfi(bookmark.idref, bookmark.contentCFI, readium.reader);\r\n            }, 90);\r\n        }\r\n    };\r\n\r\n    var showScaleDisplay = function(){\r\n        $('.zoom-wrapper').show();\r\n    }\r\n    var setScaleDisplay = function(){\r\n        var scale = readium.reader.getViewScale();\r\n        $('.zoom-wrapper input').val(Math.round(scale) + \"%\");\r\n    }\r\n\r\n    var hideScaleDisplay = function(){\r\n        $('.zoom-wrapper').hide();\r\n    }\r\n\r\n    var loadToc = function(dom){\r\n\r\n        if (dom) {\r\n            $('script', dom).remove();\r\n\r\n            var tocNav;\r\n\r\n            var $navs = $('nav', dom);\r\n            Array.prototype.every.call($navs, function(nav){\r\n                if (nav.getAttributeNS('http://www.idpf.org/2007/ops', 'type') == 'toc'){\r\n                    tocNav = nav;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n\r\n            var isRTL = false;\r\n            var pparent = tocNav;\r\n\r\n            while (pparent && pparent.getAttributeNS)\r\n            {\r\n                var dir = pparent.getAttributeNS(\"http://www.w3.org/1999/xhtml\", \"dir\") || pparent.getAttribute(\"dir\");\r\n\r\n                if (dir && dir === \"rtl\")\r\n                {\r\n                    isRTL = true;\r\n                    break;\r\n                }\r\n                pparent = pparent.parentNode;\r\n            }\r\n\r\n            var toc = (tocNav && $(tocNav).html()) || $('body', dom).html() || $(dom).html();\r\n            var tocUrl = currentDocument.getToc();\r\n\r\n            if (toc && toc.length)\r\n            {\r\n                var $toc = $(toc);\r\n\r\n                // \"iframe\" elements need to be stripped out, because of potential vulnerability when loading malicious EPUBs\r\n                // e.g. src=\"javascript:doHorribleThings(window.top)\"\r\n                // Note that \"embed\" and \"object\" elements with AllowScriptAccess=\"always\" do not need to be removed,\r\n                // because unlike \"iframe\" the @src URI does not trigger the execution of the \"javascript:\" statement,\r\n                // and because the \"data:\" base64 encoding of an image/svg that contains ecmascript\r\n                // automatically results in origin/domain restrictions (thereby preventing access to window.top / window.parent).\r\n                // Also note that \"script\" elements are discarded automatically by jQuery.\r\n                $('iframe', $toc).remove();\r\n\r\n                $('#readium-toc-body').append($toc);\r\n\r\n                if (isRTL)\r\n                {\r\n                    $toc[0].setAttributeNS(\"http://www.w3.org/1999/xhtml\", \"dir\", \"rtl\");\r\n                    $toc[0].style.direction = \"rtl\"; // The CSS stylesheet property does not trigger :(\r\n                }\r\n            }\r\n\r\n        } else {\r\n            var tocUrl = currentDocument.getToc();\r\n\r\n            $('#readium-toc-body').append(\"?? \" + tocUrl);\r\n        }\r\n\r\n        var _tocLinkActivated = false;\r\n\r\n        var lastIframe = undefined,\r\n            wasFixed;\r\n\r\n        readium.reader.on(ReadiumSDK.Events.FXL_VIEW_RESIZED, setScaleDisplay);\r\n        readium.reader.on(ReadiumSDK.Events.CONTENT_DOCUMENT_LOADED, function ($iframe, spineItem)\r\n        {\r\n\r\n            var isFixed = readium.reader.isCurrentViewFixedLayout();\r\n\r\n            // TODO: fix the pan-zoom feature!\r\n            if (isFixed){\r\n                showScaleDisplay();\r\n            }\r\n            else{\r\n                hideScaleDisplay();\r\n            }\r\n\r\n            //TODO not picked-up by all screen readers, so for now this short description will suffice\r\n            $iframe.attr(\"title\", \"EPUB\");\r\n            $iframe.attr(\"aria-label\", \"EPUB\");\r\n\r\n            lastIframe = $iframe[0];\r\n        });\r\n\r\n        readium.reader.on(ReadiumSDK.Events.PAGINATION_CHANGED, function (pageChangeData)\r\n        {\r\n            savePlace();\r\n            updateUI(pageChangeData);\r\n\r\n\r\n            if (spinner.isSpinning)\r\n            {\r\n//console.debug(\"!! SPIN: -- WILL: \" + spinner.willSpin + \" IS:\" + spinner.isSpinning + \" STOP REQ:\" + spinner.stopRequested);\r\n                spinner.stop();\r\n                spinner.isSpinning = false;\r\n            }\r\n            else if (spinner.willSpin)\r\n            {\r\n//console.debug(\"!! SPIN REQ: -- WILL: \" + spinner.willSpin + \" IS:\" + spinner.isSpinning + \" STOP REQ:\" + spinner.stopRequested);\r\n                spinner.stopRequested = true;\r\n            }\r\n\r\n            if (!_tocLinkActivated) return;\r\n            _tocLinkActivated = false;\r\n\r\n            try\r\n            {\r\n                var iframe = undefined;\r\n                var element = undefined;\r\n\r\n                var id = pageChangeData.elementId;\r\n                if (!id)\r\n                {\r\n                    var bookmark = JSON.parse(readium.reader.bookmarkCurrentPage());\r\n\r\n                    //bookmark.idref; //manifest item\r\n                    if (pageChangeData.spineItem)\r\n                    {\r\n                        element = readium.reader.getElementByCfi(pageChangeData.spineItem, bookmark.contentCFI,\r\n                            [\"cfi-marker\", \"mo-cfi-highlight\"],\r\n                            [],\r\n                            [\"MathJax_Message\"]);\r\n                        element = element[0];\r\n\r\n                        if (element)\r\n                        {\r\n                            iframe = $(\"#epub-reader-frame iframe\")[0];\r\n                            var doc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n                            if (element.ownerDocument !== doc)\r\n                            {\r\n                                iframe = $(\"#epub-reader-frame iframe\")[1];\r\n                                if (iframe)\r\n                                {\r\n                                    doc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n                                    if (element.ownerDocument !== doc)\r\n                                    {\r\n                                        iframe = undefined;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    iframe = $(\"#epub-reader-frame iframe\")[0];\r\n                    var doc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n                    element = doc.getElementById(id);\r\n                    if (!element)\r\n                    {\r\n                        iframe = $(\"#epub-reader-frame iframe\")[1];\r\n                        if (iframe)\r\n                        {\r\n                            doc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n                            element = doc.getElementById(id);\r\n                            if (!element)\r\n                            {\r\n                                iframe = undefined;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!iframe)\r\n                {\r\n                    iframe = lastIframe;\r\n                }\r\n\r\n                if (iframe)\r\n                {\r\n                    //var doc = ( iframe.contentWindow || iframe.contentDocument ).document;\r\n                    var toFocus = iframe; //doc.body\r\n                    setTimeout(function(){ toFocus.focus(); }, 50);\r\n                }\r\n            }\r\n            catch (e)\r\n            {\r\n                //\r\n            }\r\n        });\r\n\r\n        $('#readium-toc-body').on('click', 'a', function(e)\r\n        {\r\n            spin();\r\n\r\n            var href = $(this).attr('href');\r\n            href = tocUrl ? new URI(href).absoluteTo(tocUrl).toString() : href;\r\n\r\n            _tocLinkActivated = true;\r\n\r\n            readium.reader.openContentUrl(href);\r\n\r\n            if (embedded){\r\n                $('.toc-visible').removeClass('toc-visible');\r\n                $(document.body).removeClass('hide-ui');\r\n            }\r\n            return false;\r\n        });\r\n        $('#readium-toc-body').prepend('<button tabindex=\"50\" type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"'+Strings.i18n_close+' '+Strings.toc+'\" title=\"'+Strings.i18n_close+' '+Strings.toc+'\"><span aria-hidden=\"true\">&times;</span></button>');\r\n        $('#readium-toc-body button.close').on('click', function(){\r\n            tocShowHideToggle();\r\n            /*\r\n            var bookmark = JSON.parse(readium.reader.bookmarkCurrentPage());\r\n            $('#app-container').removeClass('toc-visible');\r\n            if (embedded){\r\n                $(document.body).removeClass('hide-ui');\r\n            }else if (readium.reader.handleViewportResize){\r\n                readium.reader.handleViewportResize();\r\n                readium.reader.openSpineItemElementCfi(bookmark.idref, bookmark.contentCFI, readium.reader);\r\n            }\r\n            */\r\n            return false;\r\n        })\r\n    }\r\n\r\n    var toggleFullScreen = function(){\r\n\r\n        if (!screenfull.enabled) return;\r\n\r\n        screenfull.toggle();\r\n    }\r\n\r\n    screenfull.onchange = function(e){\r\n        var titleText;\r\n\r\n        if (screenfull.isFullscreen)\r\n        {\r\n            titleText = Strings.exit_fullscreen+ ' [' + Keyboard.FullScreenToggle + ']';\r\n            $('#buttFullScreenToggle span').removeClass('glyphicon-resize-full');\r\n            $('#buttFullScreenToggle span').addClass('glyphicon-resize-small');\r\n            $('#buttFullScreenToggle').attr('aria-label', titleText);\r\n            $('#buttFullScreenToggle').attr('title', titleText);\r\n        }\r\n        else\r\n        {\r\n            titleText = Strings.enter_fullscreen + ' [' + Keyboard.FullScreenToggle + ']';\r\n            $('#buttFullScreenToggle span').removeClass('glyphicon-resize-small');\r\n            $('#buttFullScreenToggle span').addClass('glyphicon-resize-full');\r\n            $('#buttFullScreenToggle').attr('aria-label', titleText);\r\n            $('#buttFullScreenToggle').attr('title', titleText);\r\n        }\r\n    }\r\n\r\n    var hideUI = function(){\r\n        hideTimeoutId = null;\r\n        // don't hide it toolbar while toc open in non-embedded mode\r\n        if (!embedded && $('#app-container').hasClass('toc-visible')){\r\n            return;\r\n        }\r\n\r\n        var navBar = document.getElementById(\"app-navbar\");\r\n        if (document.activeElement) {\r\n            var within = jQuery.contains(navBar, document.activeElement);\r\n            if (within) return;\r\n        }\r\n\r\n        var $navBar = $(navBar);\r\n        // BROEKN! $navBar.is(':hover')\r\n        var isMouseOver = $navBar.find(':hover').length > 0;\r\n        if (isMouseOver) return;\r\n\r\n        if ($('#audioplayer').hasClass('expanded-audio')) return;\r\n\r\n        $(document.body).addClass('hide-ui');\r\n    }\r\n\r\n    var hideTimeoutId;\r\n\r\n    var hideLoop = function(e, immediate){\r\n\r\n        // if (!embedded){\r\n        //     return;\r\n        // }\r\n        if (hideTimeoutId){\r\n            window.clearTimeout(hideTimeoutId);\r\n            hideTimeoutId = null;\r\n        }\r\n        if (!$('#app-container').hasClass('toc-visible') && $(document.body).hasClass('hide-ui')){\r\n            $(document.body).removeClass('hide-ui');\r\n        }\r\n        if (immediate){\r\n            hideUI();\r\n        }\r\n        else{\r\n            hideTimeoutId = window.setTimeout(hideUI, 4000);\r\n        }\r\n    }\r\n\r\n    //TODO: also update \"previous/next page\" commands status (disabled/enabled), not just button visibility.\r\n    // https://github.com/readium/readium-js-viewer/issues/188\r\n    // See onSwipeLeft() onSwipeRight() in gesturesHandler.\r\n    // See nextPage() prevPage() in this class.\r\n    var updateUI = function(pageChangeData){\r\n        if(pageChangeData.paginationInfo.canGoLeft())\r\n            $(\"#left-page-btn\").show();\r\n        else\r\n            $(\"#left-page-btn\").hide();\r\n        if(pageChangeData.paginationInfo.canGoRight())\r\n            $(\"#right-page-btn\").show();\r\n        else\r\n            $(\"#right-page-btn\").hide();\r\n    }\r\n\r\n    var savePlace = function(){\r\n        Settings.put(url, readium.reader.bookmarkCurrentPage(), $.noop);\r\n    }\r\n\r\n    var nextPage = function () {\r\n\r\n        readium.reader.openPageRight();\r\n        return false;\r\n    };\r\n\r\n    var prevPage = function () {\r\n\r\n        readium.reader.openPageLeft();\r\n        return false;\r\n    };\r\n\r\n    var installReaderEventHandlers = function(){\r\n\r\n        // Set handlers for click events\r\n        $(\".icon-annotations\").on(\"click\", function () {\r\n            readium.reader.plugins.annotations.addSelectionHighlight(Math.floor((Math.random()*1000000)), \"highlight\");\r\n        });\r\n\r\n        var isWithinForbiddenNavKeysArea = function()\r\n        {\r\n            return document.activeElement &&\r\n            (\r\n                document.activeElement === document.getElementById('volume-range-slider')\r\n                || document.activeElement === document.getElementById('time-range-slider')\r\n                || document.activeElement === document.getElementById('rate-range-slider')\r\n                || jQuery.contains(document.getElementById(\"mo-sync-form\"), document.activeElement)\r\n                || jQuery.contains(document.getElementById(\"mo-highlighters\"), document.activeElement)\r\n\r\n                // jQuery.contains(document.getElementById(\"app-navbar\"), document.activeElement)\r\n                // || jQuery.contains(document.getElementById(\"settings-dialog\"), document.activeElement)\r\n                // || jQuery.contains(document.getElementById(\"about-dialog\"), document.activeElement)\r\n            )\r\n            ;\r\n        };\r\n\r\n        var hideTB = function(){\r\n            if (!embedded && $('#app-container').hasClass('toc-visible')){\r\n                return;\r\n            }\r\n            $(document.body).addClass('hide-ui');\r\n            if (document.activeElement) document.activeElement.blur();\r\n        };\r\n        $(\"#buttHideToolBar\").on(\"click\", hideTB);\r\n        Keyboard.on(Keyboard.ToolbarHide, 'reader', hideTB);\r\n\r\n        var showTB = function(){\r\n            $(\"#aboutButt1\")[0].focus();\r\n            $(document.body).removeClass('hide-ui');\r\n            setTimeout(function(){ $(\"#aboutButt1\")[0].focus(); }, 50);\r\n        };\r\n        $(\"#buttShowToolBar\").on(\"click\", showTB);\r\n        Keyboard.on(Keyboard.ToolbarShow, 'reader', showTB);\r\n\r\n        Keyboard.on(Keyboard.PagePrevious, 'reader', function(){\r\n            if (!isWithinForbiddenNavKeysArea()) prevPage();\r\n        });\r\n\r\n        Keyboard.on(Keyboard.PagePreviousAlt, 'reader', prevPage);\r\n\r\n        Keyboard.on(Keyboard.PageNextAlt, 'reader', nextPage);\r\n\r\n        Keyboard.on(Keyboard.PageNext, 'reader', function(){\r\n            if (!isWithinForbiddenNavKeysArea()) nextPage();\r\n        });\r\n\r\n        Keyboard.on(Keyboard.FullScreenToggle, 'reader', toggleFullScreen);\r\n\r\n        $('#buttFullScreenToggle').on('click', toggleFullScreen);\r\n\r\n        var loadlibrary = function()\r\n        {\r\n            $(\"html\").attr(\"data-theme\", \"library\");\r\n\r\n            $(window).trigger('loadlibrary');\r\n        };\r\n\r\n        Keyboard.on(Keyboard.SwitchToLibrary, 'reader', loadlibrary /* function(){setTimeout(, 30);} */ );\r\n\r\n        $('.icon-library').on('click', function(){\r\n            loadlibrary();\r\n            return false;\r\n        });\r\n\r\n        $('.zoom-wrapper input').on('click', function(){\r\n            if (!this.disabled){\r\n                this.focus();\r\n                return false;\r\n            }\r\n        });\r\n\r\n        Keyboard.on(Keyboard.TocShowHideToggle, 'reader', function()\r\n        {\r\n            var visible = $('#app-container').hasClass('toc-visible');\r\n            if (!visible)\r\n            {\r\n                tocShowHideToggle();\r\n            }\r\n            else\r\n            {\r\n                setTimeout(function(){ $('#readium-toc-body button.close')[0].focus(); }, 100);\r\n            }\r\n        });\r\n\r\n        $('.icon-toc').on('click', tocShowHideToggle);\r\n\r\n        var setTocSize = function(){\r\n            var appHeight = $(document.body).height() - $('#app-container')[0].offsetTop;\r\n            $('#app-container').height(appHeight);\r\n            $('#readium-toc-body').height(appHeight);\r\n        };\r\n\r\n        Keyboard.on(Keyboard.ShowSettingsModal, 'reader', function(){$('#settings-dialog').modal(\"show\")});\r\n\r\n        $(window).on('mousemove', hideLoop);\r\n        $(window).on('resize', setTocSize);\r\n        setTocSize();\r\n        hideLoop();\r\n\r\n        // captures all clicks on the document on the capture phase. Not sure if it's possible with jquery\r\n        // so I'm using DOM api directly\r\n        document.addEventListener('click', hideLoop, true);\r\n    };\r\n\r\n    var setFitScreen = function(e){\r\n        readium.reader.setZoom({style: 'fit-screen'});\r\n        $('.active-zoom').removeClass('active-zoom');\r\n        $('#zoom-fit-screen').addClass('active-zoom');\r\n        $('.zoom-wrapper input').prop('disabled', true);\r\n        $('.zoom-wrapper>a').dropdown('toggle');\r\n        return false;\r\n    }\r\n\r\n    var setFitWidth = function(e){\r\n        readium.reader.setZoom({style: 'fit-width'});\r\n        $('.active-zoom').removeClass('active-zoom');\r\n        $('#zoom-fit-width').addClass('active-zoom');\r\n        $('.zoom-wrapper input').prop('disabled', true);\r\n         $('.zoom-wrapper>a').dropdown('toggle');\r\n        return false;\r\n    }\r\n\r\n    var enableCustom = function(e){\r\n        $('.zoom-wrapper input').prop('disabled', false).focus();\r\n        $('.active-zoom').removeClass('active-zoom');\r\n        $('#zoom-custom').addClass('active-zoom');\r\n         $('.zoom-wrapper>a').dropdown('toggle');\r\n        return false;\r\n    }\r\n\r\n    var zoomRegex = /^\\s*(\\d+)%?\\s*$/;\r\n    var setCustom = function(e){\r\n        var percent = $('.zoom-wrapper input').val();\r\n        var matches = zoomRegex.exec(percent);\r\n        if (matches){\r\n            var percentVal = Number(matches[1])/100;\r\n            readium.reader.setZoom({style: 'user', scale: percentVal});\r\n        }\r\n        else{\r\n            setScaleDisplay();\r\n        }\r\n    }\r\n\r\n    var loadReaderUIPrivate = function(){\r\n        $('.modal-backdrop').remove();\r\n        var $appContainer = $('#app-container');\r\n        $appContainer.empty();\r\n        $appContainer.append(ReaderBody({strings: Strings, dialogs: Dialogs, keyboard: Keyboard}));\r\n        $('nav').empty();\r\n        $('nav').attr(\"aria-label\", Strings.i18n_toolbar);\r\n        $('nav').append(ReaderNavbar({strings: Strings, dialogs: Dialogs, keyboard: Keyboard}));\r\n        installReaderEventHandlers();\r\n        document.title = \"Readium\";\r\n        $('#zoom-fit-width a').on('click', setFitWidth);\r\n        $('#zoom-fit-screen a').on('click', setFitScreen);\r\n        $('#zoom-custom a').on('click', enableCustom);\r\n        $('.zoom-wrapper input').on('change', setCustom);\r\n\r\n        spin();\r\n    }\r\n\r\n    var loadReaderUI = function (data) {\r\n\r\n        Keyboard.scope('reader');\r\n\r\n        url = data.epub;\r\n        Analytics.trackView('/reader');\r\n        embedded = data.embedded;\r\n\r\n        loadReaderUIPrivate();\r\n\r\n        //because we reinitialize the reader we have to unsubscribe to all events for the previews reader instance\r\n        if(readium && readium.reader) {\r\n            readium.reader.off();\r\n        }\r\n\r\n        if (window.ReadiumSDK) {\r\n            ReadiumSDK.off(ReadiumSDK.Events.PLUGINS_LOADED);\r\n        }\r\n\r\n        setTimeout(function()\r\n        {\r\n            initReadium(); //async\r\n        }, 0);\r\n    };\r\n\r\n    var initReadium = function(){\r\n\r\n        console.log(\"MODULE CONFIG \" + module.id);\r\n        console.log(module.config());\r\n\r\n        Settings.getMultiple(['reader', url], function(settings){\r\n\r\n            var prefix = (self.location && self.location.origin && self.location.pathname) ? (self.location.origin + self.location.pathname + \"/..\") : \"\";\r\n            var readerOptions =  {\r\n                el: \"#epub-reader-frame\",\r\n                annotationCSSUrl: module.config().annotationCSSUrl || \"?!module.config().annotationCssUrl\", //(prefix + \"/css/annotations.css\"),\r\n                mathJaxUrl : module.config().mathJaxUrl || \"?!module.config().mathJaxUrl\" //? (prefix + module.config().mathJaxUrl) : (prefix + \"/scripts/mathjax/MathJax.js\")\r\n            };\r\n\r\n            var readiumOptions = {\r\n                jsLibRoot: module.config().jsLibRoot || \"?!module.config().jsLibRoot\", //'./scripts/zip/',\r\n                openBookOptions: {}\r\n            };\r\n\r\n            if (module.config().useSimpleLoader){\r\n                readiumOptions.useSimpleLoader = true;\r\n            }\r\n\r\n            var openPageRequest;\r\n            if (settings[url]){\r\n                var bookmark = JSON.parse(JSON.parse(settings[url]));\r\n                openPageRequest = {idref: bookmark.idref, elementCfi: bookmark.contentCFI};\r\n            }\r\n\r\n\r\n            readium = new Readium(readiumOptions, readerOptions);\r\n\r\n            window.READIUM = readium;\r\n\r\n            ReadiumSDK.on(ReadiumSDK.Events.PLUGINS_LOADED, function () {\r\n                console.log('PLUGINS INITIALIZED!');\r\n                readium.reader.plugins.annotations.initialize({annotationCSSUrl: readerOptions.annotationCSSUrl});\r\n            });\r\n\r\n            //setup gestures support with hummer\r\n            gesturesHandler = new GesturesHandler(readium.reader, readerOptions.el);\r\n            gesturesHandler.initialize();\r\n\r\n            //epubReadingSystem\r\n\r\n            Versioning.getVersioningInfo(function(version){\r\n\r\n                $('#app-container').append(AboutDialog({strings: Strings, viewer: version.readiumJsViewer, readium: version.readiumJs, sharedJs: version.readiumSharedJs, cfiJs: version.readiumCfiJs}));\r\n\r\n                window.navigator.epubReadingSystem.name = \"readium-js-viewer\";\r\n                window.navigator.epubReadingSystem.version = version.readiumJsViewer.chromeVersion;\r\n\r\n                window.navigator.epubReadingSystem.readium = {};\r\n\r\n                window.navigator.epubReadingSystem.readium.buildInfo = {};\r\n\r\n                window.navigator.epubReadingSystem.readium.buildInfo.dateTime = version.dateTimeString; //new Date(timestamp).toString();\r\n                window.navigator.epubReadingSystem.readium.buildInfo.version = version.readiumJsViewer.version;\r\n                window.navigator.epubReadingSystem.readium.buildInfo.chromeVersion = version.readiumJsViewer.chromeVersion;\r\n\r\n                window.navigator.epubReadingSystem.readium.buildInfo.gitRepositories = [];\r\n\r\n                var repo1 = {};\r\n                repo1.name = \"readium-js-viewer\";\r\n                repo1.sha = version.readiumJsViewer.sha;\r\n                repo1.tag = version.readiumJsViewer.tag;\r\n                repo1.version = version.readiumJsViewer.version;\r\n                repo1.clean = version.readiumJsViewer.clean;\r\n                repo1.branch = version.readiumJsViewer.branch;\r\n                repo1.release = version.readiumJsViewer.release;\r\n                repo1.timestamp = version.readiumJsViewer.timestamp;\r\n                repo1.url = \"https://github.com/readium/\" + repo1.name + \"/tree/\" + repo1.sha;\r\n                window.navigator.epubReadingSystem.readium.buildInfo.gitRepositories.push(repo1);\r\n\r\n                var repo2 = {};\r\n                repo2.name = \"readium-js\";\r\n                repo2.sha = version.readiumJs.sha;\r\n                repo2.tag = version.readiumJs.tag;\r\n                repo2.version = version.readiumJs.version;\r\n                repo2.clean = version.readiumJs.clean;\r\n                repo2.branch = version.readiumJs.branch;\r\n                repo2.release = version.readiumJs.release;\r\n                repo2.timestamp = version.readiumJs.timestamp;\r\n                repo2.url = \"https://github.com/readium/\" + repo2.name + \"/tree/\" + repo2.sha;\r\n                window.navigator.epubReadingSystem.readium.buildInfo.gitRepositories.push(repo2);\r\n\r\n                var repo3 = {};\r\n                repo3.name = \"readium-shared-js\";\r\n                repo3.sha = version.readiumSharedJs.sha;\r\n                repo3.tag = version.readiumSharedJs.tag;\r\n                repo3.version = version.readiumSharedJs.version;\r\n                repo3.clean = version.readiumSharedJs.clean;\r\n                repo3.branch = version.readiumSharedJs.branch;\r\n                repo3.release = version.readiumSharedJs.release;\r\n                repo3.timestamp = version.readiumSharedJs.timestamp;\r\n                repo3.url = \"https://github.com/readium/\" + repo3.name + \"/tree/\" + repo3.sha;\r\n                window.navigator.epubReadingSystem.readium.buildInfo.gitRepositories.push(repo3);\r\n\r\n                var repo4 = {};\r\n                repo4.name = \"readium-cfi-js\";\r\n                repo4.sha = version.readiumCfiJs.sha;\r\n                repo4.tag = version.readiumCfiJs.tag;\r\n                repo4.version = version.readiumCfiJs.version;\r\n                repo4.clean = version.readiumCfiJs.clean;\r\n                repo4.branch = version.readiumCfiJs.branch;\r\n                repo4.release = version.readiumCfiJs.release;\r\n                repo4.timestamp = version.readiumCfiJs.timestamp;\r\n                repo4.url = \"https://github.com/readium/\" + repo4.name + \"/tree/\" + repo4.sha;\r\n                window.navigator.epubReadingSystem.readium.buildInfo.gitRepositories.push(repo4);\r\n\r\n                // Debug check:\r\n                //console.debug(JSON.stringify(window.navigator.epubReadingSystem, undefined, 2));\r\n            });\r\n\r\n\r\n            $(window).on('keyup', function(e)\r\n            {\r\n                if (e.keyCode === 9 || e.which === 9)\r\n                {\r\n                    $(document.body).removeClass('hide-ui');\r\n                }\r\n            });\r\n\r\n            readium.reader.addIFrameEventListener('mousemove', function() {\r\n                hideLoop();\r\n            });\r\n\r\n            readium.reader.addIFrameEventListener('keydown', function(e) {\r\n                Keyboard.dispatch(document.documentElement, e.originalEvent);\r\n            });\r\n\r\n            readium.reader.addIFrameEventListener('keyup', function(e) {\r\n                Keyboard.dispatch(document.documentElement, e.originalEvent);\r\n            });\r\n\r\n            readium.reader.addIFrameEventListener('focus', function(e) {\r\n                $(window).trigger(\"focus\");\r\n            });\r\n\r\n            SettingsDialog.initDialog(readium.reader);\r\n\r\n            $('#settings-dialog').on('hidden.bs.modal', function () {\r\n\r\n                Keyboard.scope('reader');\r\n\r\n                $(document.body).removeClass('hide-ui');\r\n                setTimeout(function(){ $(\"#settbutt1\").focus(); }, 50);\r\n\r\n                $(\"#buttSave\").removeAttr(\"accesskey\");\r\n                $(\"#buttClose\").removeAttr(\"accesskey\");\r\n            });\r\n            $('#settings-dialog').on('shown.bs.modal', function () {\r\n\r\n                Keyboard.scope('settings');\r\n\r\n                $(\"#buttSave\").attr(\"accesskey\", Keyboard.accesskeys.SettingsModalSave);\r\n                $(\"#buttClose\").attr(\"accesskey\", Keyboard.accesskeys.SettingsModalClose);\r\n            });\r\n\r\n\r\n            $('#about-dialog').on('hidden.bs.modal', function () {\r\n                Keyboard.scope('reader');\r\n\r\n                $(document.body).removeClass('hide-ui');\r\n                setTimeout(function(){ $(\"#aboutButt1\").focus(); }, 50);\r\n            });\r\n            $('#about-dialog').on('shown.bs.modal', function(){\r\n                Keyboard.scope('about');\r\n            });\r\n\r\n            var readerSettings;\r\n            if (settings.reader){\r\n                readerSettings = JSON.parse(settings.reader);\r\n            }\r\n            if (!embedded){\r\n                readerSettings = readerSettings || SettingsDialog.defaultSettings;\r\n                SettingsDialog.updateReader(readium.reader, readerSettings);\r\n            }\r\n            else{\r\n                readium.reader.updateSettings({\r\n                    syntheticSpread:  \"auto\",\r\n                    scroll: \"auto\"\r\n                });\r\n            }\r\n\r\n\r\n            var toggleNightTheme = function(){\r\n\r\n                if (!embedded){\r\n\r\n                    Settings.get('reader', function(json)\r\n                    {\r\n                        if (!json)\r\n                        {\r\n                            json = {};\r\n                        }\r\n\r\n                        var isNight = json.theme === \"night-theme\";\r\n                        json.theme = isNight ? \"author-theme\" : \"night-theme\";\r\n\r\n                        Settings.put('reader', json);\r\n\r\n                        SettingsDialog.updateReader(readium.reader, json);\r\n                    });\r\n                }\r\n            };\r\n            $(\"#buttNightTheme\").on(\"click\", toggleNightTheme);\r\n            Keyboard.on(Keyboard.NightTheme, 'reader', toggleNightTheme);\r\n\r\n            readium.reader.on(ReadiumSDK.Events.CONTENT_DOCUMENT_LOAD_START, function($iframe, spineItem) {\r\n                spin();\r\n            });\r\n\r\n            EpubReaderMediaOverlays.init(readium);\r\n\r\n            EpubReaderBackgroundAudioTrack.init(readium);\r\n\r\n            loadEbook(url, readerSettings, openPageRequest);\r\n\r\n            readium.reader.plugins.annotations.on(\"annotationClicked\", function(type, idref, cfi, id) {\r\nconsole.debug(\"ANNOTATION CLICK: \" + id);\r\n                readium.reader.plugins.annotations.removeHighlight(id);\r\n            });\r\n\r\n            if (readium.reader.plugins.example) {\r\n                readium.reader.plugins.example.on(\"exampleEvent\", function(message) {\r\n                    alert(message);\r\n                });\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    var unloadReaderUI = function(){\r\n\r\n        if (readium) {\r\n            readium.closePackageDocument();\r\n        }\r\n\r\n        // needed only if access keys can potentially be used to open a book while a dialog is opened, because keyboard.scope() is not accounted for with HTML access keys :(\r\n        // for example: settings dialogs is open => SHIFT CTRL [B] access key => library view opens with transparent black overlay!\r\n        Dialogs.closeModal();\r\n        Dialogs.reset();\r\n        $('#settings-dialog').modal('hide');\r\n        $('#about-dialog').modal('hide');\r\n        $('.modal-backdrop').remove();\r\n\r\n\r\n        Keyboard.off('reader');\r\n        Keyboard.off('settings');\r\n\r\n        $('#settings-dialog').off('hidden.bs.modal');\r\n        $('#settings-dialog').off('shown.bs.modal');\r\n\r\n        $('#about-dialog').off('hidden.bs.modal');\r\n        $('#about-dialog').off('shown.bs.modal');\r\n\r\n        // visibility check fails because iframe is unloaded\r\n        //if (readium.reader.isMediaOverlayAvailable())\r\n        if (readium && readium.reader) // window.push/popstate\r\n            readium.reader.pauseMediaOverlay();\r\n\r\n        $(window).off('resize');\r\n        $(window).off('mousemove');\r\n        $(window).off('keyup');\r\n        $(window).off('message');\r\n        window.clearTimeout(hideTimeoutId);\r\n        $(document.body).removeClass('embedded');\r\n        document.removeEventListener('click', hideLoop, true);\r\n        $('.book-title-header').remove();\r\n\r\n        $(document.body).removeClass('hide-ui');\r\n    }\r\n\r\n    var applyKeyboardSettingsAndLoadUi = function(data)\r\n    {\r\n        // override current scheme with user options\r\n        Settings.get('reader', function(json)\r\n        {\r\n           Keyboard.applySettings(json);\r\n\r\n           loadReaderUI(data);\r\n        });\r\n    };\r\n\r\n    return {\r\n        loadUI : applyKeyboardSettingsAndLoadUi,\r\n        unloadUI : unloadReaderUI\r\n    };\r\n\r\n});\r\n\n",
    "define('readium_js_viewer/ReadiumViewer',['jquery', './EpubLibrary', './EpubReader'], function($, EpubLibrary, EpubReader){\r\n\r\n\tvar getEpubQueryParam = function(){\r\n        var query = window.location.search;\r\n        if (query && query.length){\r\n            query = query.substring(1);\r\n        }\r\n        if (query.length){\r\n            var keyParams = query.split('&');\r\n            for (var x = 0; x < keyParams.length; x++)\r\n            {\r\n                var keyVal = keyParams[x].split('=');\r\n                if (keyVal[0] == 'epub' && keyVal.length == 2){\r\n                    return keyVal[1];\r\n                }\r\n            }\r\n\r\n        }\r\n        return null;\r\n    }\r\n\r\n\tvar initialLoad = function(){\r\n\r\n\t\tvar epubUrl = getEpubQueryParam();\r\n\t\tif (epubUrl){\r\n                EpubReader.loadUI({epub: decodeURIComponent(epubUrl)});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tEpubLibrary.loadUI();\r\n\t\t}\r\n\r\n\t\t$(document.body).on('click', function()\r\n        {\r\n            $(document.body).removeClass(\"keyboard\");\r\n        });\r\n\r\n\t\t$(document).on('keyup', function(e)\r\n        {\r\n            $(document.body).addClass(\"keyboard\");\r\n        });\r\n\t}\r\n\r\n\t$(initialLoad);\r\n\r\n\tvar pushState = $.noop;\r\n\tif (window.history && window.history.pushState){\r\n\t\t$(window).on('popstate', function(){\r\n\t\t\tvar state = history.state;\r\n\t\t\tif (state && state.epub){\r\n\t\t\t\treaderView(state.epub);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlibraryView();\r\n\t\t\t}\r\n\t\t});\r\n\t\tpushState = function(data, title, url){\r\n\t\t\thistory.pushState(data, title, url);\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tvar tooltipSelector = 'nav *[title]';\r\n\r\n\tvar libraryView = function(){\r\n\t\t$(tooltipSelector).tooltip('destroy');\r\n\t\tEpubReader.unloadUI();\r\n\t\tEpubLibrary.loadUI();\r\n\t}\r\n\r\n\tvar readerView = function(url){\r\n\t\t$(tooltipSelector).tooltip('destroy');\r\n\t\tEpubLibrary.unloadUI();\r\n\t\tEpubReader.loadUI({epub: url});\r\n\t}\r\n\r\n\t$(window).on('readepub', function(e, url){\r\n\t\treaderView(url);\r\n\t\tpushState({epub: url}, \"Readium Viewer\", '?epub=' + encodeURIComponent(url));\r\n\t});\r\n\r\n\t$(window).on('loadlibrary', function(e){\r\n\t\tlibraryView();\r\n\t\tpushState(null, \"Readium Library\", 'index.html');\r\n\t});\r\n\r\n\t$(document.body).tooltip({\r\n\t\tselector : tooltipSelector,\r\n\t\tplacement: 'auto',\r\n\t\tcontainer: 'body' // do this to prevent weird navbar re-sizing issue when the tooltip is inserted\r\n\t}).on('show.bs.tooltip', function(e){\r\n\t\t$(tooltipSelector).not(e.target).tooltip('destroy');\r\n\t});\r\n\r\n});\r\n\ndefine('readium_js_viewer', ['readium_js_viewer/ReadiumViewer'], function (main) { return main; });\n\n"
  ]
}